"use strict";var version=require("../version");var describe="Run a console with contract abstractions and commands available";var command={command:"console",describe:describe,builder:function builder(yargs){yargs.usage("TronBox v".concat(version.bundle,"\n\n").concat(describe,"\n\nUsage: $0 console [--network <network>] [--evm]")).version(false).options({network:{describe:"Network name in configuration",type:"string"},evm:{describe:"Use EVM configuration",type:"boolean"}}).example("$0 console","Start the console with the development network").example("$0 console --network nile","Start the console with the nile network").example("$0 console --evm","Start the console with EVM configuration").group(["network","evm","help"],"Options:")},run:function run(options,done){process.env.CURRENT="console";var Config=require("../../components/Config");var Console=require("../console");var Environment=require("../environment");var TronWrap=require("../../components/TronWrap");var logErrorAndExit=require("../../components/TronWrap").logErrorAndExit;var config=Config.detect(options);if(!config.network&&config.networks.development){config.network="development"}try{TronWrap(config.networks[config.network],{evm:options.evm,verify:true,logger:options.logger})}catch(err){logErrorAndExit(console,err.message)}var commands=require("./index");var excluded=["console","init","flatten","unbox"];var available_commands=Object.keys(commands).filter(function(name){return excluded.indexOf(name)===-1});var console_commands={};available_commands.forEach(function(name){console_commands[name]=commands[name]});Environment.detect(config,function(err){if(err)return done(err);var c=new Console(console_commands,config["with"]({noAliases:true}));c.start(done)})}};module.exports=command;