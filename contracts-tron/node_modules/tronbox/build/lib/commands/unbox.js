"use strict";function normalizeURL(url){url=url||"https://github.com/tronsuper/bare-box";if(url.indexOf("://")!==-1||url.indexOf("git@")!==-1){return url}if(url.split("/").length===2){return"https://github.com/"+url}if(url.indexOf("/")===-1){if(url.indexOf("-box")===-1){url=url+"-box"}return"https://github.com/tronsuper/"+url}throw new Error("Box specified in invalid format")}function formatCommands(commands){var names=Object.keys(commands);var maxLength=Math.max.apply(null,names.map(function(name){return name.length}));return names.map(function(name){var spacing=Array(maxLength-name.length+1).join(" ");return"  "+name+": "+spacing+commands[name]})}var version=require("../version");var describe="Download a pre-built TronBox Box template";var command={command:"unbox",describe:describe,builder:function builder(yargs){yargs.usage("TronBox v".concat(version.bundle,"\n\n").concat(describe,"\n\nUsage: $0 unbox [<name>] [--quiet]")).version(false).options({quiet:{describe:"Suppress all output except errors",type:"boolean"}}).positional("name",{describe:"Box name, GitHub username/repo, or a full git repo URL. If omitted, downloads the default box.",type:"string"}).example("$0 unbox","Download the default TronBox Box").example("$0 unbox metacoin","Download the \"metacoin\" TronBox Box").example("$0 unbox tronsuper/bare-box","Download a TronBox Box from a GitHub username/repository").example("$0 unbox https://gitlab.com/user/my-box","Download a TronBox Box using its full Git repository URL").group(["quiet","help"],"Options:")},run:function run(options,done){var Config=require("../../components/Config");var Box=require("../../components/Box");var OS=require("os");var chalk=require("chalk");var config=Config["default"]()["with"]({logger:console});if(options.quiet||options.silent){config.logger={log:function log(){}}}var url=normalizeURL(options._[0]);Box.unbox(url,options.working_directory||config.working_directory,{logger:config.logger}).then(function(boxConfig){config.logger.log("Unbox successful. Sweet!"+OS.EOL);var commandMessages=formatCommands(boxConfig.commands);if(commandMessages.length>0){config.logger.log("Commands:"+OS.EOL)}commandMessages.forEach(function(message){config.logger.log(message)});if(boxConfig.epilogue){config.logger.log(boxConfig.epilogue.replace("\n",OS.EOL))}done()})["catch"](function(err){if(err){console.error(chalk.red(chalk.bold("ERROR:"),err.message?err.message:err));process.exit(1)}done()})}};module.exports=command;