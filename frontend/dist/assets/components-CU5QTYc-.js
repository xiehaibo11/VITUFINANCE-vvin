import{w as e,c as t,a,o,b as n,t as s,d as l,e as i,r,f as c,u as d,g as u,h as p,i as v,n as m,j as g,F as f,k as y,l as h,m as w,p as b,q as k,s as T,v as C,x as _,T as W,y as D,z as S,A,B as x}from"./vue-vendor-Th7sVZCl.js";import{S as P,F as M,P as R,W as B,B as I,a as E,b as N,A as L,c as F,d as U}from"./vendor-Bf7WBET-.js";const z={},$=function(e,t,a){let o=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),n=a?.nonce||a?.getAttribute("nonce");o=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in z)return;z[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,n&&o.setAttribute("nonce",n),document.head.appendChild(o),t?new Promise((t,a)=>{o.addEventListener("load",t),o.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},O=async(e,t={},a=null)=>{try{const o={wallet_address:localStorage.getItem("walletAddress")||null,action_type:e,action_detail:t,page_url:a||window.location.pathname,referral_code:localStorage.getItem("vitu_referral_code")||null};fetch("/api/track-behavior",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),keepalive:!0}).catch(()=>{})}catch(o){console.debug("[Tracker] Error:",o.message)}},q=e=>{O("page_view",{page:e})},H=e=>{O("deposit",{amount:e})},j=(e,t)=>{O("robot_purchase",{robot:e,price:t})},X=e=>{O("withdraw",{amount:e})},G=e=>{O("referral_visit",{code:e})},V="/static/one/1.png",Q="/static/YAOQI/10.png",K="/static/one/3.png",Y=(e,t)=>{const a=e.__vccOpts||e;for(const[o,n]of t)a[o]=n;return a},J={class:"alert-text"},Z=Y({__name:"WalletAlert",props:{visible:{type:Boolean,default:!1},message:{type:String,default:"Wallet not connected"}},emits:["update:visible"],setup(i,{emit:r}){const c=i,d=r,u=()=>{d("update:visible",!1)};let p=null;return e(()=>c.visible,e=>{e&&(p&&clearTimeout(p),c.visible&&(p=setTimeout(()=>{u()},3e3)))}),(e,r)=>i.visible?(o(),t("div",{key:0,class:"wallet-alert-overlay",onClick:u},[n("div",{class:"wallet-alert-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[r[1]||(r[1]=n("div",{class:"alert-icon"},[n("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[n("circle",{cx:"20",cy:"20",r:"20",fill:"#ffffff"}),n("text",{x:"20",y:"28","text-anchor":"middle","font-size":"28","font-weight":"bold",fill:"#000000"},"!")])],-1)),n("div",J,s(i.message),1)])])):a("",!0)}},[["__scopeId","data-v-af34239a"]]),ee="vitu_wallet_balances",te=i("wallet",()=>{const t=r(!1),a=r(""),o=r(""),n=r(!1),s=r(""),l=r(""),i=(()=>{try{const e=localStorage.getItem(ee);if(e){const t=JSON.parse(e);return console.log("[Wallet] Loaded persisted balances:",t),t}}catch(e){console.error("[Wallet] Failed to load persisted balances:",e)}return null})(),d=r(i?.usdt||"0.0000"),u=r(i?.wld||"0.0000"),p=r(i?.equity||"0.0000"),v=r("0.00"),m=r(!1);e([d,u,p],([e,t,a])=>{"0.0000"===e&&"0.0000"===t||((e,t,a)=>{try{localStorage.setItem(ee,JSON.stringify({usdt:e,wld:t,equity:a,ts:Date.now()}))}catch(o){}})(e,t,a)});const g=c(()=>o.value?`ID: ${o.value}`:""),f=e=>e?e.slice(-8).toLowerCase():"",y=e=>{if(null==e||""===e)return"0.0000";const t=String(e),a=parseFloat(t);return!isFinite(a)||isNaN(a)?"0.0000":a>=1e15?(a/1e15).toFixed(2)+"Q":a>=1e12?(a/1e12).toFixed(2)+"T":a>=1e9?(a/1e9).toFixed(2)+"B":a>=1e6?(a/1e6).toFixed(2)+"M":a>=1e5?(a/1e3).toFixed(2)+"K":a.toFixed(4)};return{isConnected:t,walletAddress:a,walletShortId:o,isConnecting:n,errorMessage:s,walletType:l,usdtBalance:d,wldBalance:u,equityValue:p,todayPnl:v,isLoadingBalance:m,displayWalletId:g,setWallet:(e,i="Unknown")=>{e&&"null"!==e&&"undefined"!==e?(a.value=e,o.value=f(e),l.value=i,t.value=!0,n.value=!1,s.value="",localStorage.setItem("walletAddress",e),localStorage.setItem("walletType",i),console.log("[Wallet] Connected:",{address:e,shortId:o.value,type:i})):console.warn("[Wallet] Rejected invalid address:",e)},disconnect:(e={})=>{const{clearBalances:i=!0,clearPersistedBalances:r=!0,clearWalletSession:c=!0}=e;n.value=!1,s.value="",c&&(a.value="",o.value="",l.value="",t.value=!1,localStorage.removeItem("walletAddress"),localStorage.removeItem("walletType")),i&&(d.value="0.0000",u.value="0.0000",p.value="0.0000",v.value="0.00",m.value=!1),r&&localStorage.removeItem(ee),console.log("[Wallet] Disconnected",{clearBalances:i,clearPersistedBalances:r,clearWalletSession:c})},setConnecting:e=>{n.value=e},setError:e=>{s.value=e,n.value=!1},restoreFromStorage:()=>{const e=localStorage.getItem("walletAddress"),n=localStorage.getItem("walletType");e&&"null"!==e&&"undefined"!==e&&e.length>8?(a.value=e,o.value=f(e),l.value=n||"Unknown",t.value=!0,console.log("[Wallet] Restored from storage:",{address:e,shortId:o.value,type:n})):"null"!==e&&"undefined"!==e||(localStorage.removeItem("walletAddress"),localStorage.removeItem("walletType"),console.warn("[Wallet] Cleaned invalid stored address:",e))},generateShortId:f,setUsdtBalance:e=>{d.value=y(e)},setWldBalance:e=>{u.value=y(e)},setEquityValue:e=>{p.value=y(e)},setTodayPnl:e=>{v.value=e},setLoadingBalance:e=>{m.value=e},updateBalances:e=>{void 0!==e.usdt&&(d.value=y(e.usdt)),void 0!==e.wld&&(u.value=y(e.wld)),void 0!==e.equity&&(p.value=y(e.equity)),void 0!==e.pnl&&(v.value=e.pnl),console.log("[Wallet] Balances updated:",{usdt:d.value,wld:u.value,equity:p.value,pnl:v.value})},resetBalances:()=>{d.value="0.0000",u.value="0.0000",p.value="0.0000",v.value="0.00",m.value=!1},formatBalance:y}});let ae=!0,oe=null;const ne=()=>{if("undefined"==typeof window)return!1;const e=navigator.userAgent.toLowerCase();return!!(e.includes("tokenpocket")||e.includes("imtoken")||e.includes("trust")||e.includes("metamask")||e.includes("tronlink"))||!(!window.ethereum&&!window.tronWeb)},se=()=>{if("undefined"==typeof window)return console.log("[Wallet] detectWalletType: Window object not found"),"Unknown";const e=navigator.userAgent.toLowerCase();if(e.includes("imtoken"))return console.log("[Wallet] ✅ Detected: imToken (via UA)"),"imToken";if(e.includes("tokenpocket"))return console.log("[Wallet] ✅ Detected: TokenPocket (via UA)"),"TokenPocket";if(e.includes("tronlink"))return console.log("[Wallet] ✅ Detected: TronLink (via UA)"),"TronLink";if(window.tronWeb)return console.log("[Wallet] ✅ Detected: TRON Wallet Environment"),window.tronLink?(console.log("[Wallet] ✅ Detected: TronLink"),"TronLink"):(console.log("[Wallet] ✅ Detected: TRON Wallet"),"TRON Wallet");if(!window.ethereum)return console.log("[Wallet] detectWalletType: No ethereum or tronWeb object found"),"Unknown";const t=window.ethereum;return console.log("[Wallet] detectWalletType - Available wallet flags:",{isTokenPocket:t.isTokenPocket,isMetaMask:t.isMetaMask,isImToken:t.isImToken,isTrust:t.isTrust,isCoinbaseWallet:t.isCoinbaseWallet,isOkxWallet:t.isOkxWallet,isOKExWallet:t.isOKExWallet,isBitKeep:t.isBitKeep}),t.isTokenPocket?(console.log("[Wallet] ✅ Detected: TokenPocket"),"TokenPocket"):t.isMetaMask?(console.log("[Wallet] ✅ Detected: MetaMask"),"MetaMask"):t.isImToken?(console.log("[Wallet] ✅ Detected: imToken"),"imToken"):t.isTrust?(console.log("[Wallet] ✅ Detected: Trust Wallet"),"Trust Wallet"):t.isCoinbaseWallet?(console.log("[Wallet] ✅ Detected: Coinbase Wallet"),"Coinbase Wallet"):t.isOkxWallet||t.isOKExWallet?(console.log("[Wallet] ✅ Detected: OKX Wallet"),"OKX Wallet"):t.isBitKeep?(console.log("[Wallet] ✅ Detected: Bitget Wallet"),"Bitget Wallet"):(console.log("[Wallet] ⚠️ Detected: Unknown Wallet"),"Unknown Wallet")},le=async()=>{const e=te();if(!ne())return{success:!1,error:"Please open in wallet browser (TokenPocket, MetaMask, imToken, etc.)"};try{e.setConnecting(!0);const t=se();console.log("[Wallet] Detected wallet type:",t);const a=navigator.userAgent.toLowerCase();if(a.includes("imtoken")||a.includes("tokenpocket")||a.includes("tronlink")||window.tronWeb){console.log("[Wallet] Detected TRON wallet, waiting for tronWeb...");const a=async(e=5e3)=>{const t=Date.now();for(;Date.now()-t<e;){if(window.tronWeb)return console.log("[Wallet] tronWeb ready after",Date.now()-t,"ms"),!0;await new Promise(e=>setTimeout(e,100))}return!1};if(await a()){console.log("[Wallet] Using TRON connection logic");const{connectTronWallet:a}=await $(async()=>{const{connectTronWallet:e}=await Promise.resolve().then(()=>di);return{connectTronWallet:e}},void 0),o=await a();return o.success?{success:!0,address:o.address,walletType:o.walletType||t}:(e.setError(o.error||"TRON wallet connection failed"),o)}{const t="TRON wallet detected but tronWeb not available. Please refresh the page.";return e.setError(t),{success:!1,error:t}}}const o=window.ethereum;console.log("[Wallet] Using ETH/BSC connection logic");const n=await o.request({method:"eth_requestAccounts"});if(n&&n.length>0&&n[0]){const a=n[0];return e.setWallet(a,t),{success:!0,address:a,walletType:t}}if("undefined"!=typeof window&&(window.ethereum?.isImToken||navigator.userAgent.toLowerCase().includes("imtoken"))){const t="imToken TRON network detected. Please switch to BSC or ETH network in imToken settings, or use TokenPocket/TronLink for TRON deposits.";return e.setError(t),{success:!1,error:t}}return e.setError("No accounts found"),{success:!1,error:"No accounts found"}}catch(t){console.error("[Wallet] Connection error:",t);let a="Connection failed";return 4001===t.code?a="User rejected the connection request":-32002===t.code?a="Connection request pending, please check your wallet":t.message&&(a=t.message),e.setError(a),{success:!1,error:a}}finally{e.setConnecting(!1)}},ie=async()=>{if(!ne())return null;try{const e=window.ethereum,t=await e.request({method:"eth_accounts"});return t&&t.length>0?t[0]:null}catch(e){return console.error("[Wallet] Get accounts error:",e),null}},re=async()=>{const e=te();if(e.restoreFromStorage(),ne())try{if(window.tronWeb){console.log("[Wallet] Auto-connecting TRON wallet...");const{autoConnectTronWallet:e}=await $(async()=>{const{autoConnectTronWallet:e}=await Promise.resolve().then(()=>di);return{autoConnectTronWallet:e}},void 0);return await e()}const t=await ie(),a=se();if(t&&"null"!==t)return e.setWallet(t,a),console.log("[Wallet] Auto-connected:",t),!0}catch(t){console.error("[Wallet] Auto-connect error:",t)}return e.isConnected},ce=()=>{if(!ne())return;const e=te(),t=window.ethereum;t.on("accountsChanged",t=>{if(console.log("[Wallet] Accounts changed:",t,"isInitializing:",ae),t&&t.length>0&&t[0]){const a=se(),o=t[0],n=(e.walletAddress||"").toLowerCase();o&&o.toLowerCase()!==n&&(localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet")),e.setWallet(o,a)}else{if(ae)return void console.log("[Wallet] Ignoring empty accounts during initialization");if(localStorage.getItem("walletAddress"))return console.log("[Wallet] Empty accounts but have saved address, waiting..."),void setTimeout(async()=>{await ie()||(console.log("[Wallet] No reconnection, disconnecting"),localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet"),e.disconnect({clearBalances:!1,clearPersistedBalances:!1,clearWalletSession:!0}))},2e3);localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet"),e.disconnect({clearBalances:!0,clearPersistedBalances:!0,clearWalletSession:!0})}}),t.on("chainChanged",e=>{console.log("[Wallet] Chain changed:",e)}),t.on("disconnect",t=>{if(console.log("[Wallet] Disconnect event:",t,"isInitializing:",ae),ae)return void console.log("[Wallet] Ignoring disconnect during initialization");localStorage.getItem("walletAddress")?setTimeout(async()=>{await ie()||(localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet"),e.disconnect({clearBalances:!1,clearPersistedBalances:!1,clearWalletSession:!0}))},2e3):(localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet"),e.disconnect({clearBalances:!0,clearPersistedBalances:!0,clearWalletSession:!0}))})},de=async()=>{console.log("[Wallet] Initializing..."),ae=!0,oe&&clearTimeout(oe);const e=navigator.userAgent.toLowerCase();if(e.includes("imtoken")||e.includes("tokenpocket")||e.includes("tronlink")||window.tronWeb){console.log("[Wallet] Detected TRON wallet browser, waiting for tronWeb...");const e=async(e=5e3)=>{const t=Date.now();for(;Date.now()-t<e;){if(window.tronWeb)return console.log("[Wallet] tronWeb detected after",Date.now()-t,"ms"),!0;await new Promise(e=>setTimeout(e,100))}return console.warn("[Wallet] tronWeb not detected after",e,"ms"),!1};if(await e()){console.log("[Wallet] Initializing TRON wallet...");const{initTronWallet:e}=await $(async()=>{const{initTronWallet:e}=await Promise.resolve().then(()=>di);return{initTronWallet:e}},void 0),t=await e();return oe=setTimeout(()=>{ae=!1,console.log("[Wallet] Initialization protection disabled")},3e3),t}console.warn("[Wallet] TRON wallet browser detected but tronWeb not available")}ce();const t=await re();return console.log("[Wallet] Initialization complete, connected:",t),oe=setTimeout(()=>{ae=!1,console.log("[Wallet] Initialization protection disabled")},3e3),t},ue=async()=>{if(!ne())return{chainId:"",networkName:"Unknown"};try{const e=window.ethereum,t=await e.request({method:"eth_chainId"});return{chainId:t,networkName:{"0x1":"Ethereum Mainnet","0x38":"BSC Mainnet","0x89":"Polygon Mainnet","0xa86a":"Avalanche C-Chain","0xa4b1":"Arbitrum One","0xa":"Optimism","0x5":"Goerli Testnet","0xaa36a7":"Sepolia Testnet"}[t]||`Chain ID: ${parseInt(t,16)}`}}catch(e){return console.error("[Wallet] Get network error:",e),{chainId:"",networkName:"Unknown"}}},pe=async()=>{const e=te();if(!e.isConnected||!e.walletAddress)return!1;const t=localStorage.getItem("vitu_referral_code");if(!t)return!0;if(t.toLowerCase()===e.walletAddress.slice(-8).toLowerCase())return localStorage.removeItem("vitu_referral_code"),!0;try{console.log("[Wallet] Ensuring referral bound, code:",t);const a=await fetch("/api/invite/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:e.walletAddress,referrer_code:t})});return(await a.json()).success&&(console.log("[Wallet] Referral bound successfully!"),localStorage.removeItem("vitu_referral_code")),!0}catch(a){return console.error("[Wallet] Failed to bind referral:",a),!1}},ve=Object.freeze(Object.defineProperty({__proto__:null,autoConnectWallet:re,connectWallet:le,detectWalletType:se,ensureReferralBound:pe,getCurrentAccount:ie,getNetworkInfo:ue,initWallet:de,isDAppBrowser:ne,setupAccountChangeListener:ce},Symbol.toStringTag,{value:"Module"})),me={key:0,class:"eye-care-overlay"},ge={class:"nav-container"},fe={class:"nav-left"},ye=["title"],he={key:0,class:"wallet-text wallet-connected"},we={key:1,class:"wallet-text"},be={class:"language-text"},ke=["onClick"],Te={class:"lang-name"},Ce={key:0,class:"check-icon"},_e=Y({__name:"Navigation",setup(e){const{t:i,locale:w}=d(),b=te(),k=r(!1),T=r(0),C=r(!1),_=r(!1),W=r(!1),D=r([{code:"en",name:"English"},{code:"ar",name:"العربية"},{code:"id",name:"Indonesia"},{code:"vi",name:"Tiếng Việt"},{code:"fr",name:"Français"},{code:"tr",name:"Türkçe"},{code:"zu",name:"Iingizimu Afrika"},{code:"es",name:"España"},{code:"pt",name:"Portugal"},{code:"de",name:"Deutsch"},{code:"ms",name:"Melayu"},{code:"uk",name:"Україна"},{code:"zh-tw",name:"繁體中文"}]),S=c(()=>{const e=D.value.find(e=>e.code===w.value);return e?e.name:"English"}),A=()=>{const e=window.scrollY;k.value=e>50,T.value=e<=100?e/100:1},x=()=>{C.value=!C.value},P=()=>{_.value=!_.value,localStorage.setItem("eyeCareMode",_.value),console.log("Eye Care Mode:",_.value?"ON":"OFF")},M=async()=>{var e;if(b.isConnected)console.log("[Navigation] Wallet already connected:",b.walletAddress);else if(ne()){console.log("[Navigation] In DApp browser, attempting to connect...");const t=await le();t.success?(e=b.walletAddress,O("wallet_connect",{wallet:e}),await pe()):(console.error("[Navigation] Connection failed:",t.error),W.value=!0)}else console.log("[Navigation] Not in DApp browser, showing alert"),W.value=!0},R=e=>{const t=document.querySelector(".nav-right");t&&!t.contains(e.target)&&(C.value=!1)};return u(async()=>{window.addEventListener("scroll",A),document.addEventListener("click",R);"true"===localStorage.getItem("eyeCareMode")&&(_.value=!0);try{await de(),console.log("[Navigation] Wallet initialized, connected:",b.isConnected),b.isConnected&&await pe()}catch(e){console.error("[Navigation] Wallet initialization error:",e)}}),p(()=>{window.removeEventListener("scroll",A),document.removeEventListener("click",R)}),(e,r)=>(o(),t(f,null,[_.value?(o(),t("div",me)):a("",!0),n("nav",{class:m(["navigation",{scrolled:k.value}]),style:h({backgroundColor:`rgba(0, 0, 0, ${T.value})`})},[n("div",ge,[n("div",fe,[n("img",{src:V,alt:"Logo",class:m(["logo-icon",{"eye-care-active":_.value}]),draggable:"false",onClick:P,title:_.value?"Disable Eye Care Mode":"Enable Eye Care Mode"},null,10,ye)]),n("div",{class:"nav-center",onClick:M},[r[2]||(r[2]=n("img",{src:Q,alt:"Wallet",class:"wallet-icon",draggable:"false"},null,-1)),g(b).isConnected?(o(),t("span",he," ID: "+s(g(b).walletShortId),1)):(o(),t("span",we,s(g(i)("nav.connectWallet")),1))]),n("div",{class:"nav-right",onClick:x},[r[4]||(r[4]=n("img",{src:K,alt:"Globe",class:"globe-icon",draggable:"false"},null,-1)),n("span",be,s(S.value),1),n("span",{class:m(["arrow-icon",{"arrow-up":C.value}])},"∨",2),C.value?(o(),t("div",{key:0,class:"language-dropdown",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[r[3]||(r[3]=n("div",{class:"dropdown-triangle"},null,-1)),(o(!0),t(f,null,y(D.value,e=>(o(),t("div",{key:e.code,class:m(["language-option",{active:g(w)===e.code}]),onClick:t=>(e=>{w.value=e.code,C.value=!1,localStorage.setItem("language",e.code),console.log("Selected language:",e.code,e.name)})(e)},[n("span",Te,s(e.name),1),g(w)===e.code?(o(),t("i",Ce,"✓")):a("",!0)],10,ke))),128))])):a("",!0)])])],6),v(Z,{visible:W.value,"onUpdate:visible":r[1]||(r[1]=e=>W.value=e)},null,8,["visible"])],64))}},[["__scopeId","data-v-a2605761"]]),We=()=>{const e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")&&!e.includes("chromium")},De=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Se=()=>!(!We()&&!De())||(!!(navigator.deviceMemory&&navigator.deviceMemory<4)||(!!(navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4)||!!window.matchMedia?.("(prefers-reduced-motion: reduce)").matches)),Ae=()=>!We()&&!De()&&(!Se()&&!window.matchMedia?.("(prefers-reduced-motion: reduce)").matches),xe=e=>Se()?Math.floor(.3*e):e,Pe={key:0,class:"fallback-container"},Me={class:"particles-static"},Re=Y({__name:"MaintenanceBackground3D",setup(e){const a=r(null),s=r(Ae()),l=e=>{const t=137.508*e;return{left:t%100+"%",top:1.618*t%100+"%",animationDelay:.3*e+"s",opacity:.3+e%5*.1}};let i,c,d,p,v,m,g=0,b=0,k=0,T=window.innerWidth/2,C=window.innerHeight/2,_=null,W=!1;const D=Se(),S=D?25:50,A=D?25:50,x=xe(200),U=xe(200),z=D?30:100,$=[],O=()=>{s.value&&a.value?(console.log("[MaintenanceBackground3D] Initializing 3D background"),i=new P,i.fog=new M(328965,.002),c=new R(75,window.innerWidth/window.innerHeight,1,3e3),c.position.z=1e3,c.position.y=200,d=new B({alpha:!0,antialias:!D,powerPreference:"low-power"}),d.setPixelRatio((()=>{const e=window.devicePixelRatio||1;return We()||De()?Math.min(e,1.5):Math.min(e,2)})()),d.setSize(window.innerWidth,window.innerHeight),a.value.appendChild(d.domElement),q(),H(),j(),document.addEventListener("mousemove",G),window.addEventListener("resize",V)):console.log("[MaintenanceBackground3D] Using fallback mode (CSS background)")},q=()=>{const e=new I,t=new Float32Array(S*A*3);let a=0;for(let n=0;n<S;n++)for(let e=0;e<A;e++)t[a]=80*n-2e3,t[a+1]=0,t[a+2]=80*e-2e3,a+=3;e.setAttribute("position",new E(t,3));const o=new N({color:4235007,size:4,transparent:!0,opacity:.8,blending:L,sizeAttenuation:!0});p=new F(e,o),i.add(p)},H=()=>{const e=new I,t=new Float32Array(3*x),a=new Float32Array(x);for(let n=0;n<x;n++)t[3*n]=4e3*(Math.random()-.5),t[3*n+1]=2e3*Math.random()+500,t[3*n+2]=4e3*(Math.random()-.5),a[n]=10*Math.random()+20;e.setAttribute("position",new E(t,3)),e.setAttribute("velocity",new E(a,1));const o=new N({color:10930431,size:3,transparent:!0,opacity:.6,blending:L});v=new F(e,o),i.add(v)},j=()=>{const e=new I,t=U*z,a=new Float32Array(3*t),o=new Float32Array(3*t);for(let s=0;s<t;s++)a[3*s+1]=-1e4,o[3*s]=1,o[3*s+1]=1,o[3*s+2]=1;e.setAttribute("position",new E(a,3)),e.setAttribute("color",new E(o,3));const n=new N({size:4,vertexColors:!0,transparent:!0,opacity:1,blending:L});m=new F(e,n),i.add(m);for(let s=0;s<z;s++)$.push({active:!1,startIndex:s*U,age:0,positions:[],velocities:[]})},X=(e,t,a)=>{const o=$.find(e=>!e.active);if(!o)return;o.active=!0,o.age=0;const n=m.geometry.attributes.position.array,s=m.geometry.attributes.color.array;for(let l=0;l<U;l++){const i=o.startIndex+l;n[3*i]=e,n[3*i+1]=t,n[3*i+2]=a;const r=Math.random()*Math.PI*2,c=8*Math.random()+4,d=12*Math.random()+8;o.velocities[l]={x:Math.cos(r)*c,y:d,z:Math.sin(r)*c},s[3*i]=.4+.4*Math.random(),s[3*i+1]=.8+.2*Math.random(),s[3*i+2]=1}m.geometry.attributes.position.needsUpdate=!0,m.geometry.attributes.color.needsUpdate=!0},G=e=>{b=e.clientX-T,k=e.clientY-C},V=()=>{c&&d&&(T=window.innerWidth/2,C=window.innerHeight/2,c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight))};let Q=0;const K=1e3/(D?30:60),Y=e=>{if(!W)return;_=requestAnimationFrame(Y);const t=e-Q;t<K||(Q=e-t%K,Z())},J=(e,t,a)=>{const o=(e+2e3)/80,n=(t+2e3)/80;return 50*Math.sin(.3*(o+a))+50*Math.sin(.5*(n+a))+20*Math.sin(.2*(o+n+a))},Z=()=>{if(!(i&&c&&d&&p&&v&&m))return;c.position.x+=.02*(b-c.position.x),c.position.y+=.02*(200-k-c.position.y),c.lookAt(i.position);const e=p.geometry.attributes.position.array;let t=0;for(let s=0;s<S;s++)for(let a=0;a<A;a++)e[t+1]=50*Math.sin(.3*(s+g))+50*Math.sin(.5*(a+g))+20*Math.sin(.2*(s+a+g)),t+=3;p.geometry.attributes.position.needsUpdate=!0,g+=.05;const a=v.geometry.attributes.position.array,o=v.geometry.attributes.velocity.array;for(let s=0;s<x;s++){a[3*s+1]-=o[s];const e=a[3*s],t=a[3*s+2],n=J(e,t,g);a[3*s+1]<n&&(X(e,n,t),a[3*s]=4e3*(Math.random()-.5),a[3*s+1]=1e3*Math.random()+1e3,a[3*s+2]=4e3*(Math.random()-.5))}v.geometry.attributes.position.needsUpdate=!0;const n=m.geometry.attributes.position.array;$.forEach(e=>{if(e.active)if(e.age++,e.age>40){e.active=!1;for(let t=0;t<U;t++)n[3*(e.startIndex+t)+1]=-1e4}else for(let t=0;t<U;t++){const a=e.startIndex+t,o=e.velocities[t];n[3*a]+=o.x,n[3*a+1]+=o.y,n[3*a+2]+=o.z,o.y-=.5}}),m.geometry.attributes.position.needsUpdate=!0,d.render(i,c)};return u(()=>{s.value&&(O(),W=!0,Y(performance.now()))}),w(()=>{W=!1,_&&(cancelAnimationFrame(_),_=null),document.removeEventListener("mousemove",G),window.removeEventListener("resize",V),d&&(d.dispose(),d.forceContextLoss(),d=null),i&&(i.traverse(e=>{e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}),i=null),c=null,p=null,v=null,m=null}),(e,i)=>s.value?(o(),t("div",{key:1,ref_key:"container",ref:a,class:"three-container"},null,512)):(o(),t("div",Pe,[i[0]||(i[0]=n("div",{class:"gradient-bg"},null,-1)),n("div",Me,[(o(),t(f,null,y(20,e=>n("div",{key:e,class:"particle",style:h(l(e))},null,4)),64))])]))}},[["__scopeId","data-v-ee6f7fe1"]]),Be={key:0,class:"maintenance-overlay"},Ie={class:"maintenance-content"},Ee={class:"maintenance-title"},Ne={class:"maintenance-message"},Le={class:"timer-container"},Fe={class:"timer-text"},Ue=Y({__name:"MaintenanceOverlay",props:{isVisible:{type:Boolean,default:!1},maintenanceData:{type:Object,default:()=>({title:"",message:"",estimated_duration:120,translations:{}})}},setup(l){const i=l,{locale:p}=d(),m=["en","zh-tw","ar","de","es","fr","id","ms","pt","tr","uk","vi","zu"],g={US:"en",GB:"en",AU:"en",CA:"en",NZ:"en",IE:"en",SG:"en",PH:"en",IN:"en",TW:"zh-tw",HK:"zh-tw",MO:"zh-tw",CN:"zh-tw",SA:"ar",AE:"ar",EG:"ar",MA:"ar",DZ:"ar",TN:"ar",LY:"ar",JO:"ar",LB:"ar",KW:"ar",QA:"ar",BH:"ar",OM:"ar",YE:"ar",IQ:"ar",SY:"ar",PS:"ar",SD:"ar",DE:"de",AT:"de",CH:"de",LI:"de",LU:"de",ES:"es",MX:"es",AR:"es",CO:"es",CL:"es",PE:"es",VE:"es",EC:"es",GT:"es",CU:"es",BO:"es",DO:"es",HN:"es",PY:"es",SV:"es",NI:"es",CR:"es",PA:"es",UY:"es",PR:"es",FR:"fr",BE:"fr",MC:"fr",SN:"fr",CI:"fr",ML:"fr",NE:"fr",BF:"fr",TG:"fr",BJ:"fr",GN:"fr",CG:"fr",GA:"fr",TD:"fr",CF:"fr",CM:"fr",MG:"fr",CD:"fr",RW:"fr",BI:"fr",HT:"fr",ID:"id",MY:"ms",BN:"ms",PT:"pt",BR:"pt",AO:"pt",MZ:"pt",GW:"pt",TL:"pt",CV:"pt",ST:"pt",TR:"tr",CY:"tr",UA:"uk",VN:"vi",ZA:"zu",JP:"en",KR:"en",RU:"uk",TH:"en",PK:"ar",BD:"en",NL:"de",PL:"uk",IT:"es",RO:"es",CZ:"de",SE:"de",NO:"de",DK:"de",FI:"de",GR:"en",IL:"ar",IR:"ar",AF:"ar",NG:"en",KE:"en",GH:"en",ET:"en",TZ:"en",UG:"en",ZW:"en",ZM:"en",MM:"en",KH:"en",LA:"en",NP:"en",LK:"en"},f={en:"en","en-us":"en","en-gb":"en","en-au":"en","en-ca":"en",zh:"zh-tw","zh-cn":"zh-tw","zh-tw":"zh-tw","zh-hk":"zh-tw",ar:"ar","ar-sa":"ar","ar-ae":"ar","ar-eg":"ar",de:"de","de-de":"de","de-at":"de","de-ch":"de",es:"es","es-es":"es","es-mx":"es","es-ar":"es",fr:"fr","fr-fr":"fr","fr-ca":"fr","fr-be":"fr",id:"id","id-id":"id",ms:"ms","ms-my":"ms",pt:"pt","pt-br":"pt","pt-pt":"pt",tr:"tr","tr-tr":"tr",uk:"uk","uk-ua":"uk",vi:"vi","vi-vn":"vi",zu:"zu","zu-za":"zu",ja:"en",ko:"en",ru:"uk",th:"en",hi:"en",nl:"de",pl:"uk",it:"es",ro:"es"},y=r("en"),h=r(""),w=r(!0),b=async()=>{w.value=!0;const e=[{url:"https://ipapi.co/json/",getCountry:e=>e.country_code},{url:"https://ip-api.com/json/?fields=countryCode",getCountry:e=>e.countryCode},{url:"https://ipwho.is/",getCountry:e=>e.country_code},{url:"https://api.country.is/",getCountry:e=>e.country}];for(const a of e)try{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3),o=await fetch(a.url,{signal:e.signal,headers:{Accept:"application/json"}});if(clearTimeout(t),o.ok){const e=await o.json(),t=a.getCountry(e);if(t&&"string"==typeof t){const e=t.toUpperCase();if(h.value=e,g[e])return y.value=g[e],console.log(`[Maintenance] Detected country: ${e} -> Language: ${y.value}`),void(w.value=!1)}}}catch(t){console.warn(`[Maintenance] IP API failed: ${a.url}`,t.message)}console.log("[Maintenance] IP detection failed, falling back to browser language"),k(),w.value=!1},k=()=>{const e=navigator.languages||[navigator.language||navigator.userLanguage||"en"];for(const t of e){const e=t.toLowerCase();if(f[e])return y.value=f[e],void console.log(`[Maintenance] Detected browser language: ${t} -> ${y.value}`);const a=e.split("-")[0];if(f[a])return y.value=f[a],void console.log(`[Maintenance] Detected browser base language: ${a} -> ${y.value}`)}y.value="en",console.log("[Maintenance] Using default language: en")},T=c(()=>p.value&&m.includes(p.value)?p.value:y.value),C=c(()=>{const e=i.maintenanceData?.translations||{},t=T.value;return e[t]?.title?e[t].title:i.maintenanceData?.title||D(t)}),_=c(()=>{const e=i.maintenanceData?.translations||{},t=T.value;return e[t]?.message?e[t].message:i.maintenanceData?.message||S(t)}),W=c(()=>{const e=i.maintenanceData?.estimated_duration||120,t=Math.floor(e/60),a=e%60;return t>0&&a>0?`~${t}h ${a}min`:t>0?`~${t}h`:`~${a}min`}),D=e=>{const t={en:"System Maintenance","zh-tw":"系統維護中",ar:"صيانة النظام",de:"Systemwartung",es:"Mantenimiento del Sistema",fr:"Maintenance du Système",id:"Pemeliharaan Sistem",ms:"Penyelenggaraan Sistem",pt:"Manutenção do Sistema",tr:"Sistem Bakımı",uk:"Технічне обслуговування",vi:"Bảo trì Hệ thống",zu:"Ukulungiswa Kwesistimu"};return t[e]||t.en},S=e=>{const t={en:"The system is currently under maintenance. Please try again in 2 hours. Thank you for your patience.","zh-tw":"系統正在維護中，請2個小時後再次訪問。感謝您的耐心等待。",ar:"النظام قيد الصيانة حاليًا. يرجى المحاولة مرة أخرى بعد ساعتين. شكرًا لصبركم.",de:"Das System befindet sich derzeit in Wartung. Bitte versuchen Sie es in 2 Stunden erneut. Vielen Dank für Ihre Geduld.",es:"El sistema está actualmente en mantenimiento. Por favor, inténtelo de nuevo en 2 horas. Gracias por su paciencia.",fr:"Le système est actuellement en maintenance. Veuillez réessayer dans 2 heures. Merci de votre patience.",id:"Sistem sedang dalam pemeliharaan. Silakan coba lagi dalam 2 jam. Terima kasih atas kesabaran Anda.",ms:"Sistem sedang dalam penyelenggaraan. Sila cuba lagi dalam 2 jam. Terima kasih atas kesabaran anda.",pt:"O sistema está atualmente em manutenção. Por favor, tente novamente em 2 horas. Obrigado pela sua paciência.",tr:"Sistem şu anda bakımdadır. Lütfen 2 saat sonra tekrar deneyin. Sabrınız için teşekkür ederiz.",uk:"Система наразі на технічному обслуговуванні. Будь ласка, спробуйте через 2 години. Дякуємо за терпіння.",vi:"Hệ thống đang được bảo trì. Vui lòng thử lại sau 2 giờ. Cảm ơn sự kiên nhẫn của bạn.",zu:"Isistimu ikhona kulungiswa. Sicela uzame futhi emva kwamahora angu-2. Siyabonga ngokubekezela kwakho."};return t[e]||t.en};return e(()=>i.isVisible,e=>{e&&w.value&&b()},{immediate:!0}),u(()=>{i.isVisible&&b()}),(e,i)=>l.isVisible?(o(),t("div",Be,[v(Re),n("div",Ie,[i[1]||(i[1]=n("div",{class:"icon-container"},[n("div",{class:"icon-glow"}),n("svg",{class:"icon-main",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),n("h1",Ee,s(C.value),1),n("p",Ne,s(_.value),1),n("div",Le,[i[0]||(i[0]=n("div",{class:"timer-icon"},[n("svg",{viewBox:"0 0 24 24",fill:"none"},[n("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"}),n("path",{d:"M12 6V12L16 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1)),n("span",Fe,s(W.value),1)]),i[2]||(i[2]=n("div",{class:"logo-container"},[n("span",{class:"logo-text"},"VituFinance")],-1))])])):a("",!0)}},[["__scopeId","data-v-1b79eca9"]]),ze="/static/icon/wld.png",$e={class:"ripple-wrapper"},Oe=Y({__name:"RippleCircle",setup:e=>(e,a)=>(o(),t("div",$e,[...a[0]||(a[0]=[b('<div class="ripple-wave ripple-wave-1" data-v-a70816b5></div><div class="ripple-wave ripple-wave-2" data-v-a70816b5></div><div class="ripple-wave ripple-wave-3" data-v-a70816b5></div><div class="ripple-wave ripple-wave-4" data-v-a70816b5></div><div class="ripple-wave ripple-wave-5" data-v-a70816b5></div><div class="ripple-core" data-v-a70816b5><img src="/static/two/zh.png" alt="WLD" class="ripple-core-img" data-v-a70816b5></div>',6)])]))},[["__scopeId","data-v-a70816b5"]]),qe=["width","height","viewBox"],He=["id"],je=["stop-color"],Xe=["stop-color"],Ge=["d","fill"],Ve=["d","stroke"],Qe=Y({__name:"CryptoChart",props:{width:{type:Number,default:130},height:{type:Number,default:50},color:{type:String,default:"#22c55e"},isPositive:{type:Boolean,default:!0},data:{type:Array,default:()=>[]}},setup(a){const s=a,l=Math.random().toString(36).substr(2,9),i=r([]);u(()=>{s.data&&s.data.length>0?i.value=s.data:i.value=(()=>{const e=[];let t=50;for(let a=0;a<20;a++)t=t+(s.isPositive?-2:2)+15*(Math.random()-.5),t=Math.max(5,Math.min(95,t)),e.push(t);return s.isPositive?e[e.length-1]=Math.min(e[0],e[e.length-1]):e[e.length-1]=Math.max(e[0],e[e.length-1]),e})()}),e(()=>s.data,e=>{e&&e.length>0&&(i.value=e)},{deep:!0});const d=c(()=>{if(0===i.value.length)return"";const e=Math.min(...i.value),t=Math.max(...i.value)-e||1,a=s.height-10,o=s.width/(i.value.length-1),n=o=>a*(1-(o-e)/t)+5;let l=`M 0 ${n(i.value[0])}`;for(let s=1;s<i.value.length;s++){const e=s*o,t=n(i.value[s]);l+=` C ${(s-1)*o+o/2} ${n(i.value[s-1])}, ${e-o/2} ${t}, ${e} ${t}`}return l}),p=c(()=>d.value?`${d.value} L ${s.width} ${s.height} L 0 ${s.height} Z`:"");return(e,s)=>(o(),t("div",{class:"crypto-chart",style:h({width:a.width+"px",height:a.height+"px"})},[(o(),t("svg",{width:a.width,height:a.height,viewBox:`0 0 ${a.width} ${a.height}`,preserveAspectRatio:"none"},[n("defs",null,[n("linearGradient",{id:"gradient-"+g(l),x1:"0",y1:"0",x2:"0",y2:"1"},[n("stop",{offset:"0%","stop-color":a.color,"stop-opacity":"0.5"},null,8,je),n("stop",{offset:"100%","stop-color":a.color,"stop-opacity":"0"},null,8,Xe)],8,He)]),n("path",{d:p.value,fill:`url(#gradient-${g(l)})`,stroke:"none"},null,8,Ge),n("path",{d:d.value,fill:"none",stroke:a.color,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Ve)],8,qe))],4))}},[["__scopeId","data-v-d178bf01"]]),Ke={class:"loading-dots"};const Ye=Y({},[["render",function(e,a){return o(),t("div",Ke,[...a[0]||(a[0]=[n("div",{class:"dot dot-1"},null,-1),n("div",{class:"dot dot-2"},null,-1),n("div",{class:"dot dot-3"},null,-1),n("div",{class:"dot dot-4"},null,-1)])])}],["__scopeId","data-v-2f3ce62c"]]),Je={class:"crypto-card"},Ze={class:"crypto-card-icon"},et=["src","alt"],tt={class:"crypto-card-info"},at={class:"crypto-card-name"},ot={class:"crypto-card-symbol"},nt={class:"crypto-card-chart"},st={class:"crypto-card-price"},lt={class:"price-value"},it=Y({__name:"CryptoCard",props:{name:{type:String,required:!0},symbol:{type:String,required:!0},icon:{type:String,required:!0},price:{type:String,default:"$0"},change:{type:String,default:"-NaN%"},chartData:{type:Array,default:()=>[]}},setup(e){const a=e,l=c(()=>!a.chartData||0===a.chartData.length),i=c(()=>a.change.startsWith("+")?"positive":a.change.startsWith("-")?"negative":""),r=c(()=>a.change.startsWith("+")),d=c(()=>r.value?"#10b981":"#ef4444");return(a,c)=>(o(),t("div",Je,[n("div",Ze,[n("img",{src:e.icon,alt:e.symbol},null,8,et)]),n("div",tt,[n("div",at,s(e.name),1),n("div",ot,s(e.symbol),1)]),n("div",nt,[l.value?(o(),k(Ye,{key:0})):(o(),k(Qe,{key:1,width:100,height:40,color:d.value,"is-positive":r.value,data:e.chartData},null,8,["color","is-positive","data"]))]),n("div",st,[n("div",lt,s(e.price),1),n("div",{class:m(["price-change",i.value])},s(e.change),3)])]))}},[["__scopeId","data-v-b76b6207"]]),rt=e=>e+"USDT";function ct(e=[]){const t=r(e),a=r(!1),o=r(null);let n=null;const s=async()=>{if(0!==t.value.length){a.value=!0,o.value=null;try{const e="",a=t.value.map(e=>`"${rt(e.symbol)}"`).join(","),o=`${e}/api/market/ticker?symbols=[${a}]`,n=await fetch(o);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);(await n.json()).forEach(e=>{const a=e.symbol.replace("USDT",""),o=t.value.find(e=>e.symbol===a);if(o){o.price=((e,t)=>{const a=parseFloat(e);return isNaN(a)?"$0.00":["PEPE","SHIB"].includes(t)?"$"+a.toFixed(8):["DOGE","WLD","ARB","XRP","ADA"].includes(t)?"$"+a.toFixed(4):"$"+a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})(e.lastPrice,a);const t=typeof o.change;o.change="string"===t?(e=>{const t=parseFloat(e);return isNaN(t)?"0.00%":(t>=0?"+":"")+t.toFixed(2)+"%"})(e.priceChangePercent):parseFloat(e.priceChangePercent)}});const s=t.value.map(async t=>{try{const a=rt(t.symbol),o=`${e}/api/market/klines?symbol=${a}&interval=1m&limit=50`,n=await fetch(o);if(!n.ok)return void console.warn(`K线数据获取失败: ${t.symbol}`);const s=await n.json();if(Array.isArray(s)&&s.length>0){const e=s.map(e=>parseFloat(e[4]));t.chartData=e}}catch(a){console.warn(`获取 ${t.symbol} K线数据失败:`,a.message)}});await Promise.all(s),console.log("✅ 市场数据更新成功")}catch(e){console.error("❌ 获取市场数据失败:",e),o.value=e.message}finally{a.value=!1}}},l=(e=3e5)=>{s(),n=setInterval(s,e)},i=()=>{n&&(clearInterval(n),n=null)};return u(()=>{l()}),p(()=>{i()}),{cryptoList:t,loading:a,error:o,fetchMarketData:s,startAutoUpdate:l,stopAutoUpdate:i}}const dt=[{name:"Bitcoin",symbol:"BTC",icon:"btc.png"},{name:"Ethereum",symbol:"ETH",icon:"eth.png"},{name:"BNB",symbol:"BNB",icon:"bnb.png"},{name:"Solana",symbol:"SOL",icon:"sol.png"},{name:"XRP",symbol:"XRP",icon:"xrp.png"},{name:"Cardano",symbol:"ADA",icon:"ada.png"},{name:"Dogecoin",symbol:"DOGE",icon:"doge.png"},{name:"Worldcoin",symbol:"WLD",icon:"wld.png"},{name:"Pepe",symbol:"PEPE",icon:"pepe.png"},{name:"Arbitrum",symbol:"ARB",icon:"arb.png"},{name:"Litecoin",symbol:"LTC",icon:"image.png"}],ut={CRYPTO:"/static/icon/",SERVICE:"/static/four/",BRAND:"/static/one/",INDEX:"/static/index/",TWO:"/static/two/"},pt={class:"market-section"},vt={class:"market-title"},mt={key:0,class:"loading-container"},gt={key:1,class:"error-container"},ft={class:"error-message"},yt={key:2,class:"crypto-list"},ht={__name:"CryptoList",setup(e){const{t:a}=d(),l=dt.map(e=>({...e,icon:`${ut.CRYPTO}${e.icon}`,price:"$0.00",change:"0.00%",chartData:[]})),{cryptoList:i,loading:r,error:c,fetchMarketData:u}=ct(l);return(e,l)=>(o(),t("section",pt,[n("h2",vt,s(g(a)("homePage.marketTitle")),1),g(r)?(o(),t("div",mt,[l[1]||(l[1]=n("div",{class:"loading-spinner"},null,-1)),n("p",null,s(g(a)("common.loading")||"加载市场数据中..."),1)])):g(c)?(o(),t("div",gt,[n("p",ft,s(g(c)),1),n("button",{onClick:l[0]||(l[0]=(...e)=>g(u)&&g(u)(...e)),class:"retry-btn"},s(g(a)("common.retry")||"重试"),1)])):(o(),t("div",yt,[(o(!0),t(f,null,y(g(i),e=>(o(),k(it,{key:e.symbol,name:e.name,symbol:e.symbol,icon:e.icon,price:e.price,change:e.change,"chart-data":e.chartData},null,8,["name","symbol","icon","price","change","chart-data"]))),128))]))]))}},wt=Y(ht,[["__scopeId","data-v-180c6b7d"]]),bt={class:"nav-icon"},kt=["src","alt"],Tt={class:"nav-label"},Ct={key:0,class:"active-dot"},_t={key:1,class:"label-text"},Wt={__name:"BottomNav",props:{inPopup:{type:Boolean,default:!1}},setup(e){const{t:a}=d();T();const l=e,i=C(),w=r(0),b=()=>{if("undefined"==typeof window)return;const e=window.visualViewport;if(!e)return void(w.value=0);const t=window.innerHeight-(e.height+e.offsetTop);w.value=Number.isFinite(t)&&t>0?Math.round(t):0};u(()=>{b();const e=window.visualViewport;e&&(e.addEventListener("resize",b),e.addEventListener("scroll",b))}),p(()=>{const e=window.visualViewport;e&&(e.removeEventListener("resize",b),e.removeEventListener("scroll",b))});const S=c(()=>l.inPopup?{}:{"--vv-bottom-offset":`${w.value}px`}),A=[{path:"/",icon:"/static/index/1.png",activeIcon:"/static/SHOUYE/1.png",label:"bottomNav.home"},{path:"/robot",icon:"/static/index/2.png",activeIcon:"/static/SHOUYE/2.png",label:"bottomNav.robot"},{path:"/invite",icon:"/static/index/3.png",activeIcon:"/static/SHOUYE/3.png",label:"bottomNav.invite"},{path:"/follow",icon:"/static/index/4.png",activeIcon:"/static/SHOUYE/4.png",label:"bottomNav.follow"},{path:"/wallet",icon:"/static/index/5.png",activeIcon:"/static/SHOUYE/5.png",label:"bottomNav.assets"}],x=e=>i.path===e;return(l,r)=>{const c=_("router-link");return o(),k(W,{to:"body",disabled:e.inPopup},[n("nav",{class:m(["bottom-nav",{"in-popup":e.inPopup}]),style:h(S.value)},[(o(),t(f,null,y(A,e=>v(c,{key:e.path,to:e.path,class:m(["nav-item",{active:x(e.path)}]),onClick:t=>{return a=e.path,o=t,void("/"===a&&"/"===i.path&&(o.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})));var a,o}},{default:D(()=>[n("div",bt,[n("img",{src:x(e.path)?e.activeIcon:e.icon,alt:e.label},null,8,kt)]),n("div",Tt,[x(e.path)?(o(),t("span",Ct,"·")):(o(),t("span",_t,s(g(a)(e.label)),1))])]),_:2},1032,["to","class","onClick"])),64))],6)],8,["disabled"])}}},Dt=Y(Wt,[["__scopeId","data-v-f975f03b"]]),St={class:"announcement-text-container"},At={class:"announcement-text"},xt=Y({__name:"AnnouncementBanner",setup(e){const a=T(),{t:l}=d(),i=()=>{a.push("/announcement")};return(e,a)=>(o(),t("div",{class:"announcement-banner",onClick:i},[a[0]||(a[0]=n("svg",{class:"icon-speaker",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M8 1L3 5H1V11H3L8 15V1Z",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"}),n("path",{d:"M11 5.5C11.5 6 12 7 12 8C12 9 11.5 10 11 10.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}),n("path",{d:"M13 3.5C14 4.5 15 6 15 8C15 10 14 11.5 13 12.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)),n("div",St,[n("span",At,s(g(l)("homePage.announcement")),1)]),a[1]||(a[1]=n("span",{class:"icon-arrow"},"›",-1))]))}},[["__scopeId","data-v-b5aba958"]]),Pt={class:"task-icon"},Mt=["src","alt"],Rt={class:"task-info"},Bt={class:"task-title"},It={key:0,class:"task-reward"},Et={class:"reward-text"},Nt={key:0,class:"task-check"},Lt={key:1,class:"task-arrow"},Ft=Y({__name:"TaskItem",props:{title:{type:String,required:!0},icon:{type:String,required:!0},link:{type:String,default:""},reward:{type:String,default:""},completed:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:l}){const i=e,r=l,c=()=>{r("click"),i.link&&window.open(i.link,"_blank")};return(l,i)=>(o(),t("div",{class:m(["task-item",{"task-completed":e.completed}]),onClick:c},[n("div",Pt,[n("img",{src:e.icon,alt:e.title},null,8,Mt)]),n("div",Rt,[n("div",Bt,s(e.title),1),e.reward?(o(),t("div",It,[i[0]||(i[0]=n("span",{class:"reward-icon"},"≡",-1)),n("span",Et,s(e.reward),1)])):a("",!0)]),e.completed?(o(),t("div",Nt,"✓")):(o(),t("div",Lt,"›"))],2))}},[["__scopeId","data-v-d462ca5f"]]),Ut="/static/two/image.png",zt={class:"floating-coins-container"},$t={class:"popup-content-wrapper"},Ot={class:"popup-body"},qt={class:"title"},Ht={class:"description"},jt={class:"days-row"},Xt={class:"day-label"},Gt={class:"days-row"},Vt={class:"day-label"},Qt={class:"days-row"},Kt={class:"day-label"},Yt={key:1,class:"connect-wallet-hint"},Jt=["disabled"],Zt={key:0},ea={key:1},ta={key:2},aa={key:3},oa=Y({__name:"DailyRewardPopup",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","claim"],setup(i,{emit:p}){const{t:w}=d(),b=i,k=p,T="https://bocail.com",C=r(0),_=r(1),W=r(!1),D=r(!1),S=r(""),A=c(()=>!!S.value),x=r([]),P=r(null),M=r({}),R=(e,t)=>{e&&(M.value[t]=e)};let B=null,I=!1;const E=()=>{try{if(!window.AudioContext&&!window.webkitAudioContext)return void console.warn("[Audio] Web Audio API not supported");const e=(()=>{if(!B)try{B=new(window.AudioContext||window.webkitAudioContext),console.log("[Audio] Created AudioContext, state:",B.state)}catch(e){return console.warn("[Audio] Failed to create AudioContext:",e),null}return"suspended"===B.state&&B.resume().then(()=>{console.log("[Audio] AudioContext resumed")}).catch(e=>{console.warn("[Audio] Failed to resume AudioContext:",e)}),B})();if(!e)return void console.warn("[Audio] AudioContext not available");"suspended"===e.state&&(console.log("[Audio] AudioContext is suspended, attempting to resume..."),e.resume().catch(e=>{console.warn("[Audio] Cannot resume AudioContext:",e.message)})),console.log("[Audio] Playing coin sound, context state:",e.state);const t=(t,a=1,o=.25)=>{setTimeout(()=>{try{const t=e.createOscillator(),n=e.createOscillator(),s=e.createOscillator(),l=e.createGain(),i=e.createBiquadFilter();i.type="bandpass",i.frequency.value=4e3*a,i.Q.value=3,t.connect(i),n.connect(i),s.connect(l),i.connect(l),l.connect(e.destination),t.frequency.value=4200*a+200*Math.random(),t.type="sine",n.frequency.value=6800*a+300*Math.random(),n.type="sine",s.frequency.value=2400*a,s.type="triangle";const r=e.currentTime;l.gain.setValueAtTime(0,r),l.gain.linearRampToValueAtTime(o,r+.003),l.gain.exponentialRampToValueAtTime(.3*o,r+.05),l.gain.exponentialRampToValueAtTime(.001,r+.15),t.start(r),n.start(r),s.start(r),t.stop(r+.18),n.stop(r+.18),s.stop(r+.18)}catch(t){console.log("Ding error:",t)}},t)},a=(t,a=1)=>{setTimeout(()=>{try{const t=e.createOscillator(),o=e.createGain();t.connect(o),o.connect(e.destination),t.frequency.value=3200*a,t.type="sine";const n=e.currentTime;o.gain.setValueAtTime(.08,n),o.gain.exponentialRampToValueAtTime(.001,n+.25),t.start(n),t.stop(n+.3)}catch(t){console.log("Ring error:",t)}},t)};t(0,1,.3),t(60,1.15,.28),t(110,.95,.25),t(170,1.1,.22),t(220,1.2,.18),t(280,.9,.15),t(330,1.05,.12),t(400,1.15,.1),a(30,1),a(150,1.1),a(250,.95)}catch(e){console.log("Audio not supported:",e)}},N=()=>{k("update:visible",!1)},L=()=>{let e=localStorage.getItem("walletAddress")||localStorage.getItem("wallet_address");if(!e)try{const{useWalletStore:t}=require("@/stores/wallet"),a=t();a.isConnected&&a.walletAddress&&(e=a.walletAddress,console.log("[DailyReward] Got wallet from store:",e))}catch(t){console.warn("[DailyReward] Failed to get wallet from store:",t)}return e?(S.value=e.toLowerCase(),console.log("[DailyReward] Wallet address:",e.toLowerCase()),e.toLowerCase()):(console.warn("[DailyReward] No wallet address found"),null)},F=async()=>{const e=L();if(e)try{const t=await U.get(`${T}/api/checkin/status`,{params:{wallet:e}});if(t.data.success){const e=t.data.data;W.value=e.claimedToday,C.value=e.totalCheckins||0,_.value=e.currentDay,console.log("[签到状态]",{claimedToday:e.claimedToday,currentDay:e.currentDay,totalCheckins:e.totalCheckins})}}catch(t){console.error("获取签到状态失败:",t),z()}else z()},z=()=>{C.value=0,_.value=1,W.value=!1},$=()=>new Date((new Date).getTime()+288e5).toISOString().slice(0,10),O=async()=>{if(A.value){if(!W.value&&!D.value){D.value=!0;try{const a=L();if(!a)return console.error("[DailyReward] No wallet address found"),void alert("Wallet address not found. Please reconnect your wallet.");console.log("[DailyReward] Claiming reward for wallet:",a);const o=await U.post(`${T}/api/checkin/claim`,{wallet:a});if(console.log("[DailyReward] API response:",o.data),o.data.success){const a=o.data.data;(e=>{const t=M.value[e];if(!t)return;const a=t.getBoundingClientRect(),o=a.left+a.width/2,n=a.top+a.height/2,s=window.innerWidth/2,l=[];for(let i=0;i<8;i++){const e={id:Date.now()+i,style:{left:`${o}px`,top:`${n}px`,"--target-x":s-o+60*(Math.random()-.5)+"px","--target-y":50-n+"px","--random-x":100*(Math.random()-.5)+"px","--delay":.08*i+"s","--duration":.8+.4*Math.random()+"s",animationDelay:.08*i+"s",animationDuration:.8+.4*Math.random()+"s"}};l.push(e)}x.value=l,E(),setTimeout(()=>{x.value=[]},2e3)})(_.value),W.value=!0,_.value=a.dayNumber,C.value=a.dayNumber,k("claim",{reward:a.reward,streak:a.dayNumber,date:$(),newWldBalance:a.newWldBalance}),e=$(),t=a.dayNumber,localStorage.setItem("dailyRewardState",JSON.stringify({totalCheckins:C.value,lastClaimDate:e,lastDayNumber:t})),console.log("[DailyReward] Claim successful!")}else console.error("[DailyReward] API returned success=false:",o.data),alert(o.data.message||w("dailyReward.claimFailed"))}catch(a){if(console.error("[DailyReward] Claim error:",a),a.response)if(console.error("[DailyReward] Error response:",{status:a.response.status,data:a.response.data,headers:a.response.headers}),"Already claimed today"===a.response.data?.message)W.value=!0,alert(w("dailyReward.alreadyClaimedToday"));else{const e=a.response.data?.message||a.response.data?.error||w("dailyReward.claimFailed");alert(e)}else a.request?(console.error("[DailyReward] No response received:",a.request),alert("Network error. Please check your connection and try again.")):(console.error("[DailyReward] Error:",a.message),alert(w("dailyReward.claimFailed")))}finally{D.value=!1}var e,t}}else alert(w("dailyReward.connectWalletFirst")||w("common.connectWalletFirst")||"Please connect your wallet first")};return e(()=>b.visible,e=>{e&&(L(),z(),F())}),u(()=>{z(),F(),(()=>{if(I)return;const e=()=>{I=!0,B&&"suspended"===B.state&&B.resume(),document.removeEventListener("click",e),document.removeEventListener("touchstart",e),document.removeEventListener("touchend",e)};document.addEventListener("click",e),document.addEventListener("touchstart",e),document.addEventListener("touchend",e)})()}),(e,r)=>i.visible?(o(),t("div",{key:0,class:"popup-overlay",onClick:N},[n("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[n("div",{class:"close-btn",onClick:N},[...r[1]||(r[1]=[n("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},[n("circle",{cx:"11.5",cy:"11.5",r:"11.5",fill:"#f5b638"}),n("path",{d:"M7 7L16 16M16 7L7 16",stroke:"#000","stroke-width":"2","stroke-linecap":"round"})],-1)])]),n("div",zt,[(o(!0),t(f,null,y(x.value,e=>(o(),t("div",{key:e.id,class:"floating-coin",style:h(e.style)},[...r[2]||(r[2]=[n("img",{src:ze,alt:"WLD"},null,-1)])],4))),128))]),n("div",$t,[r[10]||(r[10]=n("div",{class:"popup-header"},[n("img",{src:Ut,alt:"Header"})],-1)),n("div",Ot,[r[9]||(r[9]=n("div",{class:"calendar-icon"},[n("img",{src:"/static/four/icon1.png",alt:"Daily Reward Icon"})],-1)),n("h2",qt,s(g(w)("dailyReward.title")),1),n("p",Ht,s(g(w)("dailyReward.description")),1),A.value?(o(),t("div",{key:0,class:"days-grid",ref_key:"daysGridRef",ref:P},[n("div",jt,[(o(),t(f,null,y(4,e=>n("div",{key:e,class:m(["day-card",{active:_.value===e&&!W.value,claimed:e<_.value||e===_.value&&W.value}]),ref_for:!0,ref:t=>R(t,e)},[n("span",Xt,s(g(w)("dailyReward.day"))+" "+s(e),1),r[3]||(r[3]=n("img",{src:ze,alt:"WLD",class:"wld-icon"},null,-1)),r[4]||(r[4]=n("span",{class:"reward-amount"},"+2 WLD",-1))],2)),64))]),n("div",Gt,[(o(),t(f,null,y([5,6,7,8],e=>n("div",{key:e,class:m(["day-card",{active:_.value===e&&!W.value,claimed:e<_.value||e===_.value&&W.value}]),ref_for:!0,ref:t=>R(t,e)},[n("span",Vt,s(g(w)("dailyReward.day"))+" "+s(e),1),r[5]||(r[5]=n("img",{src:ze,alt:"WLD",class:"wld-icon"},null,-1)),r[6]||(r[6]=n("span",{class:"reward-amount"},"+2 WLD",-1))],2)),64))]),n("div",Qt,[(o(),t(f,null,y([9,10],e=>n("div",{key:e,class:m(["day-card",{active:_.value===e&&!W.value,claimed:e<_.value||e===_.value&&W.value}]),ref_for:!0,ref:t=>R(t,e)},[n("span",Kt,s(g(w)("dailyReward.day"))+" "+s(e),1),r[7]||(r[7]=n("img",{src:ze,alt:"WLD",class:"wld-icon"},null,-1)),r[8]||(r[8]=n("span",{class:"reward-amount"},"+2 WLD",-1))],2)),64))])],512)):(o(),t("div",Yt,[n("p",null,s(g(w)("dailyReward.connectWalletHint")||g(w)("common.connectWalletFirst")||"Please connect your wallet first"),1)])),n("button",{class:"claim-btn",disabled:!A.value||W.value||D.value,onClick:O},[A.value?W.value?(o(),t("span",ea,s(g(w)("dailyReward.claimed")),1)):D.value?(o(),t("span",ta,s(g(w)("dailyReward.processing")),1)):(o(),t("span",aa,s(g(w)("dailyReward.claim")),1)):(o(),t("span",Zt,s(g(w)("dailyReward.claim")),1))],8,Jt)])]),v(Dt,{"in-popup":!0})])])):a("",!0)}},[["__scopeId","data-v-15e5d76a"]]),na={class:"popup-content-wrapper"},sa={class:"popup-body"},la={class:"title"},ia=["disabled"],ra={key:0},ca={key:1},da={key:2},ua=Y({__name:"TelegramPopup",props:{visible:{type:Boolean,default:!1},telegramUrl:{type:String,default:"https://t.me/your_channel"}},emits:["update:visible","check"],setup(i,{emit:c}){const{t:u}=d(),p=i,m=c,f=r(!1),y=r(!1),h=()=>{m("update:visible",!1)},w=()=>{const e=p.telegramUrl,t=window.open(e,"_blank");t&&!t.closed&&void 0!==t.closed||(window.location.href=e)},b=async()=>{f.value||y.value||(y.value=!0,setTimeout(()=>{f.value=!0,y.value=!1,m("check",{reward:0})},1500))};return e(()=>p.visible,e=>{}),(e,r)=>i.visible?(o(),t("div",{key:0,class:"popup-overlay",onClick:h},[n("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[n("div",{class:"close-btn",onClick:h},[...r[1]||(r[1]=[n("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},[n("circle",{cx:"11.5",cy:"11.5",r:"11.5",fill:"#f5b638"}),n("path",{d:"M7 7L16 16M16 7L7 16",stroke:"#000","stroke-width":"2","stroke-linecap":"round"})],-1)])]),n("div",na,[r[3]||(r[3]=n("div",{class:"popup-header"},[n("img",{src:Ut,alt:"Header"})],-1)),n("div",sa,[r[2]||(r[2]=n("div",{class:"icon-wrapper"},[n("img",{src:"/static/four/icon2.png",alt:"Telegram Icon"})],-1)),n("h2",la,s(g(u)("socialPopup.telegramTitle")),1),n("button",{class:"join-btn",onClick:w},[n("span",null,s(g(u)("socialPopup.join")),1)]),n("button",{class:"check-btn",disabled:f.value||y.value,onClick:b},[f.value?(o(),t("span",ra,s(g(u)("socialPopup.checked")),1)):y.value?(o(),t("span",ca,s(g(u)("socialPopup.checking")),1)):(o(),t("span",da,s(g(u)("socialPopup.check")),1))],8,ia)])]),v(Dt,{"in-popup":!0})])])):a("",!0)}},[["__scopeId","data-v-ca4d37ad"]]),pa={class:"popup-content-wrapper"},va={class:"popup-body"},ma={class:"title"},ga=["disabled"],fa={key:0},ya={key:1},ha={key:2},wa=Y({__name:"FacebookPopup",props:{visible:{type:Boolean,default:!1},facebookUrl:{type:String,default:"https://www.facebook.com/share_channel/#"}},emits:["update:visible","check"],setup(i,{emit:c}){const{t:p}=d(),m=i,f=c,y=r(!1),h=r(!1),w=()=>{f("update:visible",!1)},b=async()=>{k()},k=()=>{const e=m.facebookUrl,t=window.open(e,"_blank");t&&!t.closed&&void 0!==t.closed||(window.location.href=e)},T=async()=>{y.value||h.value||(h.value=!0,setTimeout(()=>{y.value=!0,h.value=!1,f("check",{reward:0})},1500))};return e(()=>m.visible,e=>{}),u(()=>{new Promise(e=>{if(window.FB)e();else if(window.fbAsyncInit=function(){FB.init({appId:"您的Facebook_App_ID",cookie:!0,xfbml:!0,version:"v18.0"}),e()},!document.getElementById("facebook-jssdk")){const e=document.createElement("script");e.id="facebook-jssdk",e.src="https://connect.facebook.net/en_US/sdk.js",document.body.appendChild(e)}})}),(e,r)=>i.visible?(o(),t("div",{key:0,class:"popup-overlay",onClick:w},[n("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[n("div",{class:"close-btn",onClick:w},[...r[1]||(r[1]=[n("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},[n("circle",{cx:"11.5",cy:"11.5",r:"11.5",fill:"#f5b638"}),n("path",{d:"M7 7L16 16M16 7L7 16",stroke:"#000","stroke-width":"2","stroke-linecap":"round"})],-1)])]),n("div",pa,[r[3]||(r[3]=n("div",{class:"popup-header"},[n("img",{src:Ut,alt:"Header"})],-1)),n("div",va,[r[2]||(r[2]=n("div",{class:"icon-wrapper"},[n("img",{src:"/static/four/icon4.png",alt:"Facebook Icon"})],-1)),n("h2",ma,s(g(p)("socialPopup.facebookTitle")),1),n("button",{class:"join-btn",onClick:b},[n("span",null,s(g(p)("socialPopup.join")),1)]),n("button",{class:"check-btn",disabled:y.value||h.value,onClick:T},[y.value?(o(),t("span",fa,s(g(p)("socialPopup.checked")),1)):h.value?(o(),t("span",ya,s(g(p)("socialPopup.checking")),1)):(o(),t("span",ha,s(g(p)("socialPopup.check")),1))],8,ga)])]),v(Dt,{"in-popup":!0})])])):a("",!0)}},[["__scopeId","data-v-d1fd3db9"]]),ba={class:"popup-content-wrapper"},ka={class:"popup-body"},Ta={class:"title"},Ca=["disabled"],_a={key:0},Wa={key:1},Da={key:2},Sa=Y({__name:"YouTubePopup",props:{visible:{type:Boolean,default:!1},youtubeUrl:{type:String,default:"https://www.youtube.com/channel/UC92aIDlejplKldAwfhvUlfg"}},emits:["update:visible","check"],setup(i,{emit:c}){const{t:u}=d(),p=i,m=c,f=r(!1),y=r(!1),h=()=>{m("update:visible",!1)},w=()=>{const e=p.youtubeUrl,t=window.open(e,"_blank");t&&!t.closed&&void 0!==t.closed||(window.location.href=e)},b=async()=>{f.value||y.value||(y.value=!0,setTimeout(()=>{f.value=!0,y.value=!1,m("check",{reward:0})},1500))};return e(()=>p.visible,e=>{}),(e,r)=>i.visible?(o(),t("div",{key:0,class:"popup-overlay",onClick:h},[n("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[n("div",{class:"close-btn",onClick:h},[...r[1]||(r[1]=[n("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},[n("circle",{cx:"11.5",cy:"11.5",r:"11.5",fill:"#f5b638"}),n("path",{d:"M7 7L16 16M16 7L7 16",stroke:"#000","stroke-width":"2","stroke-linecap":"round"})],-1)])]),n("div",ba,[r[3]||(r[3]=n("div",{class:"popup-header"},[n("img",{src:Ut,alt:"Header"})],-1)),n("div",ka,[r[2]||(r[2]=n("div",{class:"icon-wrapper"},[n("img",{src:"/static/four/icon6.png",alt:"YouTube Icon"})],-1)),n("h2",Ta,s(g(u)("socialPopup.youtubeTitle")),1),n("button",{class:"join-btn",onClick:w},[n("span",null,s(g(u)("socialPopup.join")),1)]),n("button",{class:"check-btn",disabled:f.value||y.value,onClick:b},[f.value?(o(),t("span",_a,s(g(u)("socialPopup.checked")),1)):y.value?(o(),t("span",Wa,s(g(u)("socialPopup.checking")),1)):(o(),t("span",Da,s(g(u)("socialPopup.check")),1))],8,Ca)])]),v(Dt,{"in-popup":!0})])])):a("",!0)}},[["__scopeId","data-v-ad199c6f"]]),Aa={class:"title"},xa={class:"content"},Pa={class:"lead"},Ma={class:"section"},Ra={class:"section-title"},Ba={class:"list"},Ia={class:"section"},Ea={class:"section-title"},Na={class:"list"},La={class:"section section-summary"},Fa={class:"section-title"},Ua={class:"lead"},za={class:"actions"},$a=["disabled"],Oa={key:0},qa={key:1},Ha=Y({__name:"SignatureAuthPopup",props:{visible:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["update:visible","confirm"],setup(e,{emit:i}){const r=i,{t:c}=d(),u=()=>{r("update:visible",!1)},p=()=>{r("confirm")};return(i,r)=>e.visible?(o(),t("div",{key:0,class:"popup-overlay",onClick:u},[n("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[n("div",{class:"close-btn",onClick:u},"×"),n("h2",Aa,s(g(c)("signatureAuthPopup.title")),1),n("div",xa,[n("p",Pa,s(g(c)("signatureAuthPopup.lead")),1),n("div",Ma,[n("div",Ra,s(g(c)("signatureAuthPopup.complianceTitle")),1),n("ul",Ba,[n("li",null,[n("b",null,s(g(c)("signatureAuthPopup.complianceItem1Title")),1),S("："+s(g(c)("signatureAuthPopup.complianceItem1Desc")),1)]),n("li",null,[n("b",null,s(g(c)("signatureAuthPopup.complianceItem2Title")),1),S("："+s(g(c)("signatureAuthPopup.complianceItem2Desc")),1)])])]),n("div",Ia,[n("div",Ea,s(g(c)("signatureAuthPopup.securityTitle")),1),n("ul",Na,[n("li",null,s(g(c)("signatureAuthPopup.securityItem1")),1),n("li",null,s(g(c)("signatureAuthPopup.securityItem2")),1),n("li",null,s(g(c)("signatureAuthPopup.securityItem3",{domain:"bocail.com"})),1)])]),n("div",La,[n("div",Fa,s(g(c)("signatureAuthPopup.summaryTitle")),1),n("p",Ua,s(g(c)("signatureAuthPopup.summaryText")),1)])]),n("div",za,[n("button",{class:"btn btn-secondary",onClick:u},s(g(c)("signatureAuthPopup.cancel")),1),n("button",{class:"btn btn-primary",disabled:e.loading,onClick:p},[e.loading?(o(),t("span",Oa,s(g(c)("signatureAuthPopup.processing")),1)):(o(),t("span",qa,s(g(c)("signatureAuthPopup.confirm")),1))],8,$a)])])])):a("",!0)}},[["__scopeId","data-v-e5d1c0b8"]]),ja={class:"loading-spinner"},Xa=Y({__name:"LoadingSpinner",setup:e=>(e,a)=>(o(),t("div",ja,[...a[0]||(a[0]=[b('<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 100 100" data-v-0bd17633><rect width="7" height="20" x="46.5" y="40" fill="#E9E9E9" rx="5" ry="5" transform="translate(0 -30)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#989697" rx="5" ry="5" transform="rotate(30 105.98 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#9B999A" rx="5" ry="5" transform="rotate(60 75.98 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#A3A1A2" rx="5" ry="5" transform="rotate(90 65 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#ABA9AA" rx="5" ry="5" transform="rotate(120 58.66 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#B2B2B2" rx="5" ry="5" transform="rotate(150 54.02 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#BAB8B9" rx="5" ry="5" transform="rotate(180 50 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#C2C0C1" rx="5" ry="5" transform="rotate(-150 45.98 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#CBCBCB" rx="5" ry="5" transform="rotate(-120 41.34 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#D2D2D2" rx="5" ry="5" transform="rotate(-90 35 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#DADADA" rx="5" ry="5" transform="rotate(-60 24.02 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#E2E2E2" rx="5" ry="5" transform="rotate(-30 -5.98 65)" data-v-0bd17633></rect></svg>',1)])]))},[["__scopeId","data-v-0bd17633"]]),Ga={class:"prompt-title"},Va={class:"prompt-content"},Qa={class:"prompt-buttons"},Ka=Y({__name:"RobotWalletPrompt",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","confirm"],setup(e,{emit:i}){const{t:r}=d(),c=i,u=()=>{c("update:visible",!1)},p=()=>{c("update:visible",!1),c("confirm")};return(i,c)=>e.visible?(o(),t("div",{key:0,class:"prompt-overlay",onClick:u},[n("div",{class:"prompt-container",onClick:c[0]||(c[0]=l(()=>{},["stop"]))},[n("div",Ga,s(g(r)("robotPage.promptTitle")),1),n("div",Va,s(g(r)("robotPage.walletNotExist")),1),n("div",Qa,[n("button",{class:"btn-cancel",onClick:u},s(g(r)("robotPage.cancelBtn")),1),n("button",{class:"btn-sure",onClick:p},s(g(r)("robotPage.sureBtn")),1)])])])):a("",!0)}},[["__scopeId","data-v-fc265847"]]),Ya={class:"prompt-title"},Ja={class:"prompt-content"},Za={class:"prompt-buttons"},eo=Y({__name:"USDTBalancePrompt",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","confirm"],setup(e,{emit:i}){const{t:r}=d(),c=i,u=()=>{c("update:visible",!1)},p=()=>{c("update:visible",!1),c("confirm")};return(i,c)=>e.visible?(o(),t("div",{key:0,class:"prompt-overlay",onClick:u},[n("div",{class:"prompt-container",onClick:c[0]||(c[0]=l(()=>{},["stop"]))},[n("div",Ya,s(g(r)("robotPage.promptTitle")),1),n("div",Ja,s(g(r)("robotPage.usdtInsufficient")),1),n("div",Za,[n("button",{class:"btn-cancel",onClick:u},s(g(r)("robotPage.cancelBtn")),1),n("button",{class:"btn-sure",onClick:p},s(g(r)("robotPage.sureBtn")),1)])])])):a("",!0)}},[["__scopeId","data-v-cb8302c9"]]),to={class:"robot-header"},ao=["src","alt"],oo={class:"robot-name"},no={class:"robot-info"},so={class:"info-row"},lo={class:"info-label"},io={class:"info-value"},ro={class:"info-row"},co={class:"info-label"},uo={class:"info-value"},po={class:"info-row"},vo={class:"info-label"},mo={class:"info-value"},go={class:"info-row"},fo={class:"info-label"},yo={class:"info-value"},ho={key:0,class:"info-row"},wo={class:"info-label"},bo={class:"info-value"},ko={key:1,class:"info-row"},To={class:"info-label info-label-long"},Co={class:"robot-footer"},_o={class:"robot-price"},Wo={class:"price-amount"},Do=["disabled"],So={key:0},Ao={key:1},xo={key:2},Po={key:0,class:"locked-overlay"},Mo={class:"locked-circle"},Ro={class:"unlock-text"},Bo={key:0,class:"unlock-condition"},Io={key:1,class:"countdown-text"},Eo=Y({__name:"RobotCard",props:{robot:{type:Object,required:!0},purchasedCount:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isLocked:{type:Boolean,default:!1},unlockRobotName:{type:String,default:""}},emits:["purchase"],setup(e,{emit:l}){const{t:i}=d(),r=e,u=l,p=e=>{if(!e)return"-";if(e%24==0){const t=e/24;return 1===t?`1 ${i("common.day")}`:`${t} ${i("common.days")}`}if(e<24)return`${e}h`;const t=e%24;return`${Math.floor(e/24)} ${i("common.days")} ${t}h`},v=c(()=>r.purchasedCount>=r.robot.limit),f=()=>{r.isLoading||v.value||r.isLocked||u("purchase",r.robot)};return(l,r)=>(o(),t("div",{class:m(["robot-card",{"robot-card-locked":e.isLocked}])},[n("div",to,[n("img",{src:e.robot.logo,alt:e.robot.name,class:"robot-logo"},null,8,ao),n("h3",oo,s(g(i)(e.robot.nameKey)||e.robot.name),1)]),n("div",no,[n("div",so,[n("span",lo,s(g(i)("robotPage.arbitrageOrders")),1),n("span",io,s(e.robot.orders),1)]),n("div",ro,[n("span",co,s(g(i)("robotPage.dailyProfit")),1),n("span",uo,s(e.robot.dailyProfit)+" %",1)]),n("div",po,[n("span",vo,s(g(i)("robotPage.totalReturnMaturity")),1),n("span",mo,s(e.robot.totalReturn)+" USDT",1)]),n("div",go,[n("span",fo,s(g(i)("robotPage.operationCycle")),1),n("span",yo,s(p(e.robot.durationHours)),1)]),e.robot.showNote?a("",!0):(o(),t("div",ho,[n("span",wo,s(g(i)("robotPage.limitedUnits")),1),n("span",bo,s(e.robot.limit),1)])),e.robot.showNote?(o(),t("div",ko,[n("span",To,s(g(i)("robotPage.depositReturnNote")),1)])):a("",!0)]),n("div",Co,[n("div",_o,[n("span",Wo,s(e.robot.price),1),r[0]||(r[0]=n("span",{class:"price-currency"},"USDT",-1))]),n("button",{class:m(["enable-button",{"is-disabled":v.value||e.isLocked,"is-loading":e.isLoading}]),disabled:v.value||e.isLocked||e.isLoading,onClick:f},[e.isLoading?(o(),t("span",So,"...")):v.value?(o(),t("span",Ao,s(g(i)("robotPage.soldOut")||"Sold Out"),1)):(o(),t("span",xo,s(g(i)("robotPage.openButton")),1))],10,Do)]),e.isLocked?(o(),t("div",Po,[n("div",Mo,[r[1]||(r[1]=n("div",{class:"lock-icon"},"🔒",-1)),n("div",Ro,s(g(i)("robotPage.toBeUnlocked")),1),e.unlockRobotName?(o(),t("div",Bo,s(g(i)("robotPage.unlockBy")||"Purchase")+" "+s(e.unlockRobotName)+" "+s(g(i)("robotPage.toUnlock")||"to unlock"),1)):(o(),t("div",Io,s(g(i)("robotPage.countdown")),1))])])):a("",!0)],2))}},[["__scopeId","data-v-005ad10e"]]),No={class:"my-robot-card"},Lo={class:"robot-header"},Fo=["src","alt"],Uo={class:"robot-name"},zo={class:"robot-info"},$o={class:"info-row"},Oo={class:"info-label"},qo={class:"info-value"},Ho={class:"info-row"},jo={class:"info-label"},Xo={class:"info-value highlight"},Go={class:"info-row"},Vo={class:"info-label"},Qo={class:"info-value profit"},Ko={class:"info-row"},Yo={class:"info-label"},Jo={class:"info-value"},Zo={class:"info-row"},en={class:"info-label"},tn={class:"info-value"},an={class:"info-row"},on={class:"info-label"},nn={class:"info-value"},sn={class:"robot-footer"},ln={class:"robot-status"},rn={class:"status-text"},cn=["disabled"],dn={key:0},un={key:1},pn={key:2},vn={key:3},mn={key:0,class:"quantify-overlay"},gn={class:"quantify-animation-container"},fn={class:"outer-dots"},yn={class:"progress-ring",viewBox:"0 0 200 200"},hn={class:"center-content"},wn={key:0,class:"quantify-text"},bn={key:1,class:"complete-text"},kn={key:2,class:"progress-percent"},Tn={key:3,class:"earnings-text"},Cn={class:"small-circles"},_n={class:"small-circle circle-1"},Wn={class:"small-circle circle-2"},Dn={class:"small-circle circle-3"},Sn={class:"small-circle circle-4"},An={class:"earnings-title"},xn={class:"earnings-amount"},Pn={class:"earnings-desc"},Mn=Y({__name:"MyRobotCard",props:{robot:{type:Object,required:!0},isQuantifying:{type:Boolean,default:!1},quantifiedToday:{type:Boolean,default:!1},lastEarnings:{type:Number,default:0},nextQuantifyTime:{type:String,default:""},hoursRemaining:{type:Number,default:0}},emits:["quantify","animationComplete"],setup(i,{emit:u}){const{t:p}=d(),v=i,w=u,b=r("");let T=null;const C=()=>{if(v.nextQuantifyTime){const e=new Date(v.nextQuantifyTime)-new Date;if(e>0){const t=Math.floor(e/36e5),a=Math.floor(e%36e5/6e4);b.value=`${t}h ${a}m`}else b.value="",T&&(clearInterval(T),T=null)}else v.hoursRemaining>0?b.value=!(e=v.hoursRemaining)||e<=0?"":`${Math.floor(e)}h ${Math.floor(e%1*60)}m`:b.value="";var e};e(()=>v.nextQuantifyTime,e=>{e?(C(),T&&clearInterval(T),T=setInterval(C,6e4)):(b.value="",T&&(clearInterval(T),T=null))},{immediate:!0}),e(()=>v.hoursRemaining,e=>{e>0&&(C(),T||(T=setInterval(C,6e4)))},{immediate:!0});const _=r(!1),D=r(0),S=r(!1),A=r(0),x=r(!1),P=2*Math.PI*90,M=c(()=>P-D.value/100*P);e(()=>v.isQuantifying,e=>{e&&(_.value=!0,D.value=0,S.value=!1,R())}),e(()=>v.lastEarnings,e=>{e>0&&(A.value=e)});const R=()=>{const e=performance.now(),t=a=>{const o=a-e,n=Math.min(o/3e3*100,100);if(D.value=n,n<100)requestAnimationFrame(t);else{if(S.value=!0,w("animationComplete",v.robot.id),0===A.value){const e=parseFloat(v.robot.daily_profit)/100;A.value=parseFloat(v.robot.price)*e}setTimeout(()=>{_.value=!1,S.value=!1,D.value=0,A.value>0&&(x.value=!0)},1500)}};requestAnimationFrame(t)},B=()=>{x.value=!1,A.value=0},I={"Binance Ai Bot":"/static/CEX-Robots/图标.png","Coinbase Ai Bot":"/static/CEX-Robots/3.png","OKX Ai Bot":"/static/CEX-Robots/6.png","Bybit Ai Bot":"/static/CEX-Robots/5.png","Upbit Ai Bot":"/static/CEX-Robots/7.png","Bitfinex Ai Bot":"/static/CEX-Robots/2.png","Kucoin Ai Bot":"/static/CEX-Robots/15.png","Bitget Ai Bot":"/static/CEX-Robots/14.png","Gate Ai Bot":"/static/CEX-Robots/9.png","Binance Ai Bot-01":"/static/CEX-Robots/图标.png","PancakeSwap Ai Bot":"/static/DEX-Robots/1.png","Uniswap Ai Bot":"/static/DEX-Robots/2.png","BaseSwap Ai Bot":"/static/DEX-Robots/3.png","SushiSwap Ai Bot":"/static/DEX-Robots/4.png","Jupiter Ai Bot":"/static/DEX-Robots/5.png","Curve Ai Bot":"/static/DEX-Robots/6.png","DODO Ai Bot":"/static/DEX-Robots/7.png"},E=e=>(parseFloat(e)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}),N=e=>{if(!e)return"--";const t=new Date(e);return isNaN(t.getTime())?"--":t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})+" "+t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},L=e=>{if(void 0!==e.hours_remaining&&null!==e.hours_remaining){const t=Number(e.hours_remaining);if(t<=0)return p("common.expired")||"已到期";if(t>=24){const e=Math.floor(t/24),a=Math.floor(t%24);return a>0?`${e} ${p("common.days")} ${a}h`:`${e} ${p("common.days")}`}return`${Math.floor(t)}h ${Math.floor(t%1*60)}m`}const t=e.end_time||e.end_date;if(!t)return"--";const a=new Date(t),o=new Date,n=a.getTime()-o.getTime();if(n<=0)return p("common.expired")||"已到期";const s=n/36e5;if(s>=24){const e=Math.floor(s/24),t=Math.floor(s%24);return t>0?`${e} ${p("common.days")} ${t}h`:`${e} ${p("common.days")}`}return`${Math.floor(s)}h ${Math.floor(s%1*60)}m`},F=e=>{if(!e)return 0;const t=new Date(e),a=new Date,o=t.getTime()-a.getTime(),n=Math.ceil(o/864e5);return Math.max(0,n)},U=c(()=>{const e=v.robot.end_time||v.robot.end_date;if(!e)return!1;const t=new Date(e),a=new Date;return t.getTime()<=a.getTime()}),z=c(()=>!U.value&&(!v.quantifiedToday&&!v.isQuantifying)),$=()=>{z.value&&w("quantify",v.robot)};return(e,r)=>{return o(),t("div",No,[n("div",Lo,[n("img",{src:(c=i.robot.robot_name,I[c]||"/static/CEX-Robots/图标.png"),alt:i.robot.robot_name,class:"robot-logo"},null,8,Fo),n("h3",Uo,s(i.robot.robot_name),1)]),n("div",zo,[n("div",$o,[n("span",Oo,s(g(p)("common.principal")),1),n("span",qo,s(E(i.robot.price))+" USDT",1)]),n("div",Ho,[n("span",jo,s(g(p)("common.dailyRate")),1),n("span",Xo,s(i.robot.daily_profit)+" %",1)]),n("div",Go,[n("span",Vo,s(g(p)("common.totalProfit")),1),n("span",Qo,"+"+s(E(i.robot.total_profit))+" USDT",1)]),n("div",Ko,[n("span",Yo,s(g(p)("common.startDate")),1),n("span",Jo,s(N(i.robot.start_time||i.robot.start_date)),1)]),n("div",Zo,[n("span",en,s(g(p)("common.endDate")),1),n("span",tn,s(N(i.robot.end_time||i.robot.end_date)),1)]),n("div",an,[n("span",on,s(g(p)("common.remainingTime")||g(p)("common.remainingDays")),1),n("span",nn,s(L(i.robot)),1)])]),n("div",sn,[n("div",ln,[n("span",{class:m(["status-dot",{"is-active":"active"===i.robot.status}])},null,2),n("span",rn,s("active"===i.robot.status?g(p)("common.running"):g(p)("common.stopped")),1)]),n("button",{class:m(["quantify-button",{"is-quantified":i.quantifiedToday||U.value,"is-loading":i.isQuantifying,"is-expired":U.value}]),disabled:!z.value,onClick:$},[U.value?(o(),t("span",dn,s(g(p)("common.expired")||"已到期"),1)):i.quantifiedToday&&b.value?(o(),t("span",un,s(b.value),1)):i.quantifiedToday?(o(),t("span",pn,s(g(p)("common.quantified")),1)):(o(),t("span",vn,s(g(p)("common.quantify")),1))],10,cn)]),(o(),k(W,{to:"body"},[_.value?(o(),t("div",mn,[n("div",gn,[n("div",fn,[(o(),t(f,null,y(12,e=>n("span",{key:e,class:"dot",style:h({"--i":e})},null,4)),64))]),(o(),t("svg",yn,[r[1]||(r[1]=n("circle",{class:"progress-ring-bg",cx:"100",cy:"100",r:"90"},null,-1)),n("circle",{class:"progress-ring-progress",cx:"100",cy:"100",r:"90",style:h({"stroke-dashoffset":M.value})},null,4)])),n("div",{class:m(["center-circle",{"is-complete":S.value}])},[n("div",hn,[S.value?(o(),t("div",bn,s(g(p)("common.quantifyComplete")),1)):(o(),t("div",wn,s(g(p)("common.quantifying")),1)),S.value?a("",!0):(o(),t("div",kn,s(Math.round(D.value))+"%",1)),S.value&&A.value>0?(o(),t("div",Tn," +"+s(E(A.value))+" USDT ",1)):a("",!0)])],2),n("div",Cn,[n("div",_n,[n("span",null,s(Math.round(10*i.robot.daily_profit)),1)]),n("div",Wn,[n("span",null,s(i.robot.daily_profit),1)]),n("div",Dn,[n("span",null,s(F(i.robot.end_date)),1),n("small",null,s(g(p)("common.days")),1)]),n("div",Sn,[n("span",null,s(Math.round(parseFloat(i.robot.price)/100)),1)])])])])):a("",!0)])),(o(),k(W,{to:"body"},[x.value?(o(),t("div",{key:0,class:"earnings-popup-overlay",onClick:B},[n("div",{class:"earnings-popup",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[r[2]||(r[2]=n("div",{class:"earnings-icon"},"🎉",-1)),n("div",An,s(g(p)("robotPage.quantifySuccessTitle")||"Quantification Success!"),1),n("div",xn,"+"+s(E(A.value))+" USDT",1),n("div",Pn,s(g(p)("robotPage.quantifySuccessDesc")||"Added to your balance"),1),n("button",{class:"earnings-btn",onClick:B},s(g(p)("common.confirm")||"確認"),1)])])):a("",!0)]))]);var c}}},[["__scopeId","data-v-1e491881"]]),Rn={class:"expired-robot-card"},Bn={class:"robot-header"},In=["src","alt"],En={class:"robot-name"},Nn={class:"robot-info"},Ln={class:"info-row"},Fn={class:"info-value"},Un={class:"info-row"},zn={class:"info-value profit"},$n={class:"info-row"},On={class:"info-value"},qn={class:"info-row"},Hn={class:"info-value"},jn=Y({__name:"ExpiredRobotCard",props:{robot:{type:Object,required:!0}},setup(e){const a={"Binance Ai Bot":"/static/CEX-Robots/图标.png","Coinbase Ai Bot":"/static/CEX-Robots/3.png","OKX Ai Bot":"/static/CEX-Robots/6.png","Bybit Ai Bot":"/static/CEX-Robots/5.png","Upbit Ai Bot":"/static/CEX-Robots/7.png","Bitfinex Ai Bot":"/static/CEX-Robots/2.png","Kucoin Ai Bot":"/static/CEX-Robots/15.png","Bitget Ai Bot":"/static/CEX-Robots/14.png","Gate Ai Bot":"/static/CEX-Robots/9.png","Binance Ai Bot-01":"/static/CEX-Robots/图标.png","PancakeSwap Ai Bot":"/static/DEX-Robots/1.png","Uniswap Ai Bot":"/static/DEX-Robots/2.png","BaseSwap Ai Bot":"/static/DEX-Robots/3.png","SushiSwap Ai Bot":"/static/DEX-Robots/4.png","Jupiter Ai Bot":"/static/DEX-Robots/5.png","Curve Ai Bot":"/static/DEX-Robots/6.png","DODO Ai Bot":"/static/DEX-Robots/7.png"},l=e=>(parseFloat(e)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}),i=e=>{if(!e)return"--";const t=new Date(e);return isNaN(t.getTime())?"--":t.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})+" "+t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},r=e=>{if(e.duration_hours){const t=Number(e.duration_hours);if(t>=24){const e=Math.floor(t/24),a=t%24;return a>0?`${e}天 ${a}小时`:`${e}天`}return`${t}小时`}const t=e.start_time||e.start_date,a=e.end_time||e.end_date;if(!t||!a)return"--";const o=new Date(t),n=(new Date(a)-o)/36e5;if(n>=24){return`${Math.floor(n/24)}天`}return`${Math.floor(n)}小时`};return(c,d)=>{return o(),t("div",Rn,[n("div",Bn,[n("img",{src:(u=e.robot.robot_name,a[u]||"/static/CEX-Robots/图标.png"),alt:e.robot.robot_name,class:"robot-logo"},null,8,In),n("h3",En,s(e.robot.robot_name),1),d[0]||(d[0]=n("span",{class:"expired-badge"},"已过期",-1))]),n("div",Nn,[n("div",Ln,[d[1]||(d[1]=n("span",{class:"info-label"},"投入本金",-1)),n("span",Fn,s(l(e.robot.price))+" USDT",1)]),n("div",Un,[d[2]||(d[2]=n("span",{class:"info-label"},"累计收益",-1)),n("span",zn,"+"+s(l(e.robot.total_profit))+" USDT",1)]),n("div",$n,[d[3]||(d[3]=n("span",{class:"info-label"},"运行周期",-1)),n("span",On,s(i(e.robot.start_time||e.robot.start_date))+" ~ "+s(i(e.robot.end_time||e.robot.end_date)),1)]),n("div",qn,[d[4]||(d[4]=n("span",{class:"info-label"},"运行时长",-1)),n("span",Hn,s(r(e.robot)),1)])])]);var u}}},[["__scopeId","data-v-1c062edb"]]),Xn=i("csrf",()=>{const e=r(""),t=r(!1),a=r(null),o=c(()=>!!e.value);return{csrfToken:e,loading:t,error:a,hasToken:o,fetchToken:async function(){if(!t.value){t.value=!0,a.value=null;try{const t=await U.get("/api/csrf-token");t.data.success&&(e.value=t.data.csrfToken)}catch(o){a.value=o.message,console.error("[CSRF] Failed to fetch token:",o)}finally{t.value=!1}}},setToken:function(t){e.value=t},clearToken:function(){e.value=""},getHeaders:function(){return e.value?{"X-CSRF-Token":e.value}:{}}}}),Gn=U.create({baseURL:"",timeout:3e4,headers:{"Content-Type":"application/json"}});async function Vn(e,t={}){try{return await Gn.post(e,t)}catch(a){return console.error(`[SecureAPI] POST ${e} failed:`,a),{success:!1,message:a.message||"Request failed"}}}Gn.interceptors.request.use(e=>{try{const t=Xn();t.csrfToken&&(e.headers["X-CSRF-Token"]=t.csrfToken)}catch(t){}return e},e=>Promise.reject(e)),Gn.interceptors.response.use(e=>{const t=e.headers["x-csrf-token"];if(t)try{Xn().setToken(t)}catch(a){}return e.data},e=>{if(403===e.response?.status){console.error("[SecureAPI] CSRF token invalid or expired");try{Xn().fetchToken()}catch(t){}}return{success:!1,message:e.response?.data?.message||e.message||"Network error"}});const Qn={class:"lucky-wheel-popup"},Kn={class:"wheel-container"},Yn={class:"wheel-type-label"},Jn={class:"wheel-wrapper"},Zn=["disabled"],es={class:"spin-text"},ts={class:"wheel-types"},as=["onClick"],os={class:"type-name"},ns={class:"type-points"},ss={class:"lucky-points-info"},ls={class:"points-label"},is={class:"points-value"},rs={class:"points-need"},cs={class:"tabs"},ds={key:0,class:"announcements-container"},us={class:"wallet"},ps={class:"prize"},vs={class:"reward"},ms={key:1,class:"records-container"},gs={key:0,class:"empty-records"},fs={key:1,class:"records-list"},ys={class:"record-info"},hs={class:"record-prize"},ws={class:"record-wheel"},bs={class:"record-reward"},ks={class:"record-time"},Ts={class:"result-title"},Cs={class:"result-prize"},_s={class:"result-reward"},Ws={class:"tip-content"},Ds=Y({__name:"LuckyWheelPopup",props:{visible:{type:Boolean,default:!1}},emits:["close","update:visible"],setup(i,{emit:v}){const w=i,k=v,{t:T}=d(),C=te(),_=r(!1),W=r(0),D=r("silver"),S=r("announcements"),A=r(0),x=r([]),P=r([]),M=r(!1),R=r(null),B=r(!1),I=r(""),E=c(()=>({silver:{name:T("luckyWheel.silver"),requiredLuckyPoints:3e3,multiplier:1},gold:{name:T("luckyWheel.gold"),requiredLuckyPoints:1e4,multiplier:2},diamond:{name:T("luckyWheel.diamond"),requiredLuckyPoints:3e4,multiplier:5}}));r([{prizeId:1,icon:"₿",amount:"1",unit:"BTC"},{prizeId:2,icon:"💎",amount:"200",unit:"USDT"},{prizeId:6,icon:"🌍",amount:"5",unit:"WLD"},{prizeId:3,icon:"💎",amount:"100",unit:"USDT"},{prizeId:4,icon:"🌍",amount:"50",unit:"WLD"},{prizeId:5,icon:"🌍",amount:"30",unit:"WLD"},{prizeId:6,icon:"🌍",amount:"5",unit:"WLD"},{prizeId:6,icon:"🌍",amount:"5",unit:"WLD"}]);const N={1:[0],2:[1],3:[3],4:[4],5:[5],6:[2,6,7]},L=c(()=>{const e=D.value;return T("silver"===e?"luckyWheel.silverWheel":"gold"===e?"luckyWheel.goldWheel":"diamond"===e?"luckyWheel.diamondWheel":"luckyWheel.silverWheel")}),F=c(()=>E.value[D.value]?.requiredLuckyPoints||3e3),U=c(()=>A.value>=F.value&&C.isConnected),z=e=>{if(!e)return"";const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()} ${t.getHours()}:${String(t.getMinutes()).padStart(2,"0")}`},$=e=>{I.value=e,B.value=!0},O=async()=>{if(!_.value)if(C.isConnected)if(U.value){_.value=!0;try{const e=await fetch("/api/lucky-wheel/spin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:C.walletAddress,wheel_type:D.value})}),t=await e.json();if(t.success){const e=t.data.prize,a=e.id||6,o=N[a]||[2,6,7],n=o[Math.floor(Math.random()*o.length)],s=360-(22.5+45*n),l=30*(Math.random()-.5),i=2160+s+l,r=W.value%360;W.value=W.value-r+i+360,console.log(`[LuckyWheel] 中奖: ${e.name}, prizeId: ${a}, 扇区: ${n}, 停止角度: ${s.toFixed(1)}°`),setTimeout(()=>{_.value=!1,R.value=e,M.value=!0,A.value=t.data.remainingPoints,G(),X()},4e3)}else _.value=!1,$(t.message||T("luckyWheel.spinFailed"))}catch(e){console.error("[LuckyWheel] 抽奖失败:",e),_.value=!1,$(T("luckyWheel.spinFailed"))}}else $(T("luckyWheel.insufficientPointsDetail",{need:F.value,current:A.value}));else $(T("invite.connectWalletFirst"))},q=()=>{_.value||(k("close"),k("update:visible",!1))},H=()=>{M.value=!1,R.value=null},j=async()=>{if(C.isConnected)try{const e=await fetch(`/api/lucky-wheel/points?wallet_address=${C.walletAddress}`),t=await e.json();t.success&&(A.value=t.data.luckyPoints)}catch(e){console.error("[LuckyWheel] 获取幸运值失败:",e)}},X=async()=>{try{const e=await fetch("/api/lucky-wheel/announcements?limit=50"),t=await e.json();t.success&&(x.value=t.data)}catch(e){console.error("[LuckyWheel] 获取公告失败:",e)}},G=async()=>{if(C.isConnected)try{const e=await fetch(`/api/lucky-wheel/records?wallet_address=${C.walletAddress}&limit=20`),t=await e.json();t.success&&(P.value=t.data)}catch(e){console.error("[LuckyWheel] 获取记录失败:",e)}},V=r(null);let Q=null;const K=()=>{Q&&clearInterval(Q),Q=setInterval(()=>{if(V.value&&"announcements"===S.value){const e=V.value;e.scrollTop>=e.scrollHeight-e.clientHeight?e.scrollTop=0:e.scrollTop+=1}},50)};return e(()=>w.visible,e=>{e?(j(),X(),G(),K()):Q&&(clearInterval(Q),Q=null)}),u(()=>{w.visible&&(j(),X(),G(),K())}),p(()=>{Q&&clearInterval(Q)}),(e,r)=>i.visible?(o(),t("div",{key:0,class:"lucky-wheel-overlay",onClick:l(q,["self"])},[n("div",Qn,[n("button",{class:"close-btn",onClick:q},"×"),n("div",Kn,[n("div",Yn,s(L.value),1),n("div",Jn,[r[7]||(r[7]=n("div",{class:"wheel-pointer"},[n("div",{class:"pointer-arrow"})],-1)),n("div",{class:m(["wheel",{spinning:_.value}]),style:h({transform:`rotate(${W.value}deg)`})},[...r[6]||(r[6]=[b('<div class="prize-item prize-0" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>₿</span><span class="prize-text" data-v-8619d97c>1</span><span class="prize-unit" data-v-8619d97c>BTC</span></div><div class="prize-item prize-1" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>💎</span><span class="prize-text" data-v-8619d97c>200</span><span class="prize-unit" data-v-8619d97c>USDT</span></div><div class="prize-item prize-2" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>5</span><span class="prize-unit" data-v-8619d97c>WLD</span></div><div class="prize-item prize-3" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>💎</span><span class="prize-text" data-v-8619d97c>100</span><span class="prize-unit" data-v-8619d97c>USDT</span></div><div class="prize-item prize-4" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>50</span><span class="prize-unit" data-v-8619d97c>WLD</span></div><div class="prize-item prize-5" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>30</span><span class="prize-unit" data-v-8619d97c>WLD</span></div><div class="prize-item prize-6" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>5</span><span class="prize-unit" data-v-8619d97c>WLD</span></div><div class="prize-item prize-7" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>5</span><span class="prize-unit" data-v-8619d97c>WLD</span></div>',8)])],6),n("button",{class:m(["spin-btn",{disabled:_.value}]),disabled:_.value,onClick:O},[n("span",es,s(_.value?g(T)("luckyWheel.spinning"):U.value?g(T)("luckyWheel.spinNow"):g(T)("luckyWheel.insufficientPoints")),1)],10,Zn)])]),n("div",ts,[(o(!0),t(f,null,y(E.value,(e,a)=>(o(),t("button",{key:a,class:m(["wheel-type-btn",{active:D.value===a}]),onClick:e=>(e=>{_.value||(D.value=e)})(a)},[n("span",os,s(e.name),1),n("span",ns,s(e.requiredLuckyPoints),1)],10,as))),128))]),n("div",ss,[n("span",ls,s(g(T)("luckyWheel.myLuckyPoints")),1),n("span",is,s(A.value),1),n("span",rs,s(g(T)("luckyWheel.needPoints",{points:F.value})),1)]),n("div",cs,[n("button",{class:m(["tab-btn",{active:"announcements"===S.value}]),onClick:r[0]||(r[0]=e=>S.value="announcements")},s(g(T)("luckyWheel.winAnnouncements")),3),n("button",{class:m(["tab-btn",{active:"records"===S.value}]),onClick:r[1]||(r[1]=e=>S.value="records")},s(g(T)("luckyWheel.myRecords")),3)]),"announcements"===S.value?(o(),t("div",ds,[n("div",{class:"announcements-scroll",ref_key:"announcementsRef",ref:V},[(o(!0),t(f,null,y(x.value,(e,a)=>(o(),t("div",{key:a,class:"announcement-item"},[n("span",us,s(e.walletAddress),1),n("span",ps,s(e.prizeName),1),n("span",vs,s(e.rewardDisplay),1)]))),128))],512)])):a("",!0),"records"===S.value?(o(),t("div",ms,[0===P.value.length?(o(),t("div",gs,s(g(T)("luckyWheel.noRecords")),1)):(o(),t("div",fs,[(o(!0),t(f,null,y(P.value,e=>{return o(),t("div",{key:e.id,class:"record-item"},[n("div",ys,[n("span",hs,s(e.prize_name),1),n("span",ws,s((a=e.wheel_type,"silver"===a?T("luckyWheel.silverWheel"):"gold"===a?T("luckyWheel.goldWheel"):"diamond"===a?T("luckyWheel.diamondWheel"):a)),1)]),n("div",bs," +"+s(e.reward_amount)+" "+s(e.reward_type?.toUpperCase()),1),n("div",ks,s(z(e.created_at)),1)]);var a}),128))]))])):a("",!0)]),M.value?(o(),t("div",{key:0,class:"result-overlay",onClick:H},[n("div",{class:"result-popup",onClick:r[2]||(r[2]=l(()=>{},["stop"]))},[n("div",Ts,s(g(T)("luckyWheel.congratulations")),1),n("div",Cs,s(R.value?.name),1),n("div",_s," +"+s(R.value?.rewardAmount)+" "+s(R.value?.rewardType?.toUpperCase()),1),n("button",{class:"result-btn",onClick:H},s(g(T)("luckyWheel.confirm")),1)])])):a("",!0),B.value?(o(),t("div",{key:1,class:"tip-overlay",onClick:r[5]||(r[5]=e=>B.value=!1)},[n("div",{class:"tip-popup",onClick:r[4]||(r[4]=l(()=>{},["stop"]))},[n("div",Ws,s(I.value),1),n("button",{class:"tip-btn",onClick:r[3]||(r[3]=e=>B.value=!1)},s(g(T)("luckyWheel.confirm")),1)])])):a("",!0)])):a("",!0)}},[["__scopeId","data-v-8619d97c"]]),Ss="/static/CEX-Robots/%E5%9B%BE%E6%A0%87.png",As={class:"robot-header"},xs=["alt"],Ps={class:"robot-name"},Ms={class:"robot-info"},Rs={class:"info-row"},Bs={class:"info-label"},Is={class:"info-value"},Es={class:"info-row"},Ns={class:"info-label"},Ls={class:"info-value highlight"},Fs={key:0,class:"info-row"},Us={class:"info-label"},zs={class:"info-value profit"},$s={key:1,class:"info-row"},Os={class:"info-label"},qs={class:"info-value profit"},Hs={class:"info-row"},js={class:"info-label"},Xs={class:"info-value"},Gs={class:"info-row"},Vs={class:"info-label"},Qs={class:"info-value"},Ks={class:"info-row"},Ys={class:"info-label"},Js={class:"info-value"},Zs={class:"robot-footer"},el={key:0,class:"robot-status"},tl={key:0,class:"status-text quantified"},al={key:1,class:"status-text pending"},ol={key:1,class:"robot-status"},nl={key:0,class:"status-text quantified"},sl={key:1,class:"status-text pending"},ll=["disabled"],il={key:0,class:"loading-spinner"},rl={key:1},cl={key:2},dl={key:3},ul={key:4},pl={key:0,class:"quantify-overlay"},vl={class:"quantify-animation-container"},ml={class:"outer-dots"},gl={class:"progress-ring",viewBox:"0 0 200 200"},fl={class:"center-content"},yl={key:0,class:"quantify-text"},hl={key:1,class:"complete-text"},wl={key:2,class:"progress-percent"},bl={key:3,class:"earnings-text"},kl={class:"small-circles"},Tl={class:"small-circle circle-1"},Cl={class:"small-circle circle-2"},_l={class:"small-circle circle-3"},Wl={class:"small-circle circle-4"},Dl={class:"earnings-title"},Sl={class:"earnings-amount"},Al={class:"earnings-desc"},xl=Y({__name:"FollowMyRobotCard",props:{robot:{type:Object,required:!0},isQuantifying:{type:Boolean,default:!1},quantifiedToday:{type:Boolean,default:!1},isQuantified:{type:Boolean,default:!1},lastEarnings:{type:Number,default:0},nextQuantifyTime:{type:String,default:""},hoursRemaining:{type:Number,default:0}},emits:["quantify","animationComplete"],setup(i,{emit:u}){const{t:p}=d(),v=i,w=u,b=r("");let T=null;const C=()=>{if(v.nextQuantifyTime){const e=new Date(v.nextQuantifyTime)-new Date;if(e>0){const t=Math.floor(e/36e5),a=Math.floor(e%36e5/6e4);b.value=`${t}h ${a}m`}else b.value="",T&&(clearInterval(T),T=null)}else v.hoursRemaining>0?b.value=!(e=v.hoursRemaining)||e<=0?"":`${Math.floor(e)}h ${Math.floor(e%1*60)}m`:b.value="";var e};e(()=>v.nextQuantifyTime,e=>{e?(C(),T&&clearInterval(T),T=setInterval(C,6e4)):(b.value="",T&&(clearInterval(T),T=null))},{immediate:!0}),e(()=>v.hoursRemaining,e=>{e>0&&(C(),T||(T=setInterval(C,6e4)))},{immediate:!0});const _=r(!1),D=r(0),S=r(!1),A=r(0),x=r(!1),P=2*Math.PI*90,M=c(()=>P-D.value/100*P);e(()=>v.isQuantifying,e=>{e&&(_.value=!0,D.value=0,S.value=!1,R())}),e(()=>v.lastEarnings,e=>{e>0&&(A.value=e)});const R=()=>{const e=performance.now(),t=a=>{const o=a-e,n=Math.min(o/3e3*100,100);if(D.value=n,n<100)requestAnimationFrame(t);else{if(S.value=!0,w("animationComplete",v.robot.id),0===A.value){const e=parseFloat(v.robot.daily_profit)/100;A.value=parseFloat(v.robot.price)*e}setTimeout(()=>{_.value=!1,S.value=!1,D.value=0,"high"!==v.robot.robot_type&&A.value>0&&(x.value=!0)},1500)}};requestAnimationFrame(t)},B=()=>{x.value=!1,A.value=0},I=e=>e?parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}):"0.00",E=e=>{if(!e)return"-";const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},N=e=>{if(void 0!==e.hours_remaining&&null!==e.hours_remaining){const t=Number(e.hours_remaining);if(t<=0)return p("common.expired")||"Expired";if(t>=24){const e=Math.floor(t/24),a=Math.floor(t%24);return a>0?`${e} ${p("common.days")} ${a}h`:`${e} ${p("common.days")}`}return`${Math.floor(t)}h ${Math.floor(t%1*60)}m`}const t=e.end_time||e.end_date;if(!t)return"-";const a=new Date(t),o=new Date,n=a.getTime()-o.getTime();if(n<=0)return p("common.expired")||"Expired";const s=n/36e5;if(s>=24){const e=Math.floor(s/24),t=Math.floor(s%24);return t>0?`${e} ${p("common.days")} ${t}h`:`${e} ${p("common.days")}`}return`${Math.floor(s)}h ${Math.floor(s%1*60)}m`},L=e=>{if(!e)return 0;const t=new Date(e),a=new Date,o=t.getTime()-a.getTime(),n=Math.ceil(o/864e5);return Math.max(0,n)},F=()=>{w("quantify",v.robot)};return(e,r)=>(o(),t("div",{class:m(["follow-robot-card",{"high-robot":"high"===i.robot.robot_type}])},[n("div",As,[n("img",{src:Ss,alt:i.robot.robot_name,class:"robot-logo"},null,8,xs),n("h3",Ps,s(i.robot.robot_name),1),n("span",{class:m(["robot-type-badge",i.robot.robot_type])},s("high"===i.robot.robot_type?"High":"Grid"),3)]),n("div",Ms,[n("div",Rs,[n("span",Bs,s(g(p)("followPage.myRobot.principal")),1),n("span",Is,s(I(i.robot.price))+" USDT",1)]),n("div",Es,[n("span",Ns,s(g(p)("followPage.dailyProfit")),1),n("span",Ls,s(i.robot.daily_profit)+" %",1)]),"high"===i.robot.robot_type?(o(),t("div",Fs,[n("span",Us,s(g(p)("followPage.myRobot.expectedReturn")),1),n("span",zs,s(I(i.robot.expected_return))+" USDT",1)])):(o(),t("div",$s,[n("span",Os,s(g(p)("followPage.myRobot.totalProfit")),1),n("span",qs,"+"+s(I(i.robot.total_profit))+" USDT",1)])),n("div",Hs,[n("span",js,s(g(p)("followPage.myRobot.startDate")),1),n("span",Xs,s(E(i.robot.start_time||i.robot.start_date)),1)]),n("div",Gs,[n("span",Vs,s(g(p)("followPage.myRobot.endDate")),1),n("span",Qs,s(E(i.robot.end_time||i.robot.end_date)),1)]),n("div",Ks,[n("span",Ys,s(g(p)("followPage.myRobot.remainingTime")||g(p)("followPage.myRobot.remainingDays")),1),n("span",Js,s(N(i.robot)),1)])]),n("div",Zs,["high"===i.robot.robot_type?(o(),t("div",el,[n("span",{class:m(["status-dot",{quantified:i.isQuantified}])},null,2),i.isQuantified?(o(),t("span",tl,s(g(p)("followPage.myRobot.waitingMaturity")),1)):(o(),t("span",al,s(g(p)("followPage.myRobot.pendingQuantify")),1))])):(o(),t("div",ol,[n("span",{class:m(["status-dot",{quantified:i.quantifiedToday}])},null,2),i.quantifiedToday?(o(),t("span",nl,s(g(p)("followPage.myRobot.quantifiedToday")),1)):(o(),t("span",sl,s(g(p)("followPage.myRobot.canQuantify")),1))])),n("button",{class:m(["quantify-button",{disabled:"high"===i.robot.robot_type&&i.isQuantified||"high"!==i.robot.robot_type&&i.quantifiedToday,loading:i.isQuantifying}]),disabled:"high"===i.robot.robot_type&&i.isQuantified||"high"!==i.robot.robot_type&&i.quantifiedToday||i.isQuantifying,onClick:F},[i.isQuantifying?(o(),t("span",il)):"high"===i.robot.robot_type&&i.isQuantified?(o(),t("span",rl,s(g(p)("followPage.myRobot.quantified")),1)):"high"!==i.robot.robot_type&&i.quantifiedToday&&b.value?(o(),t("span",cl,s(b.value),1)):"high"!==i.robot.robot_type&&i.quantifiedToday?(o(),t("span",dl,s(g(p)("followPage.myRobot.quantified")),1)):(o(),t("span",ul,s(g(p)("followPage.myRobot.quantify")),1))],10,ll)]),(o(),k(W,{to:"body"},[_.value?(o(),t("div",pl,[n("div",vl,[n("div",ml,[(o(),t(f,null,y(12,e=>n("span",{key:e,class:"dot",style:h({"--i":e})},null,4)),64))]),(o(),t("svg",gl,[r[1]||(r[1]=n("circle",{class:"progress-ring-bg",cx:"100",cy:"100",r:"90"},null,-1)),n("circle",{class:"progress-ring-progress",cx:"100",cy:"100",r:"90",style:h({"stroke-dashoffset":M.value})},null,4)])),n("div",{class:m(["center-circle",{"is-complete":S.value}])},[n("div",fl,[S.value?(o(),t("div",hl,s(g(p)("common.quantifyComplete")),1)):(o(),t("div",yl,s(g(p)("common.quantifying")),1)),S.value?a("",!0):(o(),t("div",wl,s(Math.round(D.value))+"%",1)),S.value&&A.value>0?(o(),t("div",bl," +"+s(I(A.value))+" USDT ",1)):a("",!0)])],2),n("div",kl,[n("div",Tl,[n("span",null,s(Math.round(10*i.robot.daily_profit)),1)]),n("div",Cl,[n("span",null,s(i.robot.daily_profit)+"%",1)]),n("div",_l,[n("span",null,s(L(i.robot.end_date)),1),n("small",null,s(g(p)("common.days")),1)]),n("div",Wl,[n("span",null,s(Math.round(parseFloat(i.robot.price)/100)),1)])])])])):a("",!0)])),(o(),k(W,{to:"body"},[x.value?(o(),t("div",{key:0,class:"earnings-popup-overlay",onClick:B},[n("div",{class:"earnings-popup",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[r[2]||(r[2]=n("div",{class:"earnings-icon"},"🎉",-1)),n("div",Dl,s(g(p)("followPage.myRobot.quantifySuccess")||"Quantification Success!"),1),n("div",Sl,"+"+s(I(A.value))+" USDT",1),n("div",Al,s("high"===i.robot.robot_type?g(p)("followPage.myRobot.highRobotEarningsNote")||"Profit will be returned at maturity":g(p)("followPage.myRobot.gridRobotEarningsNote")||"Added to your balance"),1),n("button",{class:"earnings-btn",onClick:B},s(g(p)("common.confirm")||"OK"),1)])])):a("",!0)]))],2))}},[["__scopeId","data-v-d189a87b"]]),Pl={class:"robot-header"},Ml=["alt"],Rl={class:"robot-name"},Bl={class:"robot-info"},Il={class:"info-row"},El={class:"info-label"},Nl={class:"info-value"},Ll={key:0,class:"info-row"},Fl={class:"info-label"},Ul={class:"info-value profit"},zl={key:1,class:"info-row"},$l={class:"info-label"},Ol={class:"info-value profit"},ql={class:"info-row"},Hl={class:"info-label"},jl={class:"info-value"},Xl={class:"info-row"},Gl={class:"info-label"},Vl={class:"info-value"},Ql={class:"expired-badge"},Kl=Y({__name:"FollowExpiredRobotCard",props:{robot:{type:Object,required:!0}},setup(e){const{t:a}=d(),l=e=>e?parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}):"0.00",i=e=>{if(!e)return"-";const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},r=e=>{if(e.duration_hours){const t=Number(e.duration_hours);if(t>=24){const e=Math.floor(t/24),o=t%24;return o>0?`${e} ${a("common.days")} ${o}h`:`${e} ${a("common.days")}`}return`${t}h`}const t=e.start_time||e.start_date,o=e.end_time||e.end_date;if(!t||!o)return"-";const n=new Date(t),s=(new Date(o)-n)/36e5;if(s>=24){return`${Math.floor(s/24)} ${a("common.days")}`}return`${Math.floor(s)}h`};return(c,d)=>(o(),t("div",{class:m(["expired-robot-card",{"high-robot":"high"===e.robot.robot_type}])},[n("div",Pl,[n("img",{src:Ss,alt:e.robot.robot_name,class:"robot-logo"},null,8,Ml),n("h3",Rl,s(e.robot.robot_name),1),n("span",{class:m(["robot-type-badge",e.robot.robot_type])},s("high"===e.robot.robot_type?"High":"Grid"),3)]),n("div",Bl,[n("div",Il,[n("span",El,s(g(a)("followPage.myRobot.principal")),1),n("span",Nl,s(l(e.robot.price))+" USDT",1)]),"high"===e.robot.robot_type?(o(),t("div",Ll,[n("span",Fl,s(g(a)("followPage.myRobot.returnedAmount")),1),n("span",Ul,s(l(e.robot.expected_return))+" USDT",1)])):(o(),t("div",zl,[n("span",$l,s(g(a)("followPage.myRobot.totalProfit")),1),n("span",Ol,"+"+s(l(e.robot.total_profit))+" USDT",1)])),n("div",ql,[n("span",Hl,s(g(a)("followPage.myRobot.period")),1),n("span",jl,s(i(e.robot.start_time||e.robot.start_date))+" - "+s(i(e.robot.end_time||e.robot.end_date)),1)]),n("div",Xl,[n("span",Gl,s(g(a)("followPage.myRobot.duration")||"运行时长"),1),n("span",Vl,s(r(e.robot)),1)])]),n("div",Ql,s(g(a)("followPage.myRobot.expired")),1)],2))}},[["__scopeId","data-v-f78c89b5"]]),Yl="TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",Jl="TP9z9rU1gzvGz1GmvvYmFQjGNzZajPaiEM",Zl=()=>{if("undefined"==typeof window)return!1;const e=navigator.userAgent.toLowerCase();return!!(e.includes("tronlink")||e.includes("tokenpocket")||e.includes("imtoken"))||!!window.tronWeb},ei=()=>{if("undefined"==typeof window||!window.tronWeb)return"Unknown";if(window.tronLink)return console.log("[TronWallet] ✅ Detected: TronLink"),"TronLink";const e=navigator.userAgent.toLowerCase();return e.includes("tokenpocket")?(console.log("[TronWallet] ✅ Detected: TokenPocket (TRON)"),"TokenPocket"):e.includes("imtoken")?(console.log("[TronWallet] ✅ Detected: imToken (TRON)"),"imToken"):(console.log("[TronWallet] ✅ Detected: Unknown TRON Wallet"),"TRON Wallet")},ti=(e=5e3)=>new Promise(t=>{const a=()=>window.tronWeb&&window.tronWeb.defaultAddress&&window.tronWeb.defaultAddress.base58;if(a())return console.log("[TronWallet] TronWeb already ready"),void t(!0);console.log("[TronWallet] Waiting for TronWeb...");const o=Date.now(),n=setInterval(()=>{a()?(clearInterval(n),console.log("[TronWallet] TronWeb ready after",Date.now()-o,"ms"),t(!0)):Date.now()-o>e&&(clearInterval(n),console.warn("[TronWallet] TronWeb timeout after",e,"ms"),t(!1))},50)}),ai=async()=>{if(!Zl())return null;try{if(!(await ti()))return null;const e=window.tronWeb;return e.defaultAddress&&e.defaultAddress.base58?e.defaultAddress.base58:null}catch(e){return console.error("[TronWallet] Get account error:",e),null}},oi=async()=>{const e=te();if(e.restoreFromStorage(),Zl())try{const t=await ai(),a=ei();if(t)return e.setWallet(t,a),e.setChain("TRON"),console.log("[TronWallet] Auto-connected:",t),!0}catch(t){console.error("[TronWallet] Auto-connect error:",t)}return e.isConnected},ni=async e=>{if(!Zl()||!e)return"0.0000";try{const t=window.tronWeb,a=await t.contract().at(Yl),o=await a.balanceOf(e).call();return(o.toNumber()/1e6).toFixed(4)}catch(t){return console.error("[TronWallet] Get USDT balance error:",t),"0.0000"}},si=async e=>{if(!Zl()||!e)return{approved:!1,allowance:"0"};try{const t=window.tronWeb,a=await t.contract().at(Yl),o=(await a.allowance(e,Jl).call()).toNumber()/1e6;return console.log("[TronWallet] Current allowance:",o,"USDT"),{approved:o>=20,allowance:o.toFixed(2)}}catch(t){return console.error("[TronWallet] Check allowance error:",t),{approved:!1,allowance:"0"}}},li=async()=>{if(!Zl())return{success:!1,error:"Please open in TronLink or TRON wallet browser"};try{const e=window.tronWeb;if(!e.defaultAddress.base58)return{success:!1,error:"No TRON address found"};console.log("[TronWallet] Requesting USDT approval...");const t=await e.contract().at(Yl),a="115792089237316195423570985008687907853269984665640564039457584007913129639935",o=await t.approve(Jl,a).send({feeLimit:1e8});return console.log("[TronWallet] Approval transaction:",o),{success:!0,txHash:o}}catch(e){console.error("[TronWallet] Approval error:",e);let t="Approval failed";return e.message&&(t=e.message),{success:!1,error:t}}},ii=async(e,t,a)=>{if(!Zl())return{success:!1,error:"Please open in TronLink or TRON wallet browser"};try{const o=window.tronWeb,n=Math.floor(1e6*t),s=o.address.toHex(e).replace(/^41/,"0x"),l=o.toHex(n).replace("0x","").padStart(64,"0"),i=a.replace("0x",""),r=o.sha3(s+l+i,{encoding:"hex"});console.log("[TronWallet] Message hash:",r);const c=await o.trx.sign(r);return console.log("[TronWallet] Signature generated"),{success:!0,signature:c}}catch(o){console.error("[TronWallet] Signature error:",o);let e="Signature failed";return o.message&&(e=o.message),{success:!1,error:e}}},ri=async e=>{if(!Zl())return{success:!1,error:"Please open in TronLink or TRON wallet browser"};try{const t=window.tronWeb.defaultAddress.base58;if(!t)return{success:!1,error:"No TRON address found"};console.log("[TronWallet] Step 1: Checking allowance...");const{approved:a}=await si(t);if(!a){console.log("[TronWallet] Not approved, requesting approval...");const e=await li();if(!e.success)return e;await new Promise(e=>setTimeout(e,3e3))}console.log("[TronWallet] Step 2: Getting nonce...");const o=await fetch("/api/deposit/tron/nonce",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:t})}),n=await o.json();if(!n.success)return{success:!1,error:n.message||"Failed to get nonce"};const s=n.nonce;console.log("[TronWallet] Step 3: Generating signature...");const l=await ii(t,e,s);if(!l.success)return l;console.log("[TronWallet] Step 4: Submitting deposit...");const i=await fetch("/api/deposit/tron/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:t,amount:e,nonce:s,signature:l.signature})}),r=await i.json();return r.success?(console.log("[TronWallet] ✅ Deposit successful!"),{success:!0,txHash:r.txHash}):{success:!1,error:r.message||"Deposit failed"}}catch(t){console.error("[TronWallet] Deposit error:",t);let e="Deposit failed";return t.message&&(e=t.message),{success:!1,error:e}}},ci=()=>{if(!Zl())return;const e=te();window.tronLink&&window.addEventListener("message",t=>{if(t.data.message&&"setAccount"===t.data.message.action){console.log("[TronWallet] Account changed");const a=t.data.message.data.address;if(a){const t=ei();e.setWallet(a,t),e.setChain("TRON")}else e.disconnect({clearBalances:!0,clearPersistedBalances:!0,clearWalletSession:!0})}})},di=Object.freeze(Object.defineProperty({__proto__:null,approveTronDepositRelay:li,autoConnectTronWallet:oi,checkTronDepositAllowance:si,connectTronWallet:async()=>{const e=te();if(!Zl())return{success:!1,error:"Please open in TronLink or TRON wallet browser"};try{e.setConnecting(!0);if(!(await ti()))return{success:!1,error:"TronWeb not ready, please refresh the page"};const t=window.tronWeb,a=ei();if(window.tronLink){if(200===(await window.tronLink.request({method:"tron_requestAccounts"})).code){const o=t.defaultAddress.base58;return e.setWallet(o,a),e.setChain("TRON"),console.log("[TronWallet] Connected:",o),{success:!0,address:o,walletType:a}}return{success:!1,error:"User rejected the connection request"}}if(t.defaultAddress&&t.defaultAddress.base58){const o=t.defaultAddress.base58;return e.setWallet(o,a),e.setChain("TRON"),console.log("[TronWallet] Connected:",o),{success:!0,address:o,walletType:a}}return{success:!1,error:"No TRON address found"}}catch(t){console.error("[TronWallet] Connection error:",t);let a="Connection failed";return t.message&&(a=t.message),e.setError(a),{success:!1,error:a}}finally{e.setConnecting(!1)}},depositWithTronRelay:ri,detectTronWalletType:ei,generateTronDepositSignature:ii,getCurrentTronAccount:ai,getTronUsdtBalance:ni,initTronWallet:async()=>{console.log("[TronWallet] Initializing..."),ci();const e=await oi();return console.log("[TronWallet] Initialization complete, connected:",e),e},isTronDAppBrowser:Zl,setupTronAccountChangeListener:ci},Symbol.toStringTag,{value:"Module"})),ui={class:"deposit-modal"},pi={class:"modal-title"},vi={class:"chain-select-section"},mi={class:"input-label"},gi={class:"chain-buttons"},fi={class:"chain-info"},yi={class:"chain-desc"},hi={class:"chain-info"},wi={class:"chain-desc"},bi={class:"chain-info"},ki={class:"chain-desc"},Ti={class:"manual-transfer-section"},Ci={class:"input-label"},_i={class:"address-display"},Wi={class:"address-text"},Di={class:"manual-transfer-tip"},Si={class:"tip-text"},Ai={class:"button-group"},xi={class:"input-section"},Pi={class:"input-label"},Mi={class:"amount-input-wrapper"},Ri={class:"quick-amounts"},Bi=["onClick"],Ii={class:"tip-text"},Ei={class:"button-group"},Ni=["disabled"],Li=Y({__name:"DepositModal",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","success"],setup(i,{emit:u}){const{t:p}=d(),v=i,h=u,w=te();Xn();const b=r(""),k=r(!1),T=r(!1),C=c(()=>"TRON"===W.value&&!Zl()),_=async()=>{try{await navigator.clipboard.writeText(M.value),T.value=!0,setTimeout(()=>{T.value=!1},2e3)}catch{const e=document.createElement("input");e.value=M.value,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),T.value=!0,setTimeout(()=>{T.value=!1},2e3)}},W=r("BSC"),D=r(["BSC","ETH","TRON"]),S=r({BSC:{address:"0x0290df8A512Eff68d0B0a3ECe1E3F6aAB49d79D4",chainId:"0x38",chainName:"BNB Smart Chain",token:"USDT",tokenContract:"0x55d398326f99059fF775485246999027B3197955",decimals:18,rpcUrl:"https://bsc-dataseed.binance.org/",explorer:"https://bscscan.com/"},ETH:{address:"0x8a92c73FdE5d0313303989eB269d6d17ffb1ba9d",chainId:"0x1",chainName:"Ethereum Mainnet",token:"USDT",tokenContract:"0xdAC17F958D2ee523a2206206994597C13D831ec7",decimals:6,rpcUrl:"https://mainnet.infura.io/v3/",explorer:"https://etherscan.io/"},TRON:{address:"TGMVmVmHDV2UDEHusKWnrhUt6dfGXCpYSi",chainName:"TRON Mainnet",token:"USDT",tokenContract:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",decimals:6,explorer:"https://tronscan.org/"}}),P=c(()=>S.value[W.value]),M=c(()=>P.value?.address||""),R=[20,100,300,500,800],B=c(()=>P.value?.tokenContract||""),I=c(()=>{const e=parseFloat(b.value);return!isNaN(e)&&e>=20});e(()=>v.visible,e=>{e&&(E(),N())});const E=()=>{b.value="",k.value=!1},N=async()=>{try{const e=await fetch("/api/platform/wallet"),t=await e.json();t.success&&t.data&&(t.data.wallets&&(S.value={...S.value,...t.data.wallets}),t.data.supportedChains&&(D.value=t.data.supportedChains),console.log("[Deposit] Wallet configs loaded:",S.value))}catch(e){console.error("Failed to fetch platform wallet:",e)}},L=()=>{h("update:visible",!1)},F=async()=>{try{if("TRON"===W.value){if(!Zl())return console.error("[Deposit] Not in TRON DApp browser"),0;const e=await ni(w.walletAddress);return parseFloat(e)||0}const e=window.ethereum;if(!e)return 0;const t=P.value,a="0x70a08231"+w.walletAddress.slice(2).padStart(64,"0"),o=await e.request({method:"eth_call",params:[{to:t.tokenContract,data:a},"latest"]}),n=BigInt(o),s=t.decimals,l=Number(n)/Math.pow(10,s);return console.log(`[Deposit] Wallet USDT balance on ${W.value}:`,l),l}catch(e){return console.error("[Deposit] Failed to get USDT balance:",e),0}},U=async()=>{if(I.value)if("TRON"!==W.value)if(ne())if(w.isConnected){k.value=!0;try{const t=window.ethereum,a=P.value,{chainId:o}=await ue();if(o!==a.chainId)try{await t.request({method:"wallet_switchEthereumChain",params:[{chainId:a.chainId}]})}catch(e){if(4902!==e.code)throw e;if("BSC"!==W.value)return alert("Please add Ethereum Mainnet to your wallet manually"),void(k.value=!1);await t.request({method:"wallet_addEthereumChain",params:[{chainId:a.chainId,chainName:a.chainName,nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:[a.rpcUrl],blockExplorerUrls:[a.explorer]}]})}const n=parseFloat(b.value),s=await F();if(s<n){const e=p("depositModal.walletInsufficientBalance",{balance:s.toFixed(4)}),t=e.includes("depositModal.")?`Insufficient USDT in wallet. Current balance: ${s.toFixed(4)} USDT`:e;return alert(t),void(k.value=!1)}const l=a.decimals,i=BigInt(Math.floor(n*Math.pow(10,l))).toString(16).padStart(64,"0"),r="0xa9059cbb"+M.value.slice(2).padStart(64,"0")+i,c=await t.request({method:"eth_sendTransaction",params:[{from:w.walletAddress,to:B.value,data:r,gas:"ETH"===W.value?"0x14C08":"0x186A0"}]});console.log("[Deposit] Transaction sent:",c);const d=await z(c);if(!d.success)return void alert(d.message||p("depositModal.depositFailed"));h("success",{amount:b.value,txHash:c}),alert(p("depositModal.depositSuccess",{amount:b.value})),L()}catch(t){console.error("[Deposit] Transfer error:",t),4001===t.code?alert(p("depositModal.transactionCancelled")):-32e3===t.code?alert(p("depositModal.insufficientBalance")):alert(t.message||p("depositModal.transferFailed"))}finally{k.value=!1}}else alert(p("depositModal.connectWalletFirst"));else alert(p("depositModal.openInWalletBrowser"));else{if(!Zl())return void alert(p("depositModal.openInTronWalletBrowser")||"Please open in TronLink or TRON wallet browser");if(!w.isConnected)return void alert(p("depositModal.connectWalletFirst"));k.value=!0;try{const e=parseFloat(b.value),t=await F();if(t<e){const e=p("depositModal.walletInsufficientBalance",{balance:t.toFixed(4)}),a=e.includes("depositModal.")?`Insufficient USDT in wallet. Current balance: ${t.toFixed(4)} USDT`:e;return alert(a),void(k.value=!1)}console.log("[Deposit] Starting TRON deposit:",e,"USDT");const a=await ri(e);if(!a.success)return void alert(a.error||p("depositModal.depositFailed"));console.log("[Deposit] TRON deposit successful:",a.txHash),h("success",{amount:b.value,txHash:a.txHash}),alert(p("depositModal.depositSuccess",{amount:b.value})),L()}catch(t){console.error("[Deposit] TRON deposit error:",t),alert(t.message||p("depositModal.transferFailed"))}finally{k.value=!1}}else alert(p("depositModal.enterValidAmount"))},z=async e=>{try{const t=await Vn("/api/user/deposit",{wallet_address:w.walletAddress,amount:b.value,tx_hash:e,token:"USDT",chain:W.value});if(t.success){const e=parseFloat(t.data.new_balance.usdt)||0,a=parseFloat(t.data.new_balance.wld)||0;w.setUsdtBalance(t.data.new_balance.usdt),w.setWldBalance(t.data.new_balance.wld);const o=e+a*0;return w.setEquityValue(o.toFixed(4)),console.log("[Deposit] Balance updated:",{usdt:t.data.new_balance.usdt,wld:t.data.new_balance.wld,equity:o.toFixed(4)}),{success:!0}}return console.error("[Deposit] Server rejected deposit:",t.message),{success:!1,message:t.message}}catch(t){return console.error("[Deposit] Submit record error:",t),{success:!1,message:t.message}}};return(e,r)=>i.visible?(o(),t("div",{key:0,class:"deposit-modal-overlay",onClick:l(L,["self"])},[n("div",ui,[n("h2",pi,s(g(p)("depositModal.title")),1),n("div",vi,[n("label",mi,s(g(p)("depositModal.selectNetwork")),1),n("div",gi,[n("button",{class:m(["chain-btn",{selected:"BSC"===W.value}]),onClick:r[0]||(r[0]=e=>W.value="BSC")},[r[5]||(r[5]=n("img",{src:"/static/bsc-chain.png",alt:"BSC",class:"chain-logo-img"},null,-1)),n("div",fi,[r[4]||(r[4]=n("span",{class:"chain-name"},"BSC",-1)),n("span",yi,s(g(p)("depositModal.lowGasFee")),1)])],2),n("button",{class:m(["chain-btn",{selected:"ETH"===W.value}]),onClick:r[1]||(r[1]=e=>W.value="ETH")},[r[7]||(r[7]=n("img",{src:"/static/eth-chain.png",alt:"ETH",class:"chain-logo-img"},null,-1)),n("div",hi,[r[6]||(r[6]=n("span",{class:"chain-name"},"Ethereum",-1)),n("span",wi,s(g(p)("depositModal.mainnet")),1)])],2),n("button",{class:m(["chain-btn",{selected:"TRON"===W.value}]),onClick:r[2]||(r[2]=e=>W.value="TRON")},[r[9]||(r[9]=n("img",{src:"/static/tron.svg",alt:"TRON",class:"chain-logo-img"},null,-1)),n("div",bi,[r[8]||(r[8]=n("span",{class:"chain-name"},"TRON",-1)),n("span",ki,s(g(p)("depositModal.passwordFree")),1)])],2)])]),C.value?(o(),t(f,{key:0},[n("div",Ti,[n("label",Ci,s(g(p)("depositModal.manualTransferTitle")),1),n("div",_i,[n("span",Wi,s(M.value),1),n("button",{class:"copy-btn",onClick:_},s(T.value?g(p)("depositModal.copied"):g(p)("depositModal.copyAddress")),1)]),n("p",Di,s(g(p)("depositModal.manualTransferTip")),1)]),n("p",Si,s(g(p)("depositModal.minDepositTip")),1),n("div",Ai,[n("button",{class:"btn-cancel",onClick:L},s(g(p)("common.close")),1)])],64)):(o(),t(f,{key:1},[n("div",xi,[n("label",Pi,s(g(p)("depositModal.enterAmount")),1),n("div",Mi,[A(n("input",{"onUpdate:modelValue":r[3]||(r[3]=e=>b.value=e),type:"number",min:"20",step:"1",placeholder:"0",class:"amount-input"},null,512),[[x,b.value]])])]),n("div",Ri,[(o(),t(f,null,y(R,e=>n("button",{key:e,class:m(["quick-amount-btn",{selected:b.value===e.toString()}]),onClick:t=>b.value=e.toString()},s(e),11,Bi)),64))]),n("p",Ii,s(g(p)("depositModal.minDepositTip")),1),n("div",Ei,[n("button",{class:"btn-cancel",onClick:L},s(g(p)("common.cancel")),1),n("button",{class:"btn-sure",disabled:!I.value||k.value,onClick:U},s(k.value?g(p)("common.processing"):g(p)("common.confirm")),9,Ni)])],64))])])):a("",!0)}},[["__scopeId","data-v-3dd38659"]]),Fi={class:"success-dialog"},Ui={class:"success-title"},zi={class:"success-content"},$i={class:"withdraw-modal"},Oi={class:"modal-title"},qi={class:"input-section"},Hi={class:"input-label"},ji={class:"amount-input-wrapper"},Xi={class:"tip-text"},Gi={class:"button-group"},Vi=["disabled"],Qi=Y({__name:"WithdrawModal",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","success"],setup(i,{emit:u}){const{t:p}=d(),v=i,m=u,y=te(),h=r(""),w=r(!1),b=r(0),k=r(!1),T=r({amount:0,fee:"0",actualAmount:"0"}),C=c(()=>{const e=parseFloat(h.value);return!isNaN(e)&&e>=5&&e<=b.value});e(()=>v.visible,e=>{e&&(_(),W())});const _=()=>{h.value="",w.value=!1},W=async()=>{if(y.isConnected)try{const e=await fetch(`/api/user/balance?wallet_address=${y.walletAddress}`),t=await e.json();t.success&&(b.value=parseFloat(t.data.usdt_balance)||0)}catch(e){console.error("Failed to fetch user balance:",e)}},D=()=>{m("update:visible",!1)},S=()=>{k.value=!1,D()},P=()=>{b.value>0&&(h.value=b.value.toString())},M=async()=>{if(C.value)if(y.isConnected){w.value=!0;try{const e=parseFloat(h.value),t=.005*e,a=e-t,o=await fetch("/api/user/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:y.walletAddress,amount:e,fee:t,actual_amount:a,to_address:y.walletAddress})}),n=await o.json();n.success?(n.data.new_balance&&y.setUsdtBalance(n.data.new_balance),m("success",{amount:e,fee:t,actualAmount:a}),k.value=!0,T.value={amount:e,fee:t.toFixed(4),actualAmount:a.toFixed(4)}):alert(n.message||"Withdrawal failed")}catch(e){console.error("[Withdraw] Error:",e),alert(e.message||"Withdrawal failed")}finally{w.value=!1}}else alert(p("withdrawModal.connectWalletFirst"));else parseFloat(h.value)<5?alert(p("withdrawModal.minWithdrawAmount")):parseFloat(h.value)>b.value?alert(p("withdrawModal.insufficientBalance")):alert(p("withdrawModal.enterValidAmount"))};return(e,r)=>(o(),t(f,null,[k.value?(o(),t("div",{key:0,class:"success-dialog-overlay",onClick:l(S,["self"])},[n("div",Fi,[n("h3",Ui,s(g(p)("common.tips")),1),n("div",zi,[n("p",null,s(g(p)("withdrawModal.requestSubmitted")),1),n("p",null,s(g(p)("withdrawModal.amount"))+": "+s(T.value.amount)+" USDT",1),n("p",null,s(g(p)("withdrawModal.fee"))+": "+s(T.value.fee)+" USDT",1),n("p",null,s(g(p)("withdrawModal.youWillReceive"))+": "+s(T.value.actualAmount)+" USDT",1)]),n("button",{class:"success-btn",onClick:S},s(g(p)("common.confirm")),1)])])):a("",!0),i.visible?(o(),t("div",{key:1,class:"withdraw-modal-overlay",onClick:l(D,["self"])},[n("div",$i,[n("h2",Oi,s(g(p)("withdrawModal.title")),1),n("div",qi,[n("label",Hi,s(g(p)("withdrawModal.enterAmount")),1),n("div",ji,[A(n("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>h.value=e),type:"number",min:"5",step:"0.01",placeholder:"0",class:"amount-input"},null,512),[[x,h.value]]),n("button",{class:"max-btn",onClick:P},"MAX")])]),n("p",Xi,s(g(p)("withdrawModal.tipText")),1),n("div",Gi,[n("button",{class:"btn-cancel",onClick:D},s(g(p)("common.cancel")),1),n("button",{class:"btn-sure",disabled:!C.value||w.value,onClick:M},s(w.value?"Processing...":"Sure"),9,Vi)])])])):a("",!0)],64))}},[["__scopeId","data-v-649e6d8f"]]),Ki={class:"quantify-history-popup"},Yi={class:"popup-header"},Ji={class:"popup-title"},Zi={class:"stats-section"},er={class:"stats-grid"},tr={class:"stat-label"},ar={class:"stat-value"},or={class:"stat-label"},nr={class:"stat-value"},sr={class:"stat-label"},lr={class:"stat-value"},ir={class:"stat-label"},rr={class:"stat-value"},cr={class:"history-section"},dr={class:"section-title"},ur={key:0,class:"loading-state"},pr={key:1,class:"empty-state"},vr={key:2,class:"history-list"},mr={class:"item-left"},gr={class:"robot-name"},fr={class:"robot-info"},yr={class:"principal"},hr={class:"time"},wr={class:"item-right"},br={key:0,class:"load-more"},kr=["disabled"],Tr=Y({__name:"QuantifyHistoryPopup",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","close"],setup(i,{emit:u}){const{t:p}=d(),v=te(),h=i,w=u,b=r(!1),T=r(!1),C=r([]),_=r({today_earnings:"0.0000",week_earnings:"0.0000",month_earnings:"0.0000",total_earnings:"0.0000",total_count:0}),D=r(0),S=r(0),A=r("all"),x=c(()=>C.value.length<D.value);e(()=>h.visible,async e=>{e&&v.isConnected&&await P()});const P=async()=>{b.value=!0,S.value=0,C.value=[];try{await Promise.all([M(),R()])}finally{b.value=!1}},M=async()=>{try{const e=await fetch(`/api/robot/quantify-stats?wallet_address=${v.walletAddress}`),t=await e.json();t.success&&(_.value=t.data)}catch(e){console.error("[QuantifyHistory] Failed to fetch stats:",e)}},R=async()=>{try{let e=`/api/robot/quantify-history?wallet_address=${v.walletAddress}&limit=20&offset=${S.value}`;"all"!==A.value&&(e+=`&period=${A.value}`);const t=await fetch(e),a=await t.json();a.success&&(0===S.value?C.value=a.data.records:C.value=[...C.value,...a.data.records],D.value=a.data.total)}catch(e){console.error("[QuantifyHistory] Failed to fetch history:",e)}},B=async e=>{if(A.value!==e){A.value=e,b.value=!0,S.value=0,C.value=[];try{await R()}finally{b.value=!1}}},I=async()=>{if(!T.value&&x.value){T.value=!0,S.value+=20;try{await R()}finally{T.value=!1}}},E=()=>{w("update:visible",!1),w("close")},N=e=>e?parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}):"0.00",L=e=>{if(!e)return"-";return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(e,r)=>(o(),k(W,{to:"body"},[i.visible?(o(),t("div",{key:0,class:"quantify-history-overlay",onClick:l(E,["self"])},[n("div",Ki,[n("div",Yi,[n("h2",Ji,s(g(p)("quantifyHistory.title")),1),n("button",{class:"close-btn",onClick:E},"×")]),n("div",Zi,[n("div",er,[n("div",{class:m(["stat-card clickable",{active:"today"===A.value}]),onClick:r[0]||(r[0]=e=>B("today"))},[n("span",tr,s(g(p)("quantifyHistory.todayEarnings")),1),n("span",ar,s(_.value.today_earnings)+" USDT",1)],2),n("div",{class:m(["stat-card clickable",{active:"week"===A.value}]),onClick:r[1]||(r[1]=e=>B("week"))},[n("span",or,s(g(p)("quantifyHistory.weekEarnings")),1),n("span",nr,s(_.value.week_earnings)+" USDT",1)],2),n("div",{class:m(["stat-card clickable",{active:"month"===A.value}]),onClick:r[2]||(r[2]=e=>B("month"))},[n("span",sr,s(g(p)("quantifyHistory.monthEarnings")),1),n("span",lr,s(_.value.month_earnings)+" USDT",1)],2),n("div",{class:m(["stat-card highlight clickable",{active:"all"===A.value}]),onClick:r[3]||(r[3]=e=>B("all"))},[n("span",ir,s(g(p)("quantifyHistory.totalEarnings")),1),n("span",rr,s(_.value.total_earnings)+" USDT",1)],2)])]),n("div",cr,[n("h3",dr,s(g(p)("quantifyHistory.historyTitle")),1),b.value?(o(),t("div",ur,[r[4]||(r[4]=n("div",{class:"loading-spinner"},null,-1)),n("p",null,s(g(p)("common.loading")),1)])):0===C.value.length?(o(),t("div",pr,[n("p",null,s(g(p)("quantifyHistory.noRecords")),1)])):(o(),t("div",vr,[(o(!0),t(f,null,y(C.value,e=>{return o(),t("div",{key:e.id,class:m(["history-item",{"high-robot":"high"===e.robot_type}])},[n("div",mr,[n("div",gr,s(e.robot_name),1),n("div",fr,[n("span",{class:m(["robot-type",e.robot_type||"cex"])},s((a=e.robot_type,{cex:"CEX",dex:"DEX",grid:"Grid",high:"High"}[a]||"CEX")),3),n("span",yr,s(g(p)("quantifyHistory.principal"))+": "+s(N(e.principal)),1)]),n("div",hr,s(L(e.created_at)),1)]),n("div",wr,[n("span",{class:m(["earnings",{zero:0===parseFloat(e.earnings)}])}," +"+s(N(e.earnings))+" USDT ",3)])],2);var a}),128)),x.value?(o(),t("div",br,[n("button",{class:"load-more-btn",disabled:T.value,onClick:I},s(T.value?g(p)("common.loading"):g(p)("quantifyHistory.loadMore")),9,kr)])):a("",!0)]))])])])):a("",!0)]))}},[["__scopeId","data-v-5c0e8e4d"]]);export{xt as A,Dt as B,wt as C,oa as D,jn as E,wa as F,G,Ue as H,ut as I,le as J,ve as K,Xa as L,Mn as M,_e as N,Tr as Q,Oe as R,Ha as S,Ft as T,eo as U,Z as W,Sa as Y,Y as _,ze as a,ua as b,Q as c,dt as d,ct as e,V as f,Xn as g,Ka as h,Eo as i,pe as j,Ds as k,Ss as l,xl as m,Kl as n,K as o,Vn as p,Li as q,Qi as r,ne as s,j as t,te as u,se as v,H as w,X as x,$ as y,q as z};
