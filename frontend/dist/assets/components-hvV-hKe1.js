import{w as e,c as a,a as t,o,b as s,t as n,d as l,e as i,r,f as c,u as d,g as u,h as p,i as v,n as m,j as g,F as h,k as y,l as f,m as b,p as w,q as k,s as _,v as C,x as S,T as x,y as T,z as D,A,B as M}from"./vue-vendor-Th7sVZCl.js";import{S as B,F as P,P as I,W,B as E,a as R,b as L,A as $,c as z,d as F}from"./vendor-Bf7WBET-.js";const U=async(e,a={},t=null)=>{try{const o={wallet_address:localStorage.getItem("walletAddress")||null,action_type:e,action_detail:a,page_url:t||window.location.pathname,referral_code:localStorage.getItem("vitu_referral_code")||null};fetch("/api/track-behavior",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),keepalive:!0}).catch(()=>{})}catch(o){console.debug("[Tracker] Error:",o.message)}},N=e=>{U("page_view",{page:e})},q=e=>{U("deposit",{amount:e})},O=(e,a)=>{U("robot_purchase",{robot:e,price:a})},H=e=>{U("withdraw",{amount:e})},j=e=>{U("referral_visit",{code:e})},X="/static/one/1.png",Q="/static/YAOQI/10.png",V="/static/one/3.png",G=(e,a)=>{const t=e.__vccOpts||e;for(const[o,s]of a)t[o]=s;return t},K={class:"alert-text"},Y=G({__name:"WalletAlert",props:{visible:{type:Boolean,default:!1},message:{type:String,default:"Wallet not connected"}},emits:["update:visible"],setup(i,{emit:r}){const c=i,d=r,u=()=>{d("update:visible",!1)};let p=null;return e(()=>c.visible,e=>{e&&(p&&clearTimeout(p),c.visible&&(p=setTimeout(()=>{u()},3e3)))}),(e,r)=>i.visible?(o(),a("div",{key:0,class:"wallet-alert-overlay",onClick:u},[s("div",{class:"wallet-alert-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[r[1]||(r[1]=s("div",{class:"alert-icon"},[s("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none"},[s("circle",{cx:"20",cy:"20",r:"20",fill:"#ffffff"}),s("text",{x:"20",y:"28","text-anchor":"middle","font-size":"28","font-weight":"bold",fill:"#000000"},"!")])],-1)),s("div",K,n(i.message),1)])])):t("",!0)}},[["__scopeId","data-v-af34239a"]]),J="vitu_wallet_balances",Z=i("wallet",()=>{const a=r(!1),t=r(""),o=r(""),s=r(!1),n=r(""),l=r(""),i=(()=>{try{const e=localStorage.getItem(J);if(e){const a=JSON.parse(e);return console.log("[Wallet] Loaded persisted balances:",a),a}}catch(e){console.error("[Wallet] Failed to load persisted balances:",e)}return null})(),d=r(i?.usdt||"0.0000"),u=r(i?.wld||"0.0000"),p=r(i?.equity||"0.0000"),v=r("0.00"),m=r(!1);e([d,u,p],([e,a,t])=>{"0.0000"===e&&"0.0000"===a||((e,a,t)=>{try{localStorage.setItem(J,JSON.stringify({usdt:e,wld:a,equity:t,ts:Date.now()}))}catch(o){}})(e,a,t)});const g=c(()=>o.value?`ID: ${o.value}`:""),h=e=>e?e.slice(-8).toLowerCase():"",y=e=>{if(null==e||""===e)return"0.0000";const a=String(e),t=parseFloat(a);return!isFinite(t)||isNaN(t)?"0.0000":t>=1e15?(t/1e15).toFixed(2)+"Q":t>=1e12?(t/1e12).toFixed(2)+"T":t>=1e9?(t/1e9).toFixed(2)+"B":t>=1e6?(t/1e6).toFixed(2)+"M":t>=1e5?(t/1e3).toFixed(2)+"K":t.toFixed(4)};return{isConnected:a,walletAddress:t,walletShortId:o,isConnecting:s,errorMessage:n,walletType:l,usdtBalance:d,wldBalance:u,equityValue:p,todayPnl:v,isLoadingBalance:m,displayWalletId:g,setWallet:(e,i="Unknown")=>{t.value=e,o.value=h(e),l.value=i,a.value=!0,s.value=!1,n.value="",localStorage.setItem("walletAddress",e),localStorage.setItem("walletType",i),console.log("[Wallet] Connected:",{address:e,shortId:o.value,type:i})},disconnect:(e={})=>{const{clearBalances:i=!0,clearPersistedBalances:r=!0,clearWalletSession:c=!0}=e;s.value=!1,n.value="",c&&(t.value="",o.value="",l.value="",a.value=!1,localStorage.removeItem("walletAddress"),localStorage.removeItem("walletType")),i&&(d.value="0.0000",u.value="0.0000",p.value="0.0000",v.value="0.00",m.value=!1),r&&localStorage.removeItem(J),console.log("[Wallet] Disconnected",{clearBalances:i,clearPersistedBalances:r,clearWalletSession:c})},setConnecting:e=>{s.value=e},setError:e=>{n.value=e,s.value=!1},restoreFromStorage:()=>{const e=localStorage.getItem("walletAddress"),s=localStorage.getItem("walletType");e&&(t.value=e,o.value=h(e),l.value=s||"Unknown",a.value=!0,console.log("[Wallet] Restored from storage:",{address:e,shortId:o.value,type:s}))},generateShortId:h,setUsdtBalance:e=>{d.value=y(e)},setWldBalance:e=>{u.value=y(e)},setEquityValue:e=>{p.value=y(e)},setTodayPnl:e=>{v.value=e},setLoadingBalance:e=>{m.value=e},updateBalances:e=>{void 0!==e.usdt&&(d.value=y(e.usdt)),void 0!==e.wld&&(u.value=y(e.wld)),void 0!==e.equity&&(p.value=y(e.equity)),void 0!==e.pnl&&(v.value=e.pnl),console.log("[Wallet] Balances updated:",{usdt:d.value,wld:u.value,equity:p.value,pnl:v.value})},resetBalances:()=>{d.value="0.0000",u.value="0.0000",p.value="0.0000",v.value="0.00",m.value=!1},formatBalance:y}});let ee=!0,ae=null;const te=()=>!("undefined"==typeof window||!window.ethereum),oe=()=>{if("undefined"==typeof window||!window.ethereum)return console.log("[Wallet] detectWalletType: No ethereum object found"),"Unknown";const e=window.ethereum;return console.log("[Wallet] detectWalletType - Available wallet flags:",{isTokenPocket:e.isTokenPocket,isMetaMask:e.isMetaMask,isImToken:e.isImToken,isTrust:e.isTrust,isCoinbaseWallet:e.isCoinbaseWallet,isOkxWallet:e.isOkxWallet,isOKExWallet:e.isOKExWallet,isBitKeep:e.isBitKeep}),e.isTokenPocket?(console.log("[Wallet] ✅ Detected: TokenPocket"),"TokenPocket"):e.isMetaMask?(console.log("[Wallet] ✅ Detected: MetaMask"),"MetaMask"):e.isImToken?(console.log("[Wallet] ✅ Detected: imToken"),"imToken"):e.isTrust?(console.log("[Wallet] ✅ Detected: Trust Wallet"),"Trust Wallet"):e.isCoinbaseWallet?(console.log("[Wallet] ✅ Detected: Coinbase Wallet"),"Coinbase Wallet"):e.isOkxWallet||e.isOKExWallet?(console.log("[Wallet] ✅ Detected: OKX Wallet"),"OKX Wallet"):e.isBitKeep?(console.log("[Wallet] ✅ Detected: Bitget Wallet"),"Bitget Wallet"):(console.log("[Wallet] ⚠️ Detected: Unknown Wallet"),"Unknown Wallet")},se=async()=>{if(!te())return null;try{const e=window.ethereum,a=await e.request({method:"eth_accounts"});return a&&a.length>0?a[0]:null}catch(e){return console.error("[Wallet] Get accounts error:",e),null}},ne=async()=>{console.log("[Wallet] Initializing..."),ee=!0,ae&&clearTimeout(ae),(()=>{if(!te())return;const e=Z(),a=window.ethereum;a.on("accountsChanged",a=>{if(console.log("[Wallet] Accounts changed:",a,"isInitializing:",ee),a&&a.length>0){const t=oe(),o=a[0],s=(e.walletAddress||"").toLowerCase();o&&o.toLowerCase()!==s&&(localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet")),e.setWallet(o,t)}else{if(ee)return void console.log("[Wallet] Ignoring empty accounts during initialization");if(localStorage.getItem("walletAddress"))return console.log("[Wallet] Empty accounts but have saved address, waiting..."),void setTimeout(async()=>{await se()||(console.log("[Wallet] No reconnection, disconnecting"),localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet"),e.disconnect({clearBalances:!1,clearPersistedBalances:!1,clearWalletSession:!0}))},2e3);localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet"),e.disconnect({clearBalances:!0,clearPersistedBalances:!0,clearWalletSession:!0})}}),a.on("chainChanged",e=>{console.log("[Wallet] Chain changed:",e)}),a.on("disconnect",a=>{console.log("[Wallet] Disconnect event:",a,"isInitializing:",ee),ee?console.log("[Wallet] Ignoring disconnect during initialization"):localStorage.getItem("walletAddress")?setTimeout(async()=>{await se()||(localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet"),e.disconnect({clearBalances:!1,clearPersistedBalances:!1,clearWalletSession:!0}))},2e3):(localStorage.removeItem("wallet_auth_token"),localStorage.removeItem("wallet_auth_token_exp"),localStorage.removeItem("wallet_auth_wallet"),e.disconnect({clearBalances:!0,clearPersistedBalances:!0,clearWalletSession:!0}))})})();const e=await(async()=>{const e=Z();if(e.restoreFromStorage(),te())try{const a=await se(),t=oe();if(a)return e.setWallet(a,t),console.log("[Wallet] Auto-connected:",a),!0}catch(a){console.error("[Wallet] Auto-connect error:",a)}return e.isConnected})();return console.log("[Wallet] Initialization complete, connected:",e),ae=setTimeout(()=>{ee=!1,console.log("[Wallet] Initialization protection disabled")},3e3),e},le=async()=>{const e=Z();if(!e.isConnected||!e.walletAddress)return!1;const a=localStorage.getItem("vitu_referral_code");if(!a)return!0;if(a.toLowerCase()===e.walletAddress.slice(-8).toLowerCase())return localStorage.removeItem("vitu_referral_code"),!0;try{console.log("[Wallet] Ensuring referral bound, code:",a);const t=await fetch("/api/invite/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:e.walletAddress,referrer_code:a})});return(await t.json()).success&&(console.log("[Wallet] Referral bound successfully!"),localStorage.removeItem("vitu_referral_code")),!0}catch(t){return console.error("[Wallet] Failed to bind referral:",t),!1}},ie={key:0,class:"eye-care-overlay"},re={class:"nav-container"},ce={class:"nav-left"},de=["title"],ue={key:0,class:"wallet-text wallet-connected"},pe={key:1,class:"wallet-text"},ve={class:"language-text"},me=["onClick"],ge={class:"lang-name"},he={key:0,class:"check-icon"},ye=G({__name:"Navigation",setup(e){const{t:i,locale:b}=d(),w=Z(),k=r(!1),_=r(0),C=r(!1),S=r(!1),x=r(!1),T=r([{code:"en",name:"English"},{code:"ar",name:"العربية"},{code:"id",name:"Indonesia"},{code:"vi",name:"Tiếng Việt"},{code:"fr",name:"Français"},{code:"tr",name:"Türkçe"},{code:"zu",name:"Iingizimu Afrika"},{code:"es",name:"España"},{code:"pt",name:"Portugal"},{code:"de",name:"Deutsch"},{code:"ms",name:"Melayu"},{code:"uk",name:"Україна"},{code:"zh-tw",name:"繁體中文"}]),D=c(()=>{const e=T.value.find(e=>e.code===b.value);return e?e.name:"English"}),A=()=>{const e=window.scrollY;k.value=e>50,_.value=e<=100?e/100:1},M=()=>{C.value=!C.value},B=()=>{S.value=!S.value,localStorage.setItem("eyeCareMode",S.value),console.log("Eye Care Mode:",S.value?"ON":"OFF")},P=async()=>{var e;if(w.isConnected)console.log("[Navigation] Wallet already connected:",w.walletAddress);else if(te()){console.log("[Navigation] In DApp browser, attempting to connect...");const a=await(async()=>{const e=Z();if(!te())return{success:!1,error:"Please open in wallet browser (TokenPocket, MetaMask, etc.)"};try{e.setConnecting(!0);const a=window.ethereum,t=oe();console.log("[Wallet] Detected wallet type:",t);const o=await a.request({method:"eth_requestAccounts"});if(o&&o.length>0){const a=o[0];return e.setWallet(a,t),{success:!0,address:a,walletType:t}}return e.setError("No accounts found"),{success:!1,error:"No accounts found"}}catch(a){console.error("[Wallet] Connection error:",a);let t="Connection failed";return 4001===a.code?t="User rejected the connection request":-32002===a.code?t="Connection request pending, please check your wallet":a.message&&(t=a.message),e.setError(t),{success:!1,error:t}}})();a.success?(e=w.walletAddress,U("wallet_connect",{wallet:e}),await le()):(console.error("[Navigation] Connection failed:",a.error),x.value=!0)}else console.log("[Navigation] Not in DApp browser, showing alert"),x.value=!0},I=e=>{const a=document.querySelector(".nav-right");a&&!a.contains(e.target)&&(C.value=!1)};return u(async()=>{window.addEventListener("scroll",A),document.addEventListener("click",I);"true"===localStorage.getItem("eyeCareMode")&&(S.value=!0);try{await ne(),console.log("[Navigation] Wallet initialized, connected:",w.isConnected),w.isConnected&&await le()}catch(e){console.error("[Navigation] Wallet initialization error:",e)}}),p(()=>{window.removeEventListener("scroll",A),document.removeEventListener("click",I)}),(e,r)=>(o(),a(h,null,[S.value?(o(),a("div",ie)):t("",!0),s("nav",{class:m(["navigation",{scrolled:k.value}]),style:f({backgroundColor:`rgba(0, 0, 0, ${_.value})`})},[s("div",re,[s("div",ce,[s("img",{src:X,alt:"Logo",class:m(["logo-icon",{"eye-care-active":S.value}]),draggable:"false",onClick:B,title:S.value?"Disable Eye Care Mode":"Enable Eye Care Mode"},null,10,de)]),s("div",{class:"nav-center",onClick:P},[r[2]||(r[2]=s("img",{src:Q,alt:"Wallet",class:"wallet-icon",draggable:"false"},null,-1)),g(w).isConnected?(o(),a("span",ue," ID: "+n(g(w).walletShortId),1)):(o(),a("span",pe,n(g(i)("nav.connectWallet")),1))]),s("div",{class:"nav-right",onClick:M},[r[4]||(r[4]=s("img",{src:V,alt:"Globe",class:"globe-icon",draggable:"false"},null,-1)),s("span",ve,n(D.value),1),s("span",{class:m(["arrow-icon",{"arrow-up":C.value}])},"∨",2),C.value?(o(),a("div",{key:0,class:"language-dropdown",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[r[3]||(r[3]=s("div",{class:"dropdown-triangle"},null,-1)),(o(!0),a(h,null,y(T.value,e=>(o(),a("div",{key:e.code,class:m(["language-option",{active:g(b)===e.code}]),onClick:a=>(e=>{b.value=e.code,C.value=!1,localStorage.setItem("language",e.code),console.log("Selected language:",e.code,e.name)})(e)},[s("span",ge,n(e.name),1),g(b)===e.code?(o(),a("i",he,"✓")):t("",!0)],10,me))),128))])):t("",!0)])])],6),v(Y,{visible:x.value,"onUpdate:visible":r[1]||(r[1]=e=>x.value=e)},null,8,["visible"])],64))}},[["__scopeId","data-v-a2605761"]]),fe=()=>{const e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")&&!e.includes("chromium")},be=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,we=()=>!(!fe()&&!be())||(!!(navigator.deviceMemory&&navigator.deviceMemory<4)||(!!(navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4)||!!window.matchMedia?.("(prefers-reduced-motion: reduce)").matches)),ke=()=>!fe()&&!be()&&(!we()&&!window.matchMedia?.("(prefers-reduced-motion: reduce)").matches),_e=e=>we()?Math.floor(.3*e):e,Ce={key:0,class:"fallback-container"},Se={class:"particles-static"},xe=G({__name:"MaintenanceBackground3D",setup(e){const t=r(null),n=r(ke()),l=e=>{const a=137.508*e;return{left:a%100+"%",top:1.618*a%100+"%",animationDelay:.3*e+"s",opacity:.3+e%5*.1}};let i,c,d,p,v,m,g=0,w=0,k=0,_=window.innerWidth/2,C=window.innerHeight/2,S=null,x=!1;const T=we(),D=T?25:50,A=T?25:50,M=_e(200),F=_e(200),U=T?30:100,N=[],q=()=>{n.value&&t.value?(console.log("[MaintenanceBackground3D] Initializing 3D background"),i=new B,i.fog=new P(328965,.002),c=new I(75,window.innerWidth/window.innerHeight,1,3e3),c.position.z=1e3,c.position.y=200,d=new W({alpha:!0,antialias:!T,powerPreference:"low-power"}),d.setPixelRatio((()=>{const e=window.devicePixelRatio||1;return fe()||be()?Math.min(e,1.5):Math.min(e,2)})()),d.setSize(window.innerWidth,window.innerHeight),t.value.appendChild(d.domElement),O(),H(),j(),document.addEventListener("mousemove",Q),window.addEventListener("resize",V)):console.log("[MaintenanceBackground3D] Using fallback mode (CSS background)")},O=()=>{const e=new E,a=new Float32Array(D*A*3);let t=0;for(let s=0;s<D;s++)for(let e=0;e<A;e++)a[t]=80*s-2e3,a[t+1]=0,a[t+2]=80*e-2e3,t+=3;e.setAttribute("position",new R(a,3));const o=new L({color:4235007,size:4,transparent:!0,opacity:.8,blending:$,sizeAttenuation:!0});p=new z(e,o),i.add(p)},H=()=>{const e=new E,a=new Float32Array(3*M),t=new Float32Array(M);for(let s=0;s<M;s++)a[3*s]=4e3*(Math.random()-.5),a[3*s+1]=2e3*Math.random()+500,a[3*s+2]=4e3*(Math.random()-.5),t[s]=10*Math.random()+20;e.setAttribute("position",new R(a,3)),e.setAttribute("velocity",new R(t,1));const o=new L({color:10930431,size:3,transparent:!0,opacity:.6,blending:$});v=new z(e,o),i.add(v)},j=()=>{const e=new E,a=F*U,t=new Float32Array(3*a),o=new Float32Array(3*a);for(let n=0;n<a;n++)t[3*n+1]=-1e4,o[3*n]=1,o[3*n+1]=1,o[3*n+2]=1;e.setAttribute("position",new R(t,3)),e.setAttribute("color",new R(o,3));const s=new L({size:4,vertexColors:!0,transparent:!0,opacity:1,blending:$});m=new z(e,s),i.add(m);for(let n=0;n<U;n++)N.push({active:!1,startIndex:n*F,age:0,positions:[],velocities:[]})},X=(e,a,t)=>{const o=N.find(e=>!e.active);if(!o)return;o.active=!0,o.age=0;const s=m.geometry.attributes.position.array,n=m.geometry.attributes.color.array;for(let l=0;l<F;l++){const i=o.startIndex+l;s[3*i]=e,s[3*i+1]=a,s[3*i+2]=t;const r=Math.random()*Math.PI*2,c=8*Math.random()+4,d=12*Math.random()+8;o.velocities[l]={x:Math.cos(r)*c,y:d,z:Math.sin(r)*c},n[3*i]=.4+.4*Math.random(),n[3*i+1]=.8+.2*Math.random(),n[3*i+2]=1}m.geometry.attributes.position.needsUpdate=!0,m.geometry.attributes.color.needsUpdate=!0},Q=e=>{w=e.clientX-_,k=e.clientY-C},V=()=>{c&&d&&(_=window.innerWidth/2,C=window.innerHeight/2,c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight))};let G=0;const K=1e3/(T?30:60),Y=e=>{if(!x)return;S=requestAnimationFrame(Y);const a=e-G;a<K||(G=e-a%K,Z())},J=(e,a,t)=>{const o=(e+2e3)/80,s=(a+2e3)/80;return 50*Math.sin(.3*(o+t))+50*Math.sin(.5*(s+t))+20*Math.sin(.2*(o+s+t))},Z=()=>{if(!(i&&c&&d&&p&&v&&m))return;c.position.x+=.02*(w-c.position.x),c.position.y+=.02*(200-k-c.position.y),c.lookAt(i.position);const e=p.geometry.attributes.position.array;let a=0;for(let n=0;n<D;n++)for(let t=0;t<A;t++)e[a+1]=50*Math.sin(.3*(n+g))+50*Math.sin(.5*(t+g))+20*Math.sin(.2*(n+t+g)),a+=3;p.geometry.attributes.position.needsUpdate=!0,g+=.05;const t=v.geometry.attributes.position.array,o=v.geometry.attributes.velocity.array;for(let n=0;n<M;n++){t[3*n+1]-=o[n];const e=t[3*n],a=t[3*n+2],s=J(e,a,g);t[3*n+1]<s&&(X(e,s,a),t[3*n]=4e3*(Math.random()-.5),t[3*n+1]=1e3*Math.random()+1e3,t[3*n+2]=4e3*(Math.random()-.5))}v.geometry.attributes.position.needsUpdate=!0;const s=m.geometry.attributes.position.array;N.forEach(e=>{if(e.active)if(e.age++,e.age>40){e.active=!1;for(let a=0;a<F;a++)s[3*(e.startIndex+a)+1]=-1e4}else for(let a=0;a<F;a++){const t=e.startIndex+a,o=e.velocities[a];s[3*t]+=o.x,s[3*t+1]+=o.y,s[3*t+2]+=o.z,o.y-=.5}}),m.geometry.attributes.position.needsUpdate=!0,d.render(i,c)};return u(()=>{n.value&&(q(),x=!0,Y(performance.now()))}),b(()=>{x=!1,S&&(cancelAnimationFrame(S),S=null),document.removeEventListener("mousemove",Q),window.removeEventListener("resize",V),d&&(d.dispose(),d.forceContextLoss(),d=null),i&&(i.traverse(e=>{e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}),i=null),c=null,p=null,v=null,m=null}),(e,i)=>n.value?(o(),a("div",{key:1,ref_key:"container",ref:t,class:"three-container"},null,512)):(o(),a("div",Ce,[i[0]||(i[0]=s("div",{class:"gradient-bg"},null,-1)),s("div",Se,[(o(),a(h,null,y(20,e=>s("div",{key:e,class:"particle",style:f(l(e))},null,4)),64))])]))}},[["__scopeId","data-v-ee6f7fe1"]]),Te={key:0,class:"maintenance-overlay"},De={class:"maintenance-content"},Ae={class:"maintenance-title"},Me={class:"maintenance-message"},Be={class:"timer-container"},Pe={class:"timer-text"},Ie=G({__name:"MaintenanceOverlay",props:{isVisible:{type:Boolean,default:!1},maintenanceData:{type:Object,default:()=>({title:"",message:"",estimated_duration:120,translations:{}})}},setup(l){const i=l,{locale:p}=d(),m=["en","zh-tw","ar","de","es","fr","id","ms","pt","tr","uk","vi","zu"],g={US:"en",GB:"en",AU:"en",CA:"en",NZ:"en",IE:"en",SG:"en",PH:"en",IN:"en",TW:"zh-tw",HK:"zh-tw",MO:"zh-tw",CN:"zh-tw",SA:"ar",AE:"ar",EG:"ar",MA:"ar",DZ:"ar",TN:"ar",LY:"ar",JO:"ar",LB:"ar",KW:"ar",QA:"ar",BH:"ar",OM:"ar",YE:"ar",IQ:"ar",SY:"ar",PS:"ar",SD:"ar",DE:"de",AT:"de",CH:"de",LI:"de",LU:"de",ES:"es",MX:"es",AR:"es",CO:"es",CL:"es",PE:"es",VE:"es",EC:"es",GT:"es",CU:"es",BO:"es",DO:"es",HN:"es",PY:"es",SV:"es",NI:"es",CR:"es",PA:"es",UY:"es",PR:"es",FR:"fr",BE:"fr",MC:"fr",SN:"fr",CI:"fr",ML:"fr",NE:"fr",BF:"fr",TG:"fr",BJ:"fr",GN:"fr",CG:"fr",GA:"fr",TD:"fr",CF:"fr",CM:"fr",MG:"fr",CD:"fr",RW:"fr",BI:"fr",HT:"fr",ID:"id",MY:"ms",BN:"ms",PT:"pt",BR:"pt",AO:"pt",MZ:"pt",GW:"pt",TL:"pt",CV:"pt",ST:"pt",TR:"tr",CY:"tr",UA:"uk",VN:"vi",ZA:"zu",JP:"en",KR:"en",RU:"uk",TH:"en",PK:"ar",BD:"en",NL:"de",PL:"uk",IT:"es",RO:"es",CZ:"de",SE:"de",NO:"de",DK:"de",FI:"de",GR:"en",IL:"ar",IR:"ar",AF:"ar",NG:"en",KE:"en",GH:"en",ET:"en",TZ:"en",UG:"en",ZW:"en",ZM:"en",MM:"en",KH:"en",LA:"en",NP:"en",LK:"en"},h={en:"en","en-us":"en","en-gb":"en","en-au":"en","en-ca":"en",zh:"zh-tw","zh-cn":"zh-tw","zh-tw":"zh-tw","zh-hk":"zh-tw",ar:"ar","ar-sa":"ar","ar-ae":"ar","ar-eg":"ar",de:"de","de-de":"de","de-at":"de","de-ch":"de",es:"es","es-es":"es","es-mx":"es","es-ar":"es",fr:"fr","fr-fr":"fr","fr-ca":"fr","fr-be":"fr",id:"id","id-id":"id",ms:"ms","ms-my":"ms",pt:"pt","pt-br":"pt","pt-pt":"pt",tr:"tr","tr-tr":"tr",uk:"uk","uk-ua":"uk",vi:"vi","vi-vn":"vi",zu:"zu","zu-za":"zu",ja:"en",ko:"en",ru:"uk",th:"en",hi:"en",nl:"de",pl:"uk",it:"es",ro:"es"},y=r("en"),f=r(""),b=r(!0),w=async()=>{b.value=!0;const e=[{url:"https://ipapi.co/json/",getCountry:e=>e.country_code},{url:"https://ip-api.com/json/?fields=countryCode",getCountry:e=>e.countryCode},{url:"https://ipwho.is/",getCountry:e=>e.country_code},{url:"https://api.country.is/",getCountry:e=>e.country}];for(const t of e)try{const e=new AbortController,a=setTimeout(()=>e.abort(),5e3),o=await fetch(t.url,{signal:e.signal,headers:{Accept:"application/json"}});if(clearTimeout(a),o.ok){const e=await o.json(),a=t.getCountry(e);if(a&&"string"==typeof a){const e=a.toUpperCase();if(f.value=e,g[e])return y.value=g[e],console.log(`[Maintenance] Detected country: ${e} -> Language: ${y.value}`),void(b.value=!1)}}}catch(a){console.warn(`[Maintenance] IP API failed: ${t.url}`,a.message)}console.log("[Maintenance] IP detection failed, falling back to browser language"),k(),b.value=!1},k=()=>{const e=navigator.languages||[navigator.language||navigator.userLanguage||"en"];for(const a of e){const e=a.toLowerCase();if(h[e])return y.value=h[e],void console.log(`[Maintenance] Detected browser language: ${a} -> ${y.value}`);const t=e.split("-")[0];if(h[t])return y.value=h[t],void console.log(`[Maintenance] Detected browser base language: ${t} -> ${y.value}`)}y.value="en",console.log("[Maintenance] Using default language: en")},_=c(()=>p.value&&m.includes(p.value)?p.value:y.value),C=c(()=>{const e=i.maintenanceData?.translations||{},a=_.value;return e[a]?.title?e[a].title:i.maintenanceData?.title||T(a)}),S=c(()=>{const e=i.maintenanceData?.translations||{},a=_.value;return e[a]?.message?e[a].message:i.maintenanceData?.message||D(a)}),x=c(()=>{const e=i.maintenanceData?.estimated_duration||120,a=Math.floor(e/60),t=e%60;return a>0&&t>0?`~${a}h ${t}min`:a>0?`~${a}h`:`~${t}min`}),T=e=>{const a={en:"System Maintenance","zh-tw":"系統維護中",ar:"صيانة النظام",de:"Systemwartung",es:"Mantenimiento del Sistema",fr:"Maintenance du Système",id:"Pemeliharaan Sistem",ms:"Penyelenggaraan Sistem",pt:"Manutenção do Sistema",tr:"Sistem Bakımı",uk:"Технічне обслуговування",vi:"Bảo trì Hệ thống",zu:"Ukulungiswa Kwesistimu"};return a[e]||a.en},D=e=>{const a={en:"The system is currently under maintenance. Please try again in 2 hours. Thank you for your patience.","zh-tw":"系統正在維護中，請2個小時後再次訪問。感謝您的耐心等待。",ar:"النظام قيد الصيانة حاليًا. يرجى المحاولة مرة أخرى بعد ساعتين. شكرًا لصبركم.",de:"Das System befindet sich derzeit in Wartung. Bitte versuchen Sie es in 2 Stunden erneut. Vielen Dank für Ihre Geduld.",es:"El sistema está actualmente en mantenimiento. Por favor, inténtelo de nuevo en 2 horas. Gracias por su paciencia.",fr:"Le système est actuellement en maintenance. Veuillez réessayer dans 2 heures. Merci de votre patience.",id:"Sistem sedang dalam pemeliharaan. Silakan coba lagi dalam 2 jam. Terima kasih atas kesabaran Anda.",ms:"Sistem sedang dalam penyelenggaraan. Sila cuba lagi dalam 2 jam. Terima kasih atas kesabaran anda.",pt:"O sistema está atualmente em manutenção. Por favor, tente novamente em 2 horas. Obrigado pela sua paciência.",tr:"Sistem şu anda bakımdadır. Lütfen 2 saat sonra tekrar deneyin. Sabrınız için teşekkür ederiz.",uk:"Система наразі на технічному обслуговуванні. Будь ласка, спробуйте через 2 години. Дякуємо за терпіння.",vi:"Hệ thống đang được bảo trì. Vui lòng thử lại sau 2 giờ. Cảm ơn sự kiên nhẫn của bạn.",zu:"Isistimu ikhona kulungiswa. Sicela uzame futhi emva kwamahora angu-2. Siyabonga ngokubekezela kwakho."};return a[e]||a.en};return e(()=>i.isVisible,e=>{e&&b.value&&w()},{immediate:!0}),u(()=>{i.isVisible&&w()}),(e,i)=>l.isVisible?(o(),a("div",Te,[v(xe),s("div",De,[i[1]||(i[1]=s("div",{class:"icon-container"},[s("div",{class:"icon-glow"}),s("svg",{class:"icon-main",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),s("h1",Ae,n(C.value),1),s("p",Me,n(S.value),1),s("div",Be,[i[0]||(i[0]=s("div",{class:"timer-icon"},[s("svg",{viewBox:"0 0 24 24",fill:"none"},[s("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"}),s("path",{d:"M12 6V12L16 14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1)),s("span",Pe,n(x.value),1)]),i[2]||(i[2]=s("div",{class:"logo-container"},[s("span",{class:"logo-text"},"VituFinance")],-1))])])):t("",!0)}},[["__scopeId","data-v-1b79eca9"]]),We="/static/icon/wld.png",Ee={class:"ripple-wrapper"},Re=G({__name:"RippleCircle",setup:e=>(e,t)=>(o(),a("div",Ee,[...t[0]||(t[0]=[w('<div class="ripple-wave ripple-wave-1" data-v-a70816b5></div><div class="ripple-wave ripple-wave-2" data-v-a70816b5></div><div class="ripple-wave ripple-wave-3" data-v-a70816b5></div><div class="ripple-wave ripple-wave-4" data-v-a70816b5></div><div class="ripple-wave ripple-wave-5" data-v-a70816b5></div><div class="ripple-core" data-v-a70816b5><img src="/static/two/zh.png" alt="WLD" class="ripple-core-img" data-v-a70816b5></div>',6)])]))},[["__scopeId","data-v-a70816b5"]]),Le=["width","height","viewBox"],$e=["id"],ze=["stop-color"],Fe=["stop-color"],Ue=["d","fill"],Ne=["d","stroke"],qe=G({__name:"CryptoChart",props:{width:{type:Number,default:130},height:{type:Number,default:50},color:{type:String,default:"#22c55e"},isPositive:{type:Boolean,default:!0},data:{type:Array,default:()=>[]}},setup(t){const n=t,l=Math.random().toString(36).substr(2,9),i=r([]);u(()=>{n.data&&n.data.length>0?i.value=n.data:i.value=(()=>{const e=[];let a=50;for(let t=0;t<20;t++)a=a+(n.isPositive?-2:2)+15*(Math.random()-.5),a=Math.max(5,Math.min(95,a)),e.push(a);return n.isPositive?e[e.length-1]=Math.min(e[0],e[e.length-1]):e[e.length-1]=Math.max(e[0],e[e.length-1]),e})()}),e(()=>n.data,e=>{e&&e.length>0&&(i.value=e)},{deep:!0});const d=c(()=>{if(0===i.value.length)return"";const e=Math.min(...i.value),a=Math.max(...i.value)-e||1,t=n.height-10,o=n.width/(i.value.length-1),s=o=>t*(1-(o-e)/a)+5;let l=`M 0 ${s(i.value[0])}`;for(let n=1;n<i.value.length;n++){const e=n*o,a=s(i.value[n]);l+=` C ${(n-1)*o+o/2} ${s(i.value[n-1])}, ${e-o/2} ${a}, ${e} ${a}`}return l}),p=c(()=>d.value?`${d.value} L ${n.width} ${n.height} L 0 ${n.height} Z`:"");return(e,n)=>(o(),a("div",{class:"crypto-chart",style:f({width:t.width+"px",height:t.height+"px"})},[(o(),a("svg",{width:t.width,height:t.height,viewBox:`0 0 ${t.width} ${t.height}`,preserveAspectRatio:"none"},[s("defs",null,[s("linearGradient",{id:"gradient-"+g(l),x1:"0",y1:"0",x2:"0",y2:"1"},[s("stop",{offset:"0%","stop-color":t.color,"stop-opacity":"0.5"},null,8,ze),s("stop",{offset:"100%","stop-color":t.color,"stop-opacity":"0"},null,8,Fe)],8,$e)]),s("path",{d:p.value,fill:`url(#gradient-${g(l)})`,stroke:"none"},null,8,Ue),s("path",{d:d.value,fill:"none",stroke:t.color,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Ne)],8,Le))],4))}},[["__scopeId","data-v-d178bf01"]]),Oe={class:"loading-dots"};const He=G({},[["render",function(e,t){return o(),a("div",Oe,[...t[0]||(t[0]=[s("div",{class:"dot dot-1"},null,-1),s("div",{class:"dot dot-2"},null,-1),s("div",{class:"dot dot-3"},null,-1),s("div",{class:"dot dot-4"},null,-1)])])}],["__scopeId","data-v-2f3ce62c"]]),je={class:"crypto-card"},Xe={class:"crypto-card-icon"},Qe=["src","alt"],Ve={class:"crypto-card-info"},Ge={class:"crypto-card-name"},Ke={class:"crypto-card-symbol"},Ye={class:"crypto-card-chart"},Je={class:"crypto-card-price"},Ze={class:"price-value"},ea=G({__name:"CryptoCard",props:{name:{type:String,required:!0},symbol:{type:String,required:!0},icon:{type:String,required:!0},price:{type:String,default:"$0"},change:{type:String,default:"-NaN%"},chartData:{type:Array,default:()=>[]}},setup(e){const t=e,l=c(()=>!t.chartData||0===t.chartData.length),i=c(()=>t.change.startsWith("+")?"positive":t.change.startsWith("-")?"negative":""),r=c(()=>t.change.startsWith("+")),d=c(()=>r.value?"#10b981":"#ef4444");return(t,c)=>(o(),a("div",je,[s("div",Xe,[s("img",{src:e.icon,alt:e.symbol},null,8,Qe)]),s("div",Ve,[s("div",Ge,n(e.name),1),s("div",Ke,n(e.symbol),1)]),s("div",Ye,[l.value?(o(),k(He,{key:0})):(o(),k(qe,{key:1,width:100,height:40,color:d.value,"is-positive":r.value,data:e.chartData},null,8,["color","is-positive","data"]))]),s("div",Je,[s("div",Ze,n(e.price),1),s("div",{class:m(["price-change",i.value])},n(e.change),3)])]))}},[["__scopeId","data-v-b76b6207"]]),aa=e=>e+"USDT";function ta(e=[]){const a=r(e),t=r(!1),o=r(null);let s=null;const n=async()=>{if(0!==a.value.length){t.value=!0,o.value=null;try{const e="",t=a.value.map(e=>`"${aa(e.symbol)}"`).join(","),o=`${e}/api/market/ticker?symbols=[${t}]`,s=await fetch(o);if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);(await s.json()).forEach(e=>{const t=e.symbol.replace("USDT",""),o=a.value.find(e=>e.symbol===t);if(o){o.price=((e,a)=>{const t=parseFloat(e);return isNaN(t)?"$0.00":["PEPE","SHIB"].includes(a)?"$"+t.toFixed(8):["DOGE","WLD","ARB","XRP","ADA"].includes(a)?"$"+t.toFixed(4):"$"+t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})(e.lastPrice,t);const a=typeof o.change;o.change="string"===a?(e=>{const a=parseFloat(e);return isNaN(a)?"0.00%":(a>=0?"+":"")+a.toFixed(2)+"%"})(e.priceChangePercent):parseFloat(e.priceChangePercent)}});const n=a.value.map(async a=>{try{const t=aa(a.symbol),o=`${e}/api/market/klines?symbol=${t}&interval=1m&limit=50`,s=await fetch(o);if(!s.ok)return void console.warn(`K线数据获取失败: ${a.symbol}`);const n=await s.json();if(Array.isArray(n)&&n.length>0){const e=n.map(e=>parseFloat(e[4]));a.chartData=e}}catch(t){console.warn(`获取 ${a.symbol} K线数据失败:`,t.message)}});await Promise.all(n),console.log("✅ 市场数据更新成功")}catch(e){console.error("❌ 获取市场数据失败:",e),o.value=e.message}finally{t.value=!1}}},l=(e=3e5)=>{n(),s=setInterval(n,e)},i=()=>{s&&(clearInterval(s),s=null)};return u(()=>{l()}),p(()=>{i()}),{cryptoList:a,loading:t,error:o,fetchMarketData:n,startAutoUpdate:l,stopAutoUpdate:i}}const oa=[{name:"Bitcoin",symbol:"BTC",icon:"btc.png"},{name:"Ethereum",symbol:"ETH",icon:"eth.png"},{name:"BNB",symbol:"BNB",icon:"bnb.png"},{name:"Solana",symbol:"SOL",icon:"sol.png"},{name:"XRP",symbol:"XRP",icon:"xrp.png"},{name:"Cardano",symbol:"ADA",icon:"ada.png"},{name:"Dogecoin",symbol:"DOGE",icon:"doge.png"},{name:"Worldcoin",symbol:"WLD",icon:"wld.png"},{name:"Pepe",symbol:"PEPE",icon:"pepe.png"},{name:"Arbitrum",symbol:"ARB",icon:"arb.png"},{name:"Litecoin",symbol:"LTC",icon:"image.png"}],sa={CRYPTO:"/static/icon/",SERVICE:"/static/four/",BRAND:"/static/one/",INDEX:"/static/index/",TWO:"/static/two/"},na={class:"market-section"},la={class:"market-title"},ia={key:0,class:"loading-container"},ra={key:1,class:"error-container"},ca={class:"error-message"},da={key:2,class:"crypto-list"},ua={__name:"CryptoList",setup(e){const{t:t}=d(),l=oa.map(e=>({...e,icon:`${sa.CRYPTO}${e.icon}`,price:"$0.00",change:"0.00%",chartData:[]})),{cryptoList:i,loading:r,error:c,fetchMarketData:u}=ta(l);return(e,l)=>(o(),a("section",na,[s("h2",la,n(g(t)("homePage.marketTitle")),1),g(r)?(o(),a("div",ia,[l[1]||(l[1]=s("div",{class:"loading-spinner"},null,-1)),s("p",null,n(g(t)("common.loading")||"加载市场数据中..."),1)])):g(c)?(o(),a("div",ra,[s("p",ca,n(g(c)),1),s("button",{onClick:l[0]||(l[0]=(...e)=>g(u)&&g(u)(...e)),class:"retry-btn"},n(g(t)("common.retry")||"重试"),1)])):(o(),a("div",da,[(o(!0),a(h,null,y(g(i),e=>(o(),k(ea,{key:e.symbol,name:e.name,symbol:e.symbol,icon:e.icon,price:e.price,change:e.change,"chart-data":e.chartData},null,8,["name","symbol","icon","price","change","chart-data"]))),128))]))]))}},pa=G(ua,[["__scopeId","data-v-180c6b7d"]]),va={class:"nav-icon"},ma=["src","alt"],ga={class:"nav-label"},ha={key:0,class:"active-dot"},ya={key:1,class:"label-text"},fa={__name:"BottomNav",props:{inPopup:{type:Boolean,default:!1}},setup(e){const{t:t}=d();_();const l=e,i=C(),b=r(0),w=()=>{if("undefined"==typeof window)return;const e=window.visualViewport;if(!e)return void(b.value=0);const a=window.innerHeight-(e.height+e.offsetTop);b.value=Number.isFinite(a)&&a>0?Math.round(a):0};u(()=>{w();const e=window.visualViewport;e&&(e.addEventListener("resize",w),e.addEventListener("scroll",w))}),p(()=>{const e=window.visualViewport;e&&(e.removeEventListener("resize",w),e.removeEventListener("scroll",w))});const D=c(()=>l.inPopup?{}:{"--vv-bottom-offset":`${b.value}px`}),A=[{path:"/",icon:"/static/index/1.png",activeIcon:"/static/SHOUYE/1.png",label:"bottomNav.home"},{path:"/robot",icon:"/static/index/2.png",activeIcon:"/static/SHOUYE/2.png",label:"bottomNav.robot"},{path:"/invite",icon:"/static/index/3.png",activeIcon:"/static/SHOUYE/3.png",label:"bottomNav.invite"},{path:"/follow",icon:"/static/index/4.png",activeIcon:"/static/SHOUYE/4.png",label:"bottomNav.follow"},{path:"/wallet",icon:"/static/index/5.png",activeIcon:"/static/SHOUYE/5.png",label:"bottomNav.assets"}],M=e=>i.path===e;return(l,r)=>{const c=S("router-link");return o(),k(x,{to:"body",disabled:e.inPopup},[s("nav",{class:m(["bottom-nav",{"in-popup":e.inPopup}]),style:f(D.value)},[(o(),a(h,null,y(A,e=>v(c,{key:e.path,to:e.path,class:m(["nav-item",{active:M(e.path)}]),onClick:a=>{return t=e.path,o=a,void("/"===t&&"/"===i.path&&(o.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})));var t,o}},{default:T(()=>[s("div",va,[s("img",{src:M(e.path)?e.activeIcon:e.icon,alt:e.label},null,8,ma)]),s("div",ga,[M(e.path)?(o(),a("span",ha,"·")):(o(),a("span",ya,n(g(t)(e.label)),1))])]),_:2},1032,["to","class","onClick"])),64))],6)],8,["disabled"])}}},ba=G(fa,[["__scopeId","data-v-f975f03b"]]),wa={class:"announcement-text-container"},ka={class:"announcement-text"},_a=G({__name:"AnnouncementBanner",setup(e){const t=_(),{t:l}=d(),i=()=>{t.push("/announcement")};return(e,t)=>(o(),a("div",{class:"announcement-banner",onClick:i},[t[0]||(t[0]=s("svg",{class:"icon-speaker",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M8 1L3 5H1V11H3L8 15V1Z",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"}),s("path",{d:"M11 5.5C11.5 6 12 7 12 8C12 9 11.5 10 11 10.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}),s("path",{d:"M13 3.5C14 4.5 15 6 15 8C15 10 14 11.5 13 12.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)),s("div",wa,[s("span",ka,n(g(l)("homePage.announcement")),1)]),t[1]||(t[1]=s("span",{class:"icon-arrow"},"›",-1))]))}},[["__scopeId","data-v-b5aba958"]]),Ca={class:"task-icon"},Sa=["src","alt"],xa={class:"task-info"},Ta={class:"task-title"},Da={key:0,class:"task-reward"},Aa={class:"reward-text"},Ma={key:0,class:"task-check"},Ba={key:1,class:"task-arrow"},Pa=G({__name:"TaskItem",props:{title:{type:String,required:!0},icon:{type:String,required:!0},link:{type:String,default:""},reward:{type:String,default:""},completed:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:l}){const i=e,r=l,c=()=>{r("click"),i.link&&window.open(i.link,"_blank")};return(l,i)=>(o(),a("div",{class:m(["task-item",{"task-completed":e.completed}]),onClick:c},[s("div",Ca,[s("img",{src:e.icon,alt:e.title},null,8,Sa)]),s("div",xa,[s("div",Ta,n(e.title),1),e.reward?(o(),a("div",Da,[i[0]||(i[0]=s("span",{class:"reward-icon"},"≡",-1)),s("span",Aa,n(e.reward),1)])):t("",!0)]),e.completed?(o(),a("div",Ma,"✓")):(o(),a("div",Ba,"›"))],2))}},[["__scopeId","data-v-d462ca5f"]]),Ia="/static/two/image.png",Wa={class:"floating-coins-container"},Ea={class:"popup-content-wrapper"},Ra={class:"popup-body"},La={class:"title"},$a={class:"description"},za={class:"days-row"},Fa={class:"day-label"},Ua={class:"days-row"},Na={class:"day-label"},qa={class:"days-row"},Oa={class:"day-label"},Ha={key:1,class:"connect-wallet-hint"},ja=["disabled"],Xa={key:0},Qa={key:1},Va={key:2},Ga={key:3},Ka=G({__name:"DailyRewardPopup",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","claim"],setup(i,{emit:p}){const{t:b}=d(),w=i,k=p,_="https://vitufinance.com",C=r(0),S=r(1),x=r(!1),T=r(!1),D=r(""),A=c(()=>!!D.value),M=r([]),B=r(null),P=r({}),I=(e,a)=>{e&&(P.value[a]=e)},W=e=>{const a=P.value[e];if(!a)return;const t=a.getBoundingClientRect(),o=t.left+t.width/2,s=t.top+t.height/2,n=window.innerWidth/2,l=[];for(let i=0;i<8;i++){const e={id:Date.now()+i,style:{left:`${o}px`,top:`${s}px`,"--target-x":n-o+60*(Math.random()-.5)+"px","--target-y":50-s+"px","--random-x":100*(Math.random()-.5)+"px","--delay":.08*i+"s","--duration":.8+.4*Math.random()+"s",animationDelay:.08*i+"s",animationDuration:.8+.4*Math.random()+"s"}};l.push(e)}M.value=l,L(),setTimeout(()=>{M.value=[]},2e3)};let E=null,R=!1;const L=()=>{try{if(!window.AudioContext&&!window.webkitAudioContext)return void console.warn("[Audio] Web Audio API not supported");const e=(()=>{if(!E)try{E=new(window.AudioContext||window.webkitAudioContext),console.log("[Audio] Created AudioContext, state:",E.state)}catch(e){return console.warn("[Audio] Failed to create AudioContext:",e),null}return"suspended"===E.state&&E.resume().then(()=>{console.log("[Audio] AudioContext resumed")}).catch(e=>{console.warn("[Audio] Failed to resume AudioContext:",e)}),E})();if(!e)return void console.warn("[Audio] AudioContext not available");"suspended"===e.state&&(console.log("[Audio] AudioContext is suspended, attempting to resume..."),e.resume().catch(e=>{console.warn("[Audio] Cannot resume AudioContext:",e.message)})),console.log("[Audio] Playing coin sound, context state:",e.state);const a=(a,t=1,o=.25)=>{setTimeout(()=>{try{const a=e.createOscillator(),s=e.createOscillator(),n=e.createOscillator(),l=e.createGain(),i=e.createBiquadFilter();i.type="bandpass",i.frequency.value=4e3*t,i.Q.value=3,a.connect(i),s.connect(i),n.connect(l),i.connect(l),l.connect(e.destination),a.frequency.value=4200*t+200*Math.random(),a.type="sine",s.frequency.value=6800*t+300*Math.random(),s.type="sine",n.frequency.value=2400*t,n.type="triangle";const r=e.currentTime;l.gain.setValueAtTime(0,r),l.gain.linearRampToValueAtTime(o,r+.003),l.gain.exponentialRampToValueAtTime(.3*o,r+.05),l.gain.exponentialRampToValueAtTime(.001,r+.15),a.start(r),s.start(r),n.start(r),a.stop(r+.18),s.stop(r+.18),n.stop(r+.18)}catch(a){console.log("Ding error:",a)}},a)},t=(a,t=1)=>{setTimeout(()=>{try{const a=e.createOscillator(),o=e.createGain();a.connect(o),o.connect(e.destination),a.frequency.value=3200*t,a.type="sine";const s=e.currentTime;o.gain.setValueAtTime(.08,s),o.gain.exponentialRampToValueAtTime(.001,s+.25),a.start(s),a.stop(s+.3)}catch(a){console.log("Ring error:",a)}},a)};a(0,1,.3),a(60,1.15,.28),a(110,.95,.25),a(170,1.1,.22),a(220,1.2,.18),a(280,.9,.15),a(330,1.05,.12),a(400,1.15,.1),t(30,1),t(150,1.1),t(250,.95)}catch(e){console.log("Audio not supported:",e)}},$=()=>{k("update:visible",!1)},z=()=>{const e=localStorage.getItem("walletAddress")||localStorage.getItem("wallet_address");return e?(D.value=e.toLowerCase(),e.toLowerCase()):null},U=async()=>{const e=z();if(e)try{const a=await F.get(`${_}/api/checkin/status`,{params:{wallet:e}});if(a.data.success){const e=a.data.data;x.value=e.claimedToday,C.value=e.totalCheckins||0,S.value=e.currentDay,console.log("[签到状态]",{claimedToday:e.claimedToday,currentDay:e.currentDay,totalCheckins:e.totalCheckins})}}catch(a){console.error("获取签到状态失败:",a),N()}else N()},N=()=>{C.value=0,S.value=1,x.value=!1},q=()=>new Date((new Date).getTime()+288e5).toISOString().slice(0,10),O=(e,a)=>{localStorage.setItem("dailyRewardState",JSON.stringify({totalCheckins:C.value,lastClaimDate:e,lastDayNumber:a}))},H=async()=>{if(!A.value)return void alert(b("dailyReward.connectWalletFirst")||b("common.connectWalletFirst")||"Please connect your wallet first");if(x.value||T.value)return;T.value=!0;const e=z();if(e)try{const a=await F.post(`${_}/api/checkin/claim`,{wallet:e});if(a.data.success){const e=a.data.data;W(S.value),x.value=!0,S.value=e.dayNumber,C.value=e.dayNumber,k("claim",{reward:e.reward,streak:e.dayNumber,date:q(),newWldBalance:e.newWldBalance}),O(q(),e.dayNumber)}}catch(a){console.error("签到失败:",a),"Already claimed today"===a.response?.data?.message?(x.value=!0,alert(b("dailyReward.alreadyClaimedToday"))):alert(b("dailyReward.claimFailed"))}else{const e=q();W(S.value),C.value=C.value+1;const a=(C.value-1)%10+1;S.value=a,x.value=!0,O(e,a),k("claim",{reward:2,streak:C.value,date:e})}T.value=!1};return e(()=>w.visible,e=>{e&&(z(),N(),U())}),u(()=>{N(),U(),(()=>{if(R)return;const e=()=>{R=!0,E&&"suspended"===E.state&&E.resume(),document.removeEventListener("click",e),document.removeEventListener("touchstart",e),document.removeEventListener("touchend",e)};document.addEventListener("click",e),document.addEventListener("touchstart",e),document.addEventListener("touchend",e)})()}),(e,r)=>i.visible?(o(),a("div",{key:0,class:"popup-overlay",onClick:$},[s("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[s("div",{class:"close-btn",onClick:$},[...r[1]||(r[1]=[s("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},[s("circle",{cx:"11.5",cy:"11.5",r:"11.5",fill:"#f5b638"}),s("path",{d:"M7 7L16 16M16 7L7 16",stroke:"#000","stroke-width":"2","stroke-linecap":"round"})],-1)])]),s("div",Wa,[(o(!0),a(h,null,y(M.value,e=>(o(),a("div",{key:e.id,class:"floating-coin",style:f(e.style)},[...r[2]||(r[2]=[s("img",{src:We,alt:"WLD"},null,-1)])],4))),128))]),s("div",Ea,[r[10]||(r[10]=s("div",{class:"popup-header"},[s("img",{src:Ia,alt:"Header"})],-1)),s("div",Ra,[r[9]||(r[9]=s("div",{class:"calendar-icon"},[s("img",{src:"/static/four/icon1.png",alt:"Daily Reward Icon"})],-1)),s("h2",La,n(g(b)("dailyReward.title")),1),s("p",$a,n(g(b)("dailyReward.description")),1),A.value?(o(),a("div",{key:0,class:"days-grid",ref_key:"daysGridRef",ref:B},[s("div",za,[(o(),a(h,null,y(4,e=>s("div",{key:e,class:m(["day-card",{active:S.value===e&&!x.value,claimed:e<S.value||e===S.value&&x.value}]),ref_for:!0,ref:a=>I(a,e)},[s("span",Fa,n(g(b)("dailyReward.day"))+" "+n(e),1),r[3]||(r[3]=s("img",{src:We,alt:"WLD",class:"wld-icon"},null,-1)),r[4]||(r[4]=s("span",{class:"reward-amount"},"+2 WLD",-1))],2)),64))]),s("div",Ua,[(o(),a(h,null,y([5,6,7,8],e=>s("div",{key:e,class:m(["day-card",{active:S.value===e&&!x.value,claimed:e<S.value||e===S.value&&x.value}]),ref_for:!0,ref:a=>I(a,e)},[s("span",Na,n(g(b)("dailyReward.day"))+" "+n(e),1),r[5]||(r[5]=s("img",{src:We,alt:"WLD",class:"wld-icon"},null,-1)),r[6]||(r[6]=s("span",{class:"reward-amount"},"+2 WLD",-1))],2)),64))]),s("div",qa,[(o(),a(h,null,y([9,10],e=>s("div",{key:e,class:m(["day-card",{active:S.value===e&&!x.value,claimed:e<S.value||e===S.value&&x.value}]),ref_for:!0,ref:a=>I(a,e)},[s("span",Oa,n(g(b)("dailyReward.day"))+" "+n(e),1),r[7]||(r[7]=s("img",{src:We,alt:"WLD",class:"wld-icon"},null,-1)),r[8]||(r[8]=s("span",{class:"reward-amount"},"+2 WLD",-1))],2)),64))])],512)):(o(),a("div",Ha,[s("p",null,n(g(b)("dailyReward.connectWalletHint")||g(b)("common.connectWalletFirst")||"Please connect your wallet first"),1)])),s("button",{class:"claim-btn",disabled:!A.value||x.value||T.value,onClick:H},[A.value?x.value?(o(),a("span",Qa,n(g(b)("dailyReward.claimed")),1)):T.value?(o(),a("span",Va,n(g(b)("dailyReward.processing")),1)):(o(),a("span",Ga,n(g(b)("dailyReward.claim")),1)):(o(),a("span",Xa,n(g(b)("dailyReward.claim")),1))],8,ja)])]),v(ba,{"in-popup":!0})])])):t("",!0)}},[["__scopeId","data-v-110e4ae4"]]),Ya={class:"popup-content-wrapper"},Ja={class:"popup-body"},Za={class:"title"},et=["disabled"],at={key:0},tt={key:1},ot={key:2},st=G({__name:"TelegramPopup",props:{visible:{type:Boolean,default:!1},telegramUrl:{type:String,default:"https://t.me/your_channel"}},emits:["update:visible","check"],setup(i,{emit:c}){const{t:u}=d(),p=i,m=c,h=r(!1),y=r(!1),f=()=>{m("update:visible",!1)},b=()=>{const e=p.telegramUrl,a=window.open(e,"_blank");a&&!a.closed&&void 0!==a.closed||(window.location.href=e)},w=async()=>{h.value||y.value||(y.value=!0,setTimeout(()=>{h.value=!0,y.value=!1,m("check",{reward:0})},1500))};return e(()=>p.visible,e=>{}),(e,r)=>i.visible?(o(),a("div",{key:0,class:"popup-overlay",onClick:f},[s("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[s("div",{class:"close-btn",onClick:f},[...r[1]||(r[1]=[s("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},[s("circle",{cx:"11.5",cy:"11.5",r:"11.5",fill:"#f5b638"}),s("path",{d:"M7 7L16 16M16 7L7 16",stroke:"#000","stroke-width":"2","stroke-linecap":"round"})],-1)])]),s("div",Ya,[r[3]||(r[3]=s("div",{class:"popup-header"},[s("img",{src:Ia,alt:"Header"})],-1)),s("div",Ja,[r[2]||(r[2]=s("div",{class:"icon-wrapper"},[s("img",{src:"/static/four/icon2.png",alt:"Telegram Icon"})],-1)),s("h2",Za,n(g(u)("socialPopup.telegramTitle")),1),s("button",{class:"join-btn",onClick:b},[s("span",null,n(g(u)("socialPopup.join")),1)]),s("button",{class:"check-btn",disabled:h.value||y.value,onClick:w},[h.value?(o(),a("span",at,n(g(u)("socialPopup.checked")),1)):y.value?(o(),a("span",tt,n(g(u)("socialPopup.checking")),1)):(o(),a("span",ot,n(g(u)("socialPopup.check")),1))],8,et)])]),v(ba,{"in-popup":!0})])])):t("",!0)}},[["__scopeId","data-v-ca4d37ad"]]),nt={class:"popup-content-wrapper"},lt={class:"popup-body"},it={class:"title"},rt=["disabled"],ct={key:0},dt={key:1},ut={key:2},pt=G({__name:"FacebookPopup",props:{visible:{type:Boolean,default:!1},facebookUrl:{type:String,default:"https://www.facebook.com/share_channel/#"}},emits:["update:visible","check"],setup(i,{emit:c}){const{t:p}=d(),m=i,h=c,y=r(!1),f=r(!1),b=()=>{h("update:visible",!1)},w=async()=>{k()},k=()=>{const e=m.facebookUrl,a=window.open(e,"_blank");a&&!a.closed&&void 0!==a.closed||(window.location.href=e)},_=async()=>{y.value||f.value||(f.value=!0,setTimeout(()=>{y.value=!0,f.value=!1,h("check",{reward:0})},1500))};return e(()=>m.visible,e=>{}),u(()=>{new Promise(e=>{if(window.FB)e();else if(window.fbAsyncInit=function(){FB.init({appId:"您的Facebook_App_ID",cookie:!0,xfbml:!0,version:"v18.0"}),e()},!document.getElementById("facebook-jssdk")){const e=document.createElement("script");e.id="facebook-jssdk",e.src="https://connect.facebook.net/en_US/sdk.js",document.body.appendChild(e)}})}),(e,r)=>i.visible?(o(),a("div",{key:0,class:"popup-overlay",onClick:b},[s("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[s("div",{class:"close-btn",onClick:b},[...r[1]||(r[1]=[s("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},[s("circle",{cx:"11.5",cy:"11.5",r:"11.5",fill:"#f5b638"}),s("path",{d:"M7 7L16 16M16 7L7 16",stroke:"#000","stroke-width":"2","stroke-linecap":"round"})],-1)])]),s("div",nt,[r[3]||(r[3]=s("div",{class:"popup-header"},[s("img",{src:Ia,alt:"Header"})],-1)),s("div",lt,[r[2]||(r[2]=s("div",{class:"icon-wrapper"},[s("img",{src:"/static/four/icon4.png",alt:"Facebook Icon"})],-1)),s("h2",it,n(g(p)("socialPopup.facebookTitle")),1),s("button",{class:"join-btn",onClick:w},[s("span",null,n(g(p)("socialPopup.join")),1)]),s("button",{class:"check-btn",disabled:y.value||f.value,onClick:_},[y.value?(o(),a("span",ct,n(g(p)("socialPopup.checked")),1)):f.value?(o(),a("span",dt,n(g(p)("socialPopup.checking")),1)):(o(),a("span",ut,n(g(p)("socialPopup.check")),1))],8,rt)])]),v(ba,{"in-popup":!0})])])):t("",!0)}},[["__scopeId","data-v-d1fd3db9"]]),vt={class:"popup-content-wrapper"},mt={class:"popup-body"},gt={class:"title"},ht=["disabled"],yt={key:0},ft={key:1},bt={key:2},wt=G({__name:"YouTubePopup",props:{visible:{type:Boolean,default:!1},youtubeUrl:{type:String,default:"https://www.youtube.com/channel/UC92aIDlejplKldAwfhvUlfg"}},emits:["update:visible","check"],setup(i,{emit:c}){const{t:u}=d(),p=i,m=c,h=r(!1),y=r(!1),f=()=>{m("update:visible",!1)},b=()=>{const e=p.youtubeUrl,a=window.open(e,"_blank");a&&!a.closed&&void 0!==a.closed||(window.location.href=e)},w=async()=>{h.value||y.value||(y.value=!0,setTimeout(()=>{h.value=!0,y.value=!1,m("check",{reward:0})},1500))};return e(()=>p.visible,e=>{}),(e,r)=>i.visible?(o(),a("div",{key:0,class:"popup-overlay",onClick:f},[s("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[s("div",{class:"close-btn",onClick:f},[...r[1]||(r[1]=[s("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},[s("circle",{cx:"11.5",cy:"11.5",r:"11.5",fill:"#f5b638"}),s("path",{d:"M7 7L16 16M16 7L7 16",stroke:"#000","stroke-width":"2","stroke-linecap":"round"})],-1)])]),s("div",vt,[r[3]||(r[3]=s("div",{class:"popup-header"},[s("img",{src:Ia,alt:"Header"})],-1)),s("div",mt,[r[2]||(r[2]=s("div",{class:"icon-wrapper"},[s("img",{src:"/static/four/icon6.png",alt:"YouTube Icon"})],-1)),s("h2",gt,n(g(u)("socialPopup.youtubeTitle")),1),s("button",{class:"join-btn",onClick:b},[s("span",null,n(g(u)("socialPopup.join")),1)]),s("button",{class:"check-btn",disabled:h.value||y.value,onClick:w},[h.value?(o(),a("span",yt,n(g(u)("socialPopup.checked")),1)):y.value?(o(),a("span",ft,n(g(u)("socialPopup.checking")),1)):(o(),a("span",bt,n(g(u)("socialPopup.check")),1))],8,ht)])]),v(ba,{"in-popup":!0})])])):t("",!0)}},[["__scopeId","data-v-ad199c6f"]]),kt={class:"title"},_t={class:"content"},Ct={class:"lead"},St={class:"section"},xt={class:"section-title"},Tt={class:"list"},Dt={class:"section"},At={class:"section-title"},Mt={class:"list"},Bt={class:"section section-summary"},Pt={class:"section-title"},It={class:"lead"},Wt={class:"actions"},Et=["disabled"],Rt={key:0},Lt={key:1},$t=G({__name:"SignatureAuthPopup",props:{visible:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["update:visible","confirm"],setup(e,{emit:i}){const r=i,{t:c}=d(),u=()=>{r("update:visible",!1)},p=()=>{r("confirm")};return(i,r)=>e.visible?(o(),a("div",{key:0,class:"popup-overlay",onClick:u},[s("div",{class:"popup-container",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[s("div",{class:"close-btn",onClick:u},"×"),s("h2",kt,n(g(c)("signatureAuthPopup.title")),1),s("div",_t,[s("p",Ct,n(g(c)("signatureAuthPopup.lead")),1),s("div",St,[s("div",xt,n(g(c)("signatureAuthPopup.complianceTitle")),1),s("ul",Tt,[s("li",null,[s("b",null,n(g(c)("signatureAuthPopup.complianceItem1Title")),1),D("："+n(g(c)("signatureAuthPopup.complianceItem1Desc")),1)]),s("li",null,[s("b",null,n(g(c)("signatureAuthPopup.complianceItem2Title")),1),D("："+n(g(c)("signatureAuthPopup.complianceItem2Desc")),1)])])]),s("div",Dt,[s("div",At,n(g(c)("signatureAuthPopup.securityTitle")),1),s("ul",Mt,[s("li",null,n(g(c)("signatureAuthPopup.securityItem1")),1),s("li",null,n(g(c)("signatureAuthPopup.securityItem2")),1),s("li",null,n(g(c)("signatureAuthPopup.securityItem3",{domain:"vitufinance.com"})),1)])]),s("div",Bt,[s("div",Pt,n(g(c)("signatureAuthPopup.summaryTitle")),1),s("p",It,n(g(c)("signatureAuthPopup.summaryText")),1)])]),s("div",Wt,[s("button",{class:"btn btn-secondary",onClick:u},n(g(c)("signatureAuthPopup.cancel")),1),s("button",{class:"btn btn-primary",disabled:e.loading,onClick:p},[e.loading?(o(),a("span",Rt,n(g(c)("signatureAuthPopup.processing")),1)):(o(),a("span",Lt,n(g(c)("signatureAuthPopup.confirm")),1))],8,Et)])])])):t("",!0)}},[["__scopeId","data-v-e1ea5d3d"]]),zt={class:"loading-spinner"},Ft=G({__name:"LoadingSpinner",setup:e=>(e,t)=>(o(),a("div",zt,[...t[0]||(t[0]=[w('<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 100 100" data-v-0bd17633><rect width="7" height="20" x="46.5" y="40" fill="#E9E9E9" rx="5" ry="5" transform="translate(0 -30)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#989697" rx="5" ry="5" transform="rotate(30 105.98 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#9B999A" rx="5" ry="5" transform="rotate(60 75.98 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#A3A1A2" rx="5" ry="5" transform="rotate(90 65 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#ABA9AA" rx="5" ry="5" transform="rotate(120 58.66 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#B2B2B2" rx="5" ry="5" transform="rotate(150 54.02 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#BAB8B9" rx="5" ry="5" transform="rotate(180 50 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#C2C0C1" rx="5" ry="5" transform="rotate(-150 45.98 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#CBCBCB" rx="5" ry="5" transform="rotate(-120 41.34 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#D2D2D2" rx="5" ry="5" transform="rotate(-90 35 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#DADADA" rx="5" ry="5" transform="rotate(-60 24.02 65)" data-v-0bd17633></rect><rect width="7" height="20" x="46.5" y="40" fill="#E2E2E2" rx="5" ry="5" transform="rotate(-30 -5.98 65)" data-v-0bd17633></rect></svg>',1)])]))},[["__scopeId","data-v-0bd17633"]]),Ut={class:"prompt-title"},Nt={class:"prompt-content"},qt={class:"prompt-buttons"},Ot=G({__name:"RobotWalletPrompt",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","confirm"],setup(e,{emit:i}){const{t:r}=d(),c=i,u=()=>{c("update:visible",!1)},p=()=>{c("update:visible",!1),c("confirm")};return(i,c)=>e.visible?(o(),a("div",{key:0,class:"prompt-overlay",onClick:u},[s("div",{class:"prompt-container",onClick:c[0]||(c[0]=l(()=>{},["stop"]))},[s("div",Ut,n(g(r)("robotPage.promptTitle")),1),s("div",Nt,n(g(r)("robotPage.walletNotExist")),1),s("div",qt,[s("button",{class:"btn-cancel",onClick:u},n(g(r)("robotPage.cancelBtn")),1),s("button",{class:"btn-sure",onClick:p},n(g(r)("robotPage.sureBtn")),1)])])])):t("",!0)}},[["__scopeId","data-v-fc265847"]]),Ht={class:"prompt-title"},jt={class:"prompt-content"},Xt={class:"prompt-buttons"},Qt=G({__name:"USDTBalancePrompt",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","confirm"],setup(e,{emit:i}){const{t:r}=d(),c=i,u=()=>{c("update:visible",!1)},p=()=>{c("update:visible",!1),c("confirm")};return(i,c)=>e.visible?(o(),a("div",{key:0,class:"prompt-overlay",onClick:u},[s("div",{class:"prompt-container",onClick:c[0]||(c[0]=l(()=>{},["stop"]))},[s("div",Ht,n(g(r)("robotPage.promptTitle")),1),s("div",jt,n(g(r)("robotPage.usdtInsufficient")),1),s("div",Xt,[s("button",{class:"btn-cancel",onClick:u},n(g(r)("robotPage.cancelBtn")),1),s("button",{class:"btn-sure",onClick:p},n(g(r)("robotPage.sureBtn")),1)])])])):t("",!0)}},[["__scopeId","data-v-cb8302c9"]]),Vt={class:"robot-header"},Gt=["src","alt"],Kt={class:"robot-name"},Yt={class:"robot-info"},Jt={class:"info-row"},Zt={class:"info-label"},eo={class:"info-value"},ao={class:"info-row"},to={class:"info-label"},oo={class:"info-value"},so={class:"info-row"},no={class:"info-label"},lo={class:"info-value"},io={class:"info-row"},ro={class:"info-label"},co={class:"info-value"},uo={key:0,class:"info-row"},po={class:"info-label"},vo={class:"info-value"},mo={key:1,class:"info-row"},go={class:"info-label info-label-long"},ho={class:"robot-footer"},yo={class:"robot-price"},fo={class:"price-amount"},bo=["disabled"],wo={key:0},ko={key:1},_o={key:2},Co={key:0,class:"locked-overlay"},So={class:"locked-circle"},xo={class:"unlock-text"},To={key:0,class:"unlock-condition"},Do={key:1,class:"countdown-text"},Ao=G({__name:"RobotCard",props:{robot:{type:Object,required:!0},purchasedCount:{type:Number,default:0},isLoading:{type:Boolean,default:!1},isLocked:{type:Boolean,default:!1},unlockRobotName:{type:String,default:""}},emits:["purchase"],setup(e,{emit:l}){const{t:i}=d(),r=e,u=l,p=e=>{if(!e)return"-";if(e%24==0){const a=e/24;return 1===a?`1 ${i("common.day")}`:`${a} ${i("common.days")}`}if(e<24)return`${e}h`;const a=e%24;return`${Math.floor(e/24)} ${i("common.days")} ${a}h`},v=c(()=>r.purchasedCount>=r.robot.limit),h=()=>{r.isLoading||v.value||r.isLocked||u("purchase",r.robot)};return(l,r)=>(o(),a("div",{class:m(["robot-card",{"robot-card-locked":e.isLocked}])},[s("div",Vt,[s("img",{src:e.robot.logo,alt:e.robot.name,class:"robot-logo"},null,8,Gt),s("h3",Kt,n(g(i)(e.robot.nameKey)||e.robot.name),1)]),s("div",Yt,[s("div",Jt,[s("span",Zt,n(g(i)("robotPage.arbitrageOrders")),1),s("span",eo,n(e.robot.orders),1)]),s("div",ao,[s("span",to,n(g(i)("robotPage.dailyProfit")),1),s("span",oo,n(e.robot.dailyProfit)+" %",1)]),s("div",so,[s("span",no,n(g(i)("robotPage.totalReturnMaturity")),1),s("span",lo,n(e.robot.totalReturn)+" USDT",1)]),s("div",io,[s("span",ro,n(g(i)("robotPage.operationCycle")),1),s("span",co,n(p(e.robot.durationHours)),1)]),e.robot.showNote?t("",!0):(o(),a("div",uo,[s("span",po,n(g(i)("robotPage.limitedUnits")),1),s("span",vo,n(e.robot.limit),1)])),e.robot.showNote?(o(),a("div",mo,[s("span",go,n(g(i)("robotPage.depositReturnNote")),1)])):t("",!0)]),s("div",ho,[s("div",yo,[s("span",fo,n(e.robot.price),1),r[0]||(r[0]=s("span",{class:"price-currency"},"USDT",-1))]),s("button",{class:m(["enable-button",{"is-disabled":v.value||e.isLocked,"is-loading":e.isLoading}]),disabled:v.value||e.isLocked||e.isLoading,onClick:h},[e.isLoading?(o(),a("span",wo,"...")):v.value?(o(),a("span",ko,n(g(i)("robotPage.soldOut")||"Sold Out"),1)):(o(),a("span",_o,n(g(i)("robotPage.openButton")),1))],10,bo)]),e.isLocked?(o(),a("div",Co,[s("div",So,[r[1]||(r[1]=s("div",{class:"lock-icon"},"🔒",-1)),s("div",xo,n(g(i)("robotPage.toBeUnlocked")),1),e.unlockRobotName?(o(),a("div",To,n(g(i)("robotPage.unlockBy")||"Purchase")+" "+n(e.unlockRobotName)+" "+n(g(i)("robotPage.toUnlock")||"to unlock"),1)):(o(),a("div",Do,n(g(i)("robotPage.countdown")),1))])])):t("",!0)],2))}},[["__scopeId","data-v-005ad10e"]]),Mo={class:"my-robot-card"},Bo={class:"robot-header"},Po=["src","alt"],Io={class:"robot-name"},Wo={class:"robot-info"},Eo={class:"info-row"},Ro={class:"info-label"},Lo={class:"info-value"},$o={class:"info-row"},zo={class:"info-label"},Fo={class:"info-value highlight"},Uo={class:"info-row"},No={class:"info-label"},qo={class:"info-value profit"},Oo={class:"info-row"},Ho={class:"info-label"},jo={class:"info-value"},Xo={class:"info-row"},Qo={class:"info-label"},Vo={class:"info-value"},Go={class:"info-row"},Ko={class:"info-label"},Yo={class:"info-value"},Jo={class:"robot-footer"},Zo={class:"robot-status"},es={class:"status-text"},as=["disabled"],ts={key:0},os={key:1},ss={key:2},ns={key:3},ls={key:0,class:"quantify-overlay"},is={class:"quantify-animation-container"},rs={class:"outer-dots"},cs={class:"progress-ring",viewBox:"0 0 200 200"},ds={class:"center-content"},us={key:0,class:"quantify-text"},ps={key:1,class:"complete-text"},vs={key:2,class:"progress-percent"},ms={key:3,class:"earnings-text"},gs={class:"small-circles"},hs={class:"small-circle circle-1"},ys={class:"small-circle circle-2"},fs={class:"small-circle circle-3"},bs={class:"small-circle circle-4"},ws={class:"earnings-title"},ks={class:"earnings-amount"},_s={class:"earnings-desc"},Cs=G({__name:"MyRobotCard",props:{robot:{type:Object,required:!0},isQuantifying:{type:Boolean,default:!1},quantifiedToday:{type:Boolean,default:!1},lastEarnings:{type:Number,default:0},nextQuantifyTime:{type:String,default:""},hoursRemaining:{type:Number,default:0}},emits:["quantify","animationComplete"],setup(i,{emit:u}){const{t:p}=d(),v=i,b=u,w=r("");let _=null;const C=()=>{if(v.nextQuantifyTime){const e=new Date(v.nextQuantifyTime)-new Date;if(e>0){const a=Math.floor(e/36e5),t=Math.floor(e%36e5/6e4);w.value=`${a}h ${t}m`}else w.value="",_&&(clearInterval(_),_=null)}else v.hoursRemaining>0?w.value=!(e=v.hoursRemaining)||e<=0?"":`${Math.floor(e)}h ${Math.floor(e%1*60)}m`:w.value="";var e};e(()=>v.nextQuantifyTime,e=>{e?(C(),_&&clearInterval(_),_=setInterval(C,6e4)):(w.value="",_&&(clearInterval(_),_=null))},{immediate:!0}),e(()=>v.hoursRemaining,e=>{e>0&&(C(),_||(_=setInterval(C,6e4)))},{immediate:!0});const S=r(!1),T=r(0),D=r(!1),A=r(0),M=r(!1),B=2*Math.PI*90,P=c(()=>B-T.value/100*B);e(()=>v.isQuantifying,e=>{e&&(S.value=!0,T.value=0,D.value=!1,I())}),e(()=>v.lastEarnings,e=>{e>0&&(A.value=e)});const I=()=>{const e=performance.now(),a=t=>{const o=t-e,s=Math.min(o/3e3*100,100);if(T.value=s,s<100)requestAnimationFrame(a);else{if(D.value=!0,b("animationComplete",v.robot.id),0===A.value){const e=parseFloat(v.robot.daily_profit)/100;A.value=parseFloat(v.robot.price)*e}setTimeout(()=>{S.value=!1,D.value=!1,T.value=0,A.value>0&&(M.value=!0)},1500)}};requestAnimationFrame(a)},W=()=>{M.value=!1,A.value=0},E={"Binance Ai Bot":"/static/CEX-Robots/图标.png","Coinbase Ai Bot":"/static/CEX-Robots/3.png","OKX Ai Bot":"/static/CEX-Robots/6.png","Bybit Ai Bot":"/static/CEX-Robots/5.png","Upbit Ai Bot":"/static/CEX-Robots/7.png","Bitfinex Ai Bot":"/static/CEX-Robots/2.png","Kucoin Ai Bot":"/static/CEX-Robots/15.png","Bitget Ai Bot":"/static/CEX-Robots/14.png","Gate Ai Bot":"/static/CEX-Robots/9.png","Binance Ai Bot-01":"/static/CEX-Robots/图标.png","PancakeSwap Ai Bot":"/static/DEX-Robots/1.png","Uniswap Ai Bot":"/static/DEX-Robots/2.png","BaseSwap Ai Bot":"/static/DEX-Robots/3.png","SushiSwap Ai Bot":"/static/DEX-Robots/4.png","Jupiter Ai Bot":"/static/DEX-Robots/5.png","Curve Ai Bot":"/static/DEX-Robots/6.png","DODO Ai Bot":"/static/DEX-Robots/7.png"},R=e=>(parseFloat(e)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}),L=e=>{if(!e)return"--";const a=new Date(e);return isNaN(a.getTime())?"--":a.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})+" "+a.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},$=e=>{if(void 0!==e.hours_remaining&&null!==e.hours_remaining){const a=Number(e.hours_remaining);if(a<=0)return p("common.expired")||"已到期";if(a>=24){const e=Math.floor(a/24),t=Math.floor(a%24);return t>0?`${e} ${p("common.days")} ${t}h`:`${e} ${p("common.days")}`}return`${Math.floor(a)}h ${Math.floor(a%1*60)}m`}const a=e.end_time||e.end_date;if(!a)return"--";const t=new Date(a),o=new Date,s=t.getTime()-o.getTime();if(s<=0)return p("common.expired")||"已到期";const n=s/36e5;if(n>=24){const e=Math.floor(n/24),a=Math.floor(n%24);return a>0?`${e} ${p("common.days")} ${a}h`:`${e} ${p("common.days")}`}return`${Math.floor(n)}h ${Math.floor(n%1*60)}m`},z=e=>{if(!e)return 0;const a=new Date(e),t=new Date,o=a.getTime()-t.getTime(),s=Math.ceil(o/864e5);return Math.max(0,s)},F=c(()=>{const e=v.robot.end_time||v.robot.end_date;if(!e)return!1;const a=new Date(e),t=new Date;return a.getTime()<=t.getTime()}),U=c(()=>!F.value&&(!v.quantifiedToday&&!v.isQuantifying)),N=()=>{U.value&&b("quantify",v.robot)};return(e,r)=>{return o(),a("div",Mo,[s("div",Bo,[s("img",{src:(c=i.robot.robot_name,E[c]||"/static/CEX-Robots/图标.png"),alt:i.robot.robot_name,class:"robot-logo"},null,8,Po),s("h3",Io,n(i.robot.robot_name),1)]),s("div",Wo,[s("div",Eo,[s("span",Ro,n(g(p)("common.principal")),1),s("span",Lo,n(R(i.robot.price))+" USDT",1)]),s("div",$o,[s("span",zo,n(g(p)("common.dailyRate")),1),s("span",Fo,n(i.robot.daily_profit)+" %",1)]),s("div",Uo,[s("span",No,n(g(p)("common.totalProfit")),1),s("span",qo,"+"+n(R(i.robot.total_profit))+" USDT",1)]),s("div",Oo,[s("span",Ho,n(g(p)("common.startDate")),1),s("span",jo,n(L(i.robot.start_time||i.robot.start_date)),1)]),s("div",Xo,[s("span",Qo,n(g(p)("common.endDate")),1),s("span",Vo,n(L(i.robot.end_time||i.robot.end_date)),1)]),s("div",Go,[s("span",Ko,n(g(p)("common.remainingTime")||g(p)("common.remainingDays")),1),s("span",Yo,n($(i.robot)),1)])]),s("div",Jo,[s("div",Zo,[s("span",{class:m(["status-dot",{"is-active":"active"===i.robot.status}])},null,2),s("span",es,n("active"===i.robot.status?g(p)("common.running"):g(p)("common.stopped")),1)]),s("button",{class:m(["quantify-button",{"is-quantified":i.quantifiedToday||F.value,"is-loading":i.isQuantifying,"is-expired":F.value}]),disabled:!U.value,onClick:N},[F.value?(o(),a("span",ts,n(g(p)("common.expired")||"已到期"),1)):i.quantifiedToday&&w.value?(o(),a("span",os,n(w.value),1)):i.quantifiedToday?(o(),a("span",ss,n(g(p)("common.quantified")),1)):(o(),a("span",ns,n(g(p)("common.quantify")),1))],10,as)]),(o(),k(x,{to:"body"},[S.value?(o(),a("div",ls,[s("div",is,[s("div",rs,[(o(),a(h,null,y(12,e=>s("span",{key:e,class:"dot",style:f({"--i":e})},null,4)),64))]),(o(),a("svg",cs,[r[1]||(r[1]=s("circle",{class:"progress-ring-bg",cx:"100",cy:"100",r:"90"},null,-1)),s("circle",{class:"progress-ring-progress",cx:"100",cy:"100",r:"90",style:f({"stroke-dashoffset":P.value})},null,4)])),s("div",{class:m(["center-circle",{"is-complete":D.value}])},[s("div",ds,[D.value?(o(),a("div",ps,n(g(p)("common.quantifyComplete")),1)):(o(),a("div",us,n(g(p)("common.quantifying")),1)),D.value?t("",!0):(o(),a("div",vs,n(Math.round(T.value))+"%",1)),D.value&&A.value>0?(o(),a("div",ms," +"+n(R(A.value))+" USDT ",1)):t("",!0)])],2),s("div",gs,[s("div",hs,[s("span",null,n(Math.round(10*i.robot.daily_profit)),1)]),s("div",ys,[s("span",null,n(i.robot.daily_profit),1)]),s("div",fs,[s("span",null,n(z(i.robot.end_date)),1),s("small",null,n(g(p)("common.days")),1)]),s("div",bs,[s("span",null,n(Math.round(parseFloat(i.robot.price)/100)),1)])])])])):t("",!0)])),(o(),k(x,{to:"body"},[M.value?(o(),a("div",{key:0,class:"earnings-popup-overlay",onClick:W},[s("div",{class:"earnings-popup",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[r[2]||(r[2]=s("div",{class:"earnings-icon"},"🎉",-1)),s("div",ws,n(g(p)("robotPage.quantifySuccessTitle")||"Quantification Success!"),1),s("div",ks,"+"+n(R(A.value))+" USDT",1),s("div",_s,n(g(p)("robotPage.quantifySuccessDesc")||"Added to your balance"),1),s("button",{class:"earnings-btn",onClick:W},n(g(p)("common.confirm")||"確認"),1)])])):t("",!0)]))]);var c}}},[["__scopeId","data-v-1e491881"]]),Ss={class:"expired-robot-card"},xs={class:"robot-header"},Ts=["src","alt"],Ds={class:"robot-name"},As={class:"robot-info"},Ms={class:"info-row"},Bs={class:"info-value"},Ps={class:"info-row"},Is={class:"info-value profit"},Ws={class:"info-row"},Es={class:"info-value"},Rs={class:"info-row"},Ls={class:"info-value"},$s=G({__name:"ExpiredRobotCard",props:{robot:{type:Object,required:!0}},setup(e){const t={"Binance Ai Bot":"/static/CEX-Robots/图标.png","Coinbase Ai Bot":"/static/CEX-Robots/3.png","OKX Ai Bot":"/static/CEX-Robots/6.png","Bybit Ai Bot":"/static/CEX-Robots/5.png","Upbit Ai Bot":"/static/CEX-Robots/7.png","Bitfinex Ai Bot":"/static/CEX-Robots/2.png","Kucoin Ai Bot":"/static/CEX-Robots/15.png","Bitget Ai Bot":"/static/CEX-Robots/14.png","Gate Ai Bot":"/static/CEX-Robots/9.png","Binance Ai Bot-01":"/static/CEX-Robots/图标.png","PancakeSwap Ai Bot":"/static/DEX-Robots/1.png","Uniswap Ai Bot":"/static/DEX-Robots/2.png","BaseSwap Ai Bot":"/static/DEX-Robots/3.png","SushiSwap Ai Bot":"/static/DEX-Robots/4.png","Jupiter Ai Bot":"/static/DEX-Robots/5.png","Curve Ai Bot":"/static/DEX-Robots/6.png","DODO Ai Bot":"/static/DEX-Robots/7.png"},l=e=>(parseFloat(e)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}),i=e=>{if(!e)return"--";const a=new Date(e);return isNaN(a.getTime())?"--":a.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})+" "+a.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},r=e=>{if(e.duration_hours){const a=Number(e.duration_hours);if(a>=24){const e=Math.floor(a/24),t=a%24;return t>0?`${e}天 ${t}小时`:`${e}天`}return`${a}小时`}const a=e.start_time||e.start_date,t=e.end_time||e.end_date;if(!a||!t)return"--";const o=new Date(a),s=(new Date(t)-o)/36e5;if(s>=24){return`${Math.floor(s/24)}天`}return`${Math.floor(s)}小时`};return(c,d)=>{return o(),a("div",Ss,[s("div",xs,[s("img",{src:(u=e.robot.robot_name,t[u]||"/static/CEX-Robots/图标.png"),alt:e.robot.robot_name,class:"robot-logo"},null,8,Ts),s("h3",Ds,n(e.robot.robot_name),1),d[0]||(d[0]=s("span",{class:"expired-badge"},"已过期",-1))]),s("div",As,[s("div",Ms,[d[1]||(d[1]=s("span",{class:"info-label"},"投入本金",-1)),s("span",Bs,n(l(e.robot.price))+" USDT",1)]),s("div",Ps,[d[2]||(d[2]=s("span",{class:"info-label"},"累计收益",-1)),s("span",Is,"+"+n(l(e.robot.total_profit))+" USDT",1)]),s("div",Ws,[d[3]||(d[3]=s("span",{class:"info-label"},"运行周期",-1)),s("span",Es,n(i(e.robot.start_time||e.robot.start_date))+" ~ "+n(i(e.robot.end_time||e.robot.end_date)),1)]),s("div",Rs,[d[4]||(d[4]=s("span",{class:"info-label"},"运行时长",-1)),s("span",Ls,n(r(e.robot)),1)])])]);var u}}},[["__scopeId","data-v-1c062edb"]]),zs=i("csrf",()=>{const e=r(""),a=r(!1),t=r(null),o=c(()=>!!e.value);return{csrfToken:e,loading:a,error:t,hasToken:o,fetchToken:async function(){if(!a.value){a.value=!0,t.value=null;try{const a=await F.get("/api/csrf-token");a.data.success&&(e.value=a.data.csrfToken)}catch(o){t.value=o.message,console.error("[CSRF] Failed to fetch token:",o)}finally{a.value=!1}}},setToken:function(a){e.value=a},clearToken:function(){e.value=""},getHeaders:function(){return e.value?{"X-CSRF-Token":e.value}:{}}}}),Fs=F.create({baseURL:"",timeout:3e4,headers:{"Content-Type":"application/json"}});async function Us(e,a={}){try{return await Fs.post(e,a)}catch(t){return console.error(`[SecureAPI] POST ${e} failed:`,t),{success:!1,message:t.message||"Request failed"}}}Fs.interceptors.request.use(e=>{try{const a=zs();a.csrfToken&&(e.headers["X-CSRF-Token"]=a.csrfToken)}catch(a){}return e},e=>Promise.reject(e)),Fs.interceptors.response.use(e=>{const a=e.headers["x-csrf-token"];if(a)try{zs().setToken(a)}catch(t){}return e.data},e=>{if(403===e.response?.status){console.error("[SecureAPI] CSRF token invalid or expired");try{zs().fetchToken()}catch(a){}}return{success:!1,message:e.response?.data?.message||e.message||"Network error"}});const Ns={class:"lucky-wheel-popup"},qs={class:"wheel-container"},Os={class:"wheel-type-label"},Hs={class:"wheel-wrapper"},js=["disabled"],Xs={class:"spin-text"},Qs={class:"wheel-types"},Vs=["onClick"],Gs={class:"type-name"},Ks={class:"type-points"},Ys={class:"lucky-points-info"},Js={class:"points-label"},Zs={class:"points-value"},en={class:"points-need"},an={class:"tabs"},tn={key:0,class:"announcements-container"},on={class:"wallet"},sn={class:"prize"},nn={class:"reward"},ln={key:1,class:"records-container"},rn={key:0,class:"empty-records"},cn={key:1,class:"records-list"},dn={class:"record-info"},un={class:"record-prize"},pn={class:"record-wheel"},vn={class:"record-reward"},mn={class:"record-time"},gn={class:"result-title"},hn={class:"result-prize"},yn={class:"result-reward"},fn={class:"tip-content"},bn=G({__name:"LuckyWheelPopup",props:{visible:{type:Boolean,default:!1}},emits:["close","update:visible"],setup(i,{emit:v}){const b=i,k=v,{t:_}=d(),C=Z(),S=r(!1),x=r(0),T=r("silver"),D=r("announcements"),A=r(0),M=r([]),B=r([]),P=r(!1),I=r(null),W=r(!1),E=r(""),R=c(()=>({silver:{name:_("luckyWheel.silver"),requiredLuckyPoints:3e3,multiplier:1},gold:{name:_("luckyWheel.gold"),requiredLuckyPoints:1e4,multiplier:2},diamond:{name:_("luckyWheel.diamond"),requiredLuckyPoints:3e4,multiplier:5}}));r([{prizeId:1,icon:"₿",amount:"1",unit:"BTC"},{prizeId:2,icon:"💎",amount:"200",unit:"USDT"},{prizeId:6,icon:"🌍",amount:"5",unit:"WLD"},{prizeId:3,icon:"💎",amount:"100",unit:"USDT"},{prizeId:4,icon:"🌍",amount:"50",unit:"WLD"},{prizeId:5,icon:"🌍",amount:"30",unit:"WLD"},{prizeId:6,icon:"🌍",amount:"5",unit:"WLD"},{prizeId:6,icon:"🌍",amount:"5",unit:"WLD"}]);const L={1:[0],2:[1],3:[3],4:[4],5:[5],6:[2,6,7]},$=c(()=>{const e=T.value;return _("silver"===e?"luckyWheel.silverWheel":"gold"===e?"luckyWheel.goldWheel":"diamond"===e?"luckyWheel.diamondWheel":"luckyWheel.silverWheel")}),z=c(()=>R.value[T.value]?.requiredLuckyPoints||3e3),F=c(()=>A.value>=z.value&&C.isConnected),U=e=>{if(!e)return"";const a=new Date(e);return`${a.getMonth()+1}/${a.getDate()} ${a.getHours()}:${String(a.getMinutes()).padStart(2,"0")}`},N=e=>{E.value=e,W.value=!0},q=async()=>{if(!S.value)if(C.isConnected)if(F.value){S.value=!0;try{const e=await fetch("/api/lucky-wheel/spin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:C.walletAddress,wheel_type:T.value})}),a=await e.json();if(a.success){const e=a.data.prize,t=e.id||6,o=L[t]||[2,6,7],s=o[Math.floor(Math.random()*o.length)],n=360-(22.5+45*s),l=30*(Math.random()-.5),i=2160+n+l,r=x.value%360;x.value=x.value-r+i+360,console.log(`[LuckyWheel] 中奖: ${e.name}, prizeId: ${t}, 扇区: ${s}, 停止角度: ${n.toFixed(1)}°`),setTimeout(()=>{S.value=!1,I.value=e,P.value=!0,A.value=a.data.remainingPoints,Q(),X()},4e3)}else S.value=!1,N(a.message||_("luckyWheel.spinFailed"))}catch(e){console.error("[LuckyWheel] 抽奖失败:",e),S.value=!1,N(_("luckyWheel.spinFailed"))}}else N(_("luckyWheel.insufficientPointsDetail",{need:z.value,current:A.value}));else N(_("invite.connectWalletFirst"))},O=()=>{S.value||(k("close"),k("update:visible",!1))},H=()=>{P.value=!1,I.value=null},j=async()=>{if(C.isConnected)try{const e=await fetch(`/api/lucky-wheel/points?wallet_address=${C.walletAddress}`),a=await e.json();a.success&&(A.value=a.data.luckyPoints)}catch(e){console.error("[LuckyWheel] 获取幸运值失败:",e)}},X=async()=>{try{const e=await fetch("/api/lucky-wheel/announcements?limit=50"),a=await e.json();a.success&&(M.value=a.data)}catch(e){console.error("[LuckyWheel] 获取公告失败:",e)}},Q=async()=>{if(C.isConnected)try{const e=await fetch(`/api/lucky-wheel/records?wallet_address=${C.walletAddress}&limit=20`),a=await e.json();a.success&&(B.value=a.data)}catch(e){console.error("[LuckyWheel] 获取记录失败:",e)}},V=r(null);let G=null;const K=()=>{G&&clearInterval(G),G=setInterval(()=>{if(V.value&&"announcements"===D.value){const e=V.value;e.scrollTop>=e.scrollHeight-e.clientHeight?e.scrollTop=0:e.scrollTop+=1}},50)};return e(()=>b.visible,e=>{e?(j(),X(),Q(),K()):G&&(clearInterval(G),G=null)}),u(()=>{b.visible&&(j(),X(),Q(),K())}),p(()=>{G&&clearInterval(G)}),(e,r)=>i.visible?(o(),a("div",{key:0,class:"lucky-wheel-overlay",onClick:l(O,["self"])},[s("div",Ns,[s("button",{class:"close-btn",onClick:O},"×"),s("div",qs,[s("div",Os,n($.value),1),s("div",Hs,[r[7]||(r[7]=s("div",{class:"wheel-pointer"},[s("div",{class:"pointer-arrow"})],-1)),s("div",{class:m(["wheel",{spinning:S.value}]),style:f({transform:`rotate(${x.value}deg)`})},[...r[6]||(r[6]=[w('<div class="prize-item prize-0" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>₿</span><span class="prize-text" data-v-8619d97c>1</span><span class="prize-unit" data-v-8619d97c>BTC</span></div><div class="prize-item prize-1" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>💎</span><span class="prize-text" data-v-8619d97c>200</span><span class="prize-unit" data-v-8619d97c>USDT</span></div><div class="prize-item prize-2" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>5</span><span class="prize-unit" data-v-8619d97c>WLD</span></div><div class="prize-item prize-3" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>💎</span><span class="prize-text" data-v-8619d97c>100</span><span class="prize-unit" data-v-8619d97c>USDT</span></div><div class="prize-item prize-4" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>50</span><span class="prize-unit" data-v-8619d97c>WLD</span></div><div class="prize-item prize-5" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>30</span><span class="prize-unit" data-v-8619d97c>WLD</span></div><div class="prize-item prize-6" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>5</span><span class="prize-unit" data-v-8619d97c>WLD</span></div><div class="prize-item prize-7" data-v-8619d97c><span class="prize-icon" data-v-8619d97c>🌍</span><span class="prize-text" data-v-8619d97c>5</span><span class="prize-unit" data-v-8619d97c>WLD</span></div>',8)])],6),s("button",{class:m(["spin-btn",{disabled:S.value}]),disabled:S.value,onClick:q},[s("span",Xs,n(S.value?g(_)("luckyWheel.spinning"):F.value?g(_)("luckyWheel.spinNow"):g(_)("luckyWheel.insufficientPoints")),1)],10,js)])]),s("div",Qs,[(o(!0),a(h,null,y(R.value,(e,t)=>(o(),a("button",{key:t,class:m(["wheel-type-btn",{active:T.value===t}]),onClick:e=>(e=>{S.value||(T.value=e)})(t)},[s("span",Gs,n(e.name),1),s("span",Ks,n(e.requiredLuckyPoints),1)],10,Vs))),128))]),s("div",Ys,[s("span",Js,n(g(_)("luckyWheel.myLuckyPoints")),1),s("span",Zs,n(A.value),1),s("span",en,n(g(_)("luckyWheel.needPoints",{points:z.value})),1)]),s("div",an,[s("button",{class:m(["tab-btn",{active:"announcements"===D.value}]),onClick:r[0]||(r[0]=e=>D.value="announcements")},n(g(_)("luckyWheel.winAnnouncements")),3),s("button",{class:m(["tab-btn",{active:"records"===D.value}]),onClick:r[1]||(r[1]=e=>D.value="records")},n(g(_)("luckyWheel.myRecords")),3)]),"announcements"===D.value?(o(),a("div",tn,[s("div",{class:"announcements-scroll",ref_key:"announcementsRef",ref:V},[(o(!0),a(h,null,y(M.value,(e,t)=>(o(),a("div",{key:t,class:"announcement-item"},[s("span",on,n(e.walletAddress),1),s("span",sn,n(e.prizeName),1),s("span",nn,n(e.rewardDisplay),1)]))),128))],512)])):t("",!0),"records"===D.value?(o(),a("div",ln,[0===B.value.length?(o(),a("div",rn,n(g(_)("luckyWheel.noRecords")),1)):(o(),a("div",cn,[(o(!0),a(h,null,y(B.value,e=>{return o(),a("div",{key:e.id,class:"record-item"},[s("div",dn,[s("span",un,n(e.prize_name),1),s("span",pn,n((t=e.wheel_type,"silver"===t?_("luckyWheel.silverWheel"):"gold"===t?_("luckyWheel.goldWheel"):"diamond"===t?_("luckyWheel.diamondWheel"):t)),1)]),s("div",vn," +"+n(e.reward_amount)+" "+n(e.reward_type?.toUpperCase()),1),s("div",mn,n(U(e.created_at)),1)]);var t}),128))]))])):t("",!0)]),P.value?(o(),a("div",{key:0,class:"result-overlay",onClick:H},[s("div",{class:"result-popup",onClick:r[2]||(r[2]=l(()=>{},["stop"]))},[s("div",gn,n(g(_)("luckyWheel.congratulations")),1),s("div",hn,n(I.value?.name),1),s("div",yn," +"+n(I.value?.rewardAmount)+" "+n(I.value?.rewardType?.toUpperCase()),1),s("button",{class:"result-btn",onClick:H},n(g(_)("luckyWheel.confirm")),1)])])):t("",!0),W.value?(o(),a("div",{key:1,class:"tip-overlay",onClick:r[5]||(r[5]=e=>W.value=!1)},[s("div",{class:"tip-popup",onClick:r[4]||(r[4]=l(()=>{},["stop"]))},[s("div",fn,n(E.value),1),s("button",{class:"tip-btn",onClick:r[3]||(r[3]=e=>W.value=!1)},n(g(_)("luckyWheel.confirm")),1)])])):t("",!0)])):t("",!0)}},[["__scopeId","data-v-8619d97c"]]),wn="/static/CEX-Robots/%E5%9B%BE%E6%A0%87.png",kn={class:"robot-header"},_n=["alt"],Cn={class:"robot-name"},Sn={class:"robot-info"},xn={class:"info-row"},Tn={class:"info-label"},Dn={class:"info-value"},An={class:"info-row"},Mn={class:"info-label"},Bn={class:"info-value highlight"},Pn={key:0,class:"info-row"},In={class:"info-label"},Wn={class:"info-value profit"},En={key:1,class:"info-row"},Rn={class:"info-label"},Ln={class:"info-value profit"},$n={class:"info-row"},zn={class:"info-label"},Fn={class:"info-value"},Un={class:"info-row"},Nn={class:"info-label"},qn={class:"info-value"},On={class:"info-row"},Hn={class:"info-label"},jn={class:"info-value"},Xn={class:"robot-footer"},Qn={key:0,class:"robot-status"},Vn={key:0,class:"status-text quantified"},Gn={key:1,class:"status-text pending"},Kn={key:1,class:"robot-status"},Yn={key:0,class:"status-text quantified"},Jn={key:1,class:"status-text pending"},Zn=["disabled"],el={key:0,class:"loading-spinner"},al={key:1},tl={key:2},ol={key:3},sl={key:4},nl={key:0,class:"quantify-overlay"},ll={class:"quantify-animation-container"},il={class:"outer-dots"},rl={class:"progress-ring",viewBox:"0 0 200 200"},cl={class:"center-content"},dl={key:0,class:"quantify-text"},ul={key:1,class:"complete-text"},pl={key:2,class:"progress-percent"},vl={key:3,class:"earnings-text"},ml={class:"small-circles"},gl={class:"small-circle circle-1"},hl={class:"small-circle circle-2"},yl={class:"small-circle circle-3"},fl={class:"small-circle circle-4"},bl={class:"earnings-title"},wl={class:"earnings-amount"},kl={class:"earnings-desc"},_l=G({__name:"FollowMyRobotCard",props:{robot:{type:Object,required:!0},isQuantifying:{type:Boolean,default:!1},quantifiedToday:{type:Boolean,default:!1},isQuantified:{type:Boolean,default:!1},lastEarnings:{type:Number,default:0},nextQuantifyTime:{type:String,default:""},hoursRemaining:{type:Number,default:0}},emits:["quantify","animationComplete"],setup(i,{emit:u}){const{t:p}=d(),v=i,b=u,w=r("");let _=null;const C=()=>{if(v.nextQuantifyTime){const e=new Date(v.nextQuantifyTime)-new Date;if(e>0){const a=Math.floor(e/36e5),t=Math.floor(e%36e5/6e4);w.value=`${a}h ${t}m`}else w.value="",_&&(clearInterval(_),_=null)}else v.hoursRemaining>0?w.value=!(e=v.hoursRemaining)||e<=0?"":`${Math.floor(e)}h ${Math.floor(e%1*60)}m`:w.value="";var e};e(()=>v.nextQuantifyTime,e=>{e?(C(),_&&clearInterval(_),_=setInterval(C,6e4)):(w.value="",_&&(clearInterval(_),_=null))},{immediate:!0}),e(()=>v.hoursRemaining,e=>{e>0&&(C(),_||(_=setInterval(C,6e4)))},{immediate:!0});const S=r(!1),T=r(0),D=r(!1),A=r(0),M=r(!1),B=2*Math.PI*90,P=c(()=>B-T.value/100*B);e(()=>v.isQuantifying,e=>{e&&(S.value=!0,T.value=0,D.value=!1,I())}),e(()=>v.lastEarnings,e=>{e>0&&(A.value=e)});const I=()=>{const e=performance.now(),a=t=>{const o=t-e,s=Math.min(o/3e3*100,100);if(T.value=s,s<100)requestAnimationFrame(a);else{if(D.value=!0,b("animationComplete",v.robot.id),0===A.value){const e=parseFloat(v.robot.daily_profit)/100;A.value=parseFloat(v.robot.price)*e}setTimeout(()=>{S.value=!1,D.value=!1,T.value=0,"high"!==v.robot.robot_type&&A.value>0&&(M.value=!0)},1500)}};requestAnimationFrame(a)},W=()=>{M.value=!1,A.value=0},E=e=>e?parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}):"0.00",R=e=>{if(!e)return"-";const a=new Date(e);return isNaN(a.getTime())?"-":a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})+" "+a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},L=e=>{if(void 0!==e.hours_remaining&&null!==e.hours_remaining){const a=Number(e.hours_remaining);if(a<=0)return p("common.expired")||"Expired";if(a>=24){const e=Math.floor(a/24),t=Math.floor(a%24);return t>0?`${e} ${p("common.days")} ${t}h`:`${e} ${p("common.days")}`}return`${Math.floor(a)}h ${Math.floor(a%1*60)}m`}const a=e.end_time||e.end_date;if(!a)return"-";const t=new Date(a),o=new Date,s=t.getTime()-o.getTime();if(s<=0)return p("common.expired")||"Expired";const n=s/36e5;if(n>=24){const e=Math.floor(n/24),a=Math.floor(n%24);return a>0?`${e} ${p("common.days")} ${a}h`:`${e} ${p("common.days")}`}return`${Math.floor(n)}h ${Math.floor(n%1*60)}m`},$=e=>{if(!e)return 0;const a=new Date(e),t=new Date,o=a.getTime()-t.getTime(),s=Math.ceil(o/864e5);return Math.max(0,s)},z=()=>{b("quantify",v.robot)};return(e,r)=>(o(),a("div",{class:m(["follow-robot-card",{"high-robot":"high"===i.robot.robot_type}])},[s("div",kn,[s("img",{src:wn,alt:i.robot.robot_name,class:"robot-logo"},null,8,_n),s("h3",Cn,n(i.robot.robot_name),1),s("span",{class:m(["robot-type-badge",i.robot.robot_type])},n("high"===i.robot.robot_type?"High":"Grid"),3)]),s("div",Sn,[s("div",xn,[s("span",Tn,n(g(p)("followPage.myRobot.principal")),1),s("span",Dn,n(E(i.robot.price))+" USDT",1)]),s("div",An,[s("span",Mn,n(g(p)("followPage.dailyProfit")),1),s("span",Bn,n(i.robot.daily_profit)+" %",1)]),"high"===i.robot.robot_type?(o(),a("div",Pn,[s("span",In,n(g(p)("followPage.myRobot.expectedReturn")),1),s("span",Wn,n(E(i.robot.expected_return))+" USDT",1)])):(o(),a("div",En,[s("span",Rn,n(g(p)("followPage.myRobot.totalProfit")),1),s("span",Ln,"+"+n(E(i.robot.total_profit))+" USDT",1)])),s("div",$n,[s("span",zn,n(g(p)("followPage.myRobot.startDate")),1),s("span",Fn,n(R(i.robot.start_time||i.robot.start_date)),1)]),s("div",Un,[s("span",Nn,n(g(p)("followPage.myRobot.endDate")),1),s("span",qn,n(R(i.robot.end_time||i.robot.end_date)),1)]),s("div",On,[s("span",Hn,n(g(p)("followPage.myRobot.remainingTime")||g(p)("followPage.myRobot.remainingDays")),1),s("span",jn,n(L(i.robot)),1)])]),s("div",Xn,["high"===i.robot.robot_type?(o(),a("div",Qn,[s("span",{class:m(["status-dot",{quantified:i.isQuantified}])},null,2),i.isQuantified?(o(),a("span",Vn,n(g(p)("followPage.myRobot.waitingMaturity")),1)):(o(),a("span",Gn,n(g(p)("followPage.myRobot.pendingQuantify")),1))])):(o(),a("div",Kn,[s("span",{class:m(["status-dot",{quantified:i.quantifiedToday}])},null,2),i.quantifiedToday?(o(),a("span",Yn,n(g(p)("followPage.myRobot.quantifiedToday")),1)):(o(),a("span",Jn,n(g(p)("followPage.myRobot.canQuantify")),1))])),s("button",{class:m(["quantify-button",{disabled:"high"===i.robot.robot_type&&i.isQuantified||"high"!==i.robot.robot_type&&i.quantifiedToday,loading:i.isQuantifying}]),disabled:"high"===i.robot.robot_type&&i.isQuantified||"high"!==i.robot.robot_type&&i.quantifiedToday||i.isQuantifying,onClick:z},[i.isQuantifying?(o(),a("span",el)):"high"===i.robot.robot_type&&i.isQuantified?(o(),a("span",al,n(g(p)("followPage.myRobot.quantified")),1)):"high"!==i.robot.robot_type&&i.quantifiedToday&&w.value?(o(),a("span",tl,n(w.value),1)):"high"!==i.robot.robot_type&&i.quantifiedToday?(o(),a("span",ol,n(g(p)("followPage.myRobot.quantified")),1)):(o(),a("span",sl,n(g(p)("followPage.myRobot.quantify")),1))],10,Zn)]),(o(),k(x,{to:"body"},[S.value?(o(),a("div",nl,[s("div",ll,[s("div",il,[(o(),a(h,null,y(12,e=>s("span",{key:e,class:"dot",style:f({"--i":e})},null,4)),64))]),(o(),a("svg",rl,[r[1]||(r[1]=s("circle",{class:"progress-ring-bg",cx:"100",cy:"100",r:"90"},null,-1)),s("circle",{class:"progress-ring-progress",cx:"100",cy:"100",r:"90",style:f({"stroke-dashoffset":P.value})},null,4)])),s("div",{class:m(["center-circle",{"is-complete":D.value}])},[s("div",cl,[D.value?(o(),a("div",ul,n(g(p)("common.quantifyComplete")),1)):(o(),a("div",dl,n(g(p)("common.quantifying")),1)),D.value?t("",!0):(o(),a("div",pl,n(Math.round(T.value))+"%",1)),D.value&&A.value>0?(o(),a("div",vl," +"+n(E(A.value))+" USDT ",1)):t("",!0)])],2),s("div",ml,[s("div",gl,[s("span",null,n(Math.round(10*i.robot.daily_profit)),1)]),s("div",hl,[s("span",null,n(i.robot.daily_profit)+"%",1)]),s("div",yl,[s("span",null,n($(i.robot.end_date)),1),s("small",null,n(g(p)("common.days")),1)]),s("div",fl,[s("span",null,n(Math.round(parseFloat(i.robot.price)/100)),1)])])])])):t("",!0)])),(o(),k(x,{to:"body"},[M.value?(o(),a("div",{key:0,class:"earnings-popup-overlay",onClick:W},[s("div",{class:"earnings-popup",onClick:r[0]||(r[0]=l(()=>{},["stop"]))},[r[2]||(r[2]=s("div",{class:"earnings-icon"},"🎉",-1)),s("div",bl,n(g(p)("followPage.myRobot.quantifySuccess")||"Quantification Success!"),1),s("div",wl,"+"+n(E(A.value))+" USDT",1),s("div",kl,n("high"===i.robot.robot_type?g(p)("followPage.myRobot.highRobotEarningsNote")||"Profit will be returned at maturity":g(p)("followPage.myRobot.gridRobotEarningsNote")||"Added to your balance"),1),s("button",{class:"earnings-btn",onClick:W},n(g(p)("common.confirm")||"OK"),1)])])):t("",!0)]))],2))}},[["__scopeId","data-v-d189a87b"]]),Cl={class:"robot-header"},Sl=["alt"],xl={class:"robot-name"},Tl={class:"robot-info"},Dl={class:"info-row"},Al={class:"info-label"},Ml={class:"info-value"},Bl={key:0,class:"info-row"},Pl={class:"info-label"},Il={class:"info-value profit"},Wl={key:1,class:"info-row"},El={class:"info-label"},Rl={class:"info-value profit"},Ll={class:"info-row"},$l={class:"info-label"},zl={class:"info-value"},Fl={class:"info-row"},Ul={class:"info-label"},Nl={class:"info-value"},ql={class:"expired-badge"},Ol=G({__name:"FollowExpiredRobotCard",props:{robot:{type:Object,required:!0}},setup(e){const{t:t}=d(),l=e=>e?parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}):"0.00",i=e=>{if(!e)return"-";const a=new Date(e);return isNaN(a.getTime())?"-":a.toLocaleDateString("en-US",{month:"short",day:"numeric"})+" "+a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})},r=e=>{if(e.duration_hours){const a=Number(e.duration_hours);if(a>=24){const e=Math.floor(a/24),o=a%24;return o>0?`${e} ${t("common.days")} ${o}h`:`${e} ${t("common.days")}`}return`${a}h`}const a=e.start_time||e.start_date,o=e.end_time||e.end_date;if(!a||!o)return"-";const s=new Date(a),n=(new Date(o)-s)/36e5;if(n>=24){return`${Math.floor(n/24)} ${t("common.days")}`}return`${Math.floor(n)}h`};return(c,d)=>(o(),a("div",{class:m(["expired-robot-card",{"high-robot":"high"===e.robot.robot_type}])},[s("div",Cl,[s("img",{src:wn,alt:e.robot.robot_name,class:"robot-logo"},null,8,Sl),s("h3",xl,n(e.robot.robot_name),1),s("span",{class:m(["robot-type-badge",e.robot.robot_type])},n("high"===e.robot.robot_type?"High":"Grid"),3)]),s("div",Tl,[s("div",Dl,[s("span",Al,n(g(t)("followPage.myRobot.principal")),1),s("span",Ml,n(l(e.robot.price))+" USDT",1)]),"high"===e.robot.robot_type?(o(),a("div",Bl,[s("span",Pl,n(g(t)("followPage.myRobot.returnedAmount")),1),s("span",Il,n(l(e.robot.expected_return))+" USDT",1)])):(o(),a("div",Wl,[s("span",El,n(g(t)("followPage.myRobot.totalProfit")),1),s("span",Rl,"+"+n(l(e.robot.total_profit))+" USDT",1)])),s("div",Ll,[s("span",$l,n(g(t)("followPage.myRobot.period")),1),s("span",zl,n(i(e.robot.start_time||e.robot.start_date))+" - "+n(i(e.robot.end_time||e.robot.end_date)),1)]),s("div",Fl,[s("span",Ul,n(g(t)("followPage.myRobot.duration")||"运行时长"),1),s("span",Nl,n(r(e.robot)),1)])]),s("div",ql,n(g(t)("followPage.myRobot.expired")),1)],2))}},[["__scopeId","data-v-f78c89b5"]]),Hl={class:"deposit-modal"},jl={class:"modal-title"},Xl={class:"chain-select-section"},Ql={class:"input-label"},Vl={class:"chain-buttons"},Gl={class:"chain-info"},Kl={class:"chain-desc"},Yl={class:"chain-info"},Jl={class:"chain-desc"},Zl={class:"input-section"},ei={class:"input-label"},ai={class:"amount-input-wrapper"},ti={class:"quick-amounts"},oi=["onClick"],si={class:"tip-text"},ni={class:"button-group"},li=["disabled"],ii=G({__name:"DepositModal",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","success"],setup(i,{emit:u}){const{t:p}=d(),v=i,f=u,b=Z();zs();const w=r(""),k=r(!1),_=r("BSC"),C=r(["BSC","ETH"]),S=r({BSC:{address:"0x0290df8A512Eff68d0B0a3ECe1E3F6aAB49d79D4",chainId:"0x38",chainName:"BNB Smart Chain",token:"USDT",tokenContract:"0x55d398326f99059fF775485246999027B3197955",decimals:18,rpcUrl:"https://bsc-dataseed.binance.org/",explorer:"https://bscscan.com/"},ETH:{address:"0x8a92c73FdE5d0313303989eB269d6d17ffb1ba9d",chainId:"0x1",chainName:"Ethereum Mainnet",token:"USDT",tokenContract:"0xdAC17F958D2ee523a2206206994597C13D831ec7",decimals:6,rpcUrl:"https://mainnet.infura.io/v3/",explorer:"https://etherscan.io/"}}),x=c(()=>S.value[_.value]),T=c(()=>x.value?.address||""),D=[20,100,300,500,800],B=c(()=>x.value?.tokenContract||""),P=c(()=>{const e=parseFloat(w.value);return!isNaN(e)&&e>=20});e(()=>v.visible,e=>{e&&(I(),W())});const I=()=>{w.value="",k.value=!1},W=async()=>{try{const e=await fetch("/api/platform/wallet"),a=await e.json();a.success&&a.data&&(a.data.wallets&&(S.value={...S.value,...a.data.wallets}),a.data.supportedChains&&(C.value=a.data.supportedChains),console.log("[Deposit] Wallet configs loaded:",S.value))}catch(e){console.error("Failed to fetch platform wallet:",e)}},E=()=>{f("update:visible",!1)},R=async()=>{if(P.value)if(te())if(b.isConnected){k.value=!0;try{const a=window.ethereum,t=x.value,{chainId:o}=await(async()=>{if(!te())return{chainId:"",networkName:"Unknown"};try{const e=window.ethereum,a=await e.request({method:"eth_chainId"});return{chainId:a,networkName:{"0x1":"Ethereum Mainnet","0x38":"BSC Mainnet","0x89":"Polygon Mainnet","0xa86a":"Avalanche C-Chain","0xa4b1":"Arbitrum One","0xa":"Optimism","0x5":"Goerli Testnet","0xaa36a7":"Sepolia Testnet"}[a]||`Chain ID: ${parseInt(a,16)}`}}catch(e){return console.error("[Wallet] Get network error:",e),{chainId:"",networkName:"Unknown"}}})();if(o!==t.chainId)try{await a.request({method:"wallet_switchEthereumChain",params:[{chainId:t.chainId}]})}catch(e){if(4902!==e.code)throw e;if("BSC"!==_.value)return alert("Please add Ethereum Mainnet to your wallet manually"),void(k.value=!1);await a.request({method:"wallet_addEthereumChain",params:[{chainId:t.chainId,chainName:t.chainName,nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:[t.rpcUrl],blockExplorerUrls:[t.explorer]}]})}const s=parseFloat(w.value),n=await(async()=>{try{const e=window.ethereum;if(!e)return 0;const a=x.value,t="0x70a08231"+b.walletAddress.slice(2).padStart(64,"0"),o=await e.request({method:"eth_call",params:[{to:a.tokenContract,data:t},"latest"]}),s=BigInt(o),n=a.decimals,l=Number(s)/Math.pow(10,n);return console.log(`[Deposit] Wallet USDT balance on ${_.value}:`,l),l}catch(e){return console.error("[Deposit] Failed to get USDT balance:",e),0}})();if(n<s){const e=p("depositModal.walletInsufficientBalance",{balance:n.toFixed(4)}),a=e.includes("depositModal.")?`Insufficient USDT in wallet. Current balance: ${n.toFixed(4)} USDT`:e;return alert(a),void(k.value=!1)}const l=t.decimals,i=BigInt(Math.floor(s*Math.pow(10,l))).toString(16).padStart(64,"0"),r="0xa9059cbb"+T.value.slice(2).padStart(64,"0")+i,c=await a.request({method:"eth_sendTransaction",params:[{from:b.walletAddress,to:B.value,data:r,gas:"ETH"===_.value?"0x14C08":"0x186A0"}]});console.log("[Deposit] Transaction sent:",c);const d=await L(c);if(!d.success)return void alert(d.message||p("depositModal.depositFailed"));f("success",{amount:w.value,txHash:c}),alert(p("depositModal.depositSuccess",{amount:w.value})),E()}catch(a){console.error("[Deposit] Transfer error:",a),4001===a.code?alert(p("depositModal.transactionCancelled")):-32e3===a.code?alert(p("depositModal.insufficientBalance")):alert(a.message||p("depositModal.transferFailed"))}finally{k.value=!1}}else alert(p("depositModal.connectWalletFirst"));else alert(p("depositModal.openInWalletBrowser"));else alert(p("depositModal.enterValidAmount"))},L=async e=>{try{const a=await Us("/api/user/deposit",{wallet_address:b.walletAddress,amount:w.value,tx_hash:e,token:"USDT",chain:_.value});if(a.success){const e=parseFloat(a.data.new_balance.usdt)||0,t=parseFloat(a.data.new_balance.wld)||0;b.setUsdtBalance(a.data.new_balance.usdt),b.setWldBalance(a.data.new_balance.wld);const o=e+t*0;return b.setEquityValue(o.toFixed(4)),console.log("[Deposit] Balance updated:",{usdt:a.data.new_balance.usdt,wld:a.data.new_balance.wld,equity:o.toFixed(4)}),{success:!0}}return console.error("[Deposit] Server rejected deposit:",a.message),{success:!1,message:a.message}}catch(a){return console.error("[Deposit] Submit record error:",a),{success:!1,message:a.message}}};return(e,r)=>i.visible?(o(),a("div",{key:0,class:"deposit-modal-overlay",onClick:l(E,["self"])},[s("div",Hl,[s("h2",jl,n(g(p)("depositModal.title")),1),s("div",Xl,[s("label",Ql,n(g(p)("depositModal.selectNetwork")),1),s("div",Vl,[s("button",{class:m(["chain-btn",{selected:"BSC"===_.value}]),onClick:r[0]||(r[0]=e=>_.value="BSC")},[r[4]||(r[4]=s("img",{src:"/static/bsc-chain.png",alt:"BSC",class:"chain-logo-img"},null,-1)),s("div",Gl,[r[3]||(r[3]=s("span",{class:"chain-name"},"BSC",-1)),s("span",Kl,n(g(p)("depositModal.lowGasFee")),1)])],2),s("button",{class:m(["chain-btn",{selected:"ETH"===_.value}]),onClick:r[1]||(r[1]=e=>_.value="ETH")},[r[6]||(r[6]=s("img",{src:"/static/eth-chain.png",alt:"ETH",class:"chain-logo-img"},null,-1)),s("div",Yl,[r[5]||(r[5]=s("span",{class:"chain-name"},"Ethereum",-1)),s("span",Jl,n(g(p)("depositModal.mainnet")),1)])],2)])]),s("div",Zl,[s("label",ei,n(g(p)("depositModal.enterAmount")),1),s("div",ai,[A(s("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>w.value=e),type:"number",min:"20",step:"1",placeholder:"0",class:"amount-input"},null,512),[[M,w.value]])])]),s("div",ti,[(o(),a(h,null,y(D,e=>s("button",{key:e,class:m(["quick-amount-btn",{selected:w.value===e.toString()}]),onClick:a=>w.value=e.toString()},n(e),11,oi)),64))]),s("p",si,n(g(p)("depositModal.minDepositTip")),1),s("div",ni,[s("button",{class:"btn-cancel",onClick:E},n(g(p)("common.cancel")),1),s("button",{class:"btn-sure",disabled:!P.value||k.value,onClick:R},n(k.value?g(p)("common.processing"):g(p)("common.confirm")),9,li)])])])):t("",!0)}},[["__scopeId","data-v-d38f2269"]]),ri={class:"success-dialog"},ci={class:"success-title"},di={class:"success-content"},ui={class:"withdraw-modal"},pi={class:"modal-title"},vi={class:"input-section"},mi={class:"input-label"},gi={class:"amount-input-wrapper"},hi={class:"tip-text"},yi={class:"button-group"},fi=["disabled"],bi=G({__name:"WithdrawModal",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","success"],setup(i,{emit:u}){const{t:p}=d(),v=i,m=u,y=Z(),f=r(""),b=r(!1),w=r(0),k=r(!1),_=r({amount:0,fee:"0",actualAmount:"0"}),C=c(()=>{const e=parseFloat(f.value);return!isNaN(e)&&e>=5&&e<=w.value});e(()=>v.visible,e=>{e&&(S(),x())});const S=()=>{f.value="",b.value=!1},x=async()=>{if(y.isConnected)try{const e=await fetch(`/api/user/balance?wallet_address=${y.walletAddress}`),a=await e.json();a.success&&(w.value=parseFloat(a.data.usdt_balance)||0)}catch(e){console.error("Failed to fetch user balance:",e)}},T=()=>{m("update:visible",!1)},D=()=>{k.value=!1,T()},B=()=>{w.value>0&&(f.value=w.value.toString())},P=async()=>{if(C.value)if(y.isConnected){b.value=!0;try{const e=parseFloat(f.value),a=.005*e,t=e-a,o=await fetch("/api/user/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet_address:y.walletAddress,amount:e,fee:a,actual_amount:t,to_address:y.walletAddress})}),s=await o.json();s.success?(s.data.new_balance&&y.setUsdtBalance(s.data.new_balance),m("success",{amount:e,fee:a,actualAmount:t}),k.value=!0,_.value={amount:e,fee:a.toFixed(4),actualAmount:t.toFixed(4)}):alert(s.message||"Withdrawal failed")}catch(e){console.error("[Withdraw] Error:",e),alert(e.message||"Withdrawal failed")}finally{b.value=!1}}else alert(p("withdrawModal.connectWalletFirst"));else parseFloat(f.value)<5?alert(p("withdrawModal.minWithdrawAmount")):parseFloat(f.value)>w.value?alert(p("withdrawModal.insufficientBalance")):alert(p("withdrawModal.enterValidAmount"))};return(e,r)=>(o(),a(h,null,[k.value?(o(),a("div",{key:0,class:"success-dialog-overlay",onClick:l(D,["self"])},[s("div",ri,[s("h3",ci,n(g(p)("common.tips")),1),s("div",di,[s("p",null,n(g(p)("withdrawModal.requestSubmitted")),1),s("p",null,n(g(p)("withdrawModal.amount"))+": "+n(_.value.amount)+" USDT",1),s("p",null,n(g(p)("withdrawModal.fee"))+": "+n(_.value.fee)+" USDT",1),s("p",null,n(g(p)("withdrawModal.youWillReceive"))+": "+n(_.value.actualAmount)+" USDT",1)]),s("button",{class:"success-btn",onClick:D},n(g(p)("common.confirm")),1)])])):t("",!0),i.visible?(o(),a("div",{key:1,class:"withdraw-modal-overlay",onClick:l(T,["self"])},[s("div",ui,[s("h2",pi,n(g(p)("withdrawModal.title")),1),s("div",vi,[s("label",mi,n(g(p)("withdrawModal.enterAmount")),1),s("div",gi,[A(s("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>f.value=e),type:"number",min:"5",step:"0.01",placeholder:"0",class:"amount-input"},null,512),[[M,f.value]]),s("button",{class:"max-btn",onClick:B},"MAX")])]),s("p",hi,n(g(p)("withdrawModal.tipText")),1),s("div",yi,[s("button",{class:"btn-cancel",onClick:T},n(g(p)("common.cancel")),1),s("button",{class:"btn-sure",disabled:!C.value||b.value,onClick:P},n(b.value?"Processing...":"Sure"),9,fi)])])])):t("",!0)],64))}},[["__scopeId","data-v-649e6d8f"]]),wi={class:"quantify-history-popup"},ki={class:"popup-header"},_i={class:"popup-title"},Ci={class:"stats-section"},Si={class:"stats-grid"},xi={class:"stat-label"},Ti={class:"stat-value"},Di={class:"stat-label"},Ai={class:"stat-value"},Mi={class:"stat-label"},Bi={class:"stat-value"},Pi={class:"stat-label"},Ii={class:"stat-value"},Wi={class:"history-section"},Ei={class:"section-title"},Ri={key:0,class:"loading-state"},Li={key:1,class:"empty-state"},$i={key:2,class:"history-list"},zi={class:"item-left"},Fi={class:"robot-name"},Ui={class:"robot-info"},Ni={class:"principal"},qi={class:"time"},Oi={class:"item-right"},Hi={key:0,class:"load-more"},ji=["disabled"],Xi=G({__name:"QuantifyHistoryPopup",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","close"],setup(i,{emit:u}){const{t:p}=d(),v=Z(),f=i,b=u,w=r(!1),_=r(!1),C=r([]),S=r({today_earnings:"0.0000",week_earnings:"0.0000",month_earnings:"0.0000",total_earnings:"0.0000",total_count:0}),T=r(0),D=r(0),A=r("all"),M=c(()=>C.value.length<T.value);e(()=>f.visible,async e=>{e&&v.isConnected&&await B()});const B=async()=>{w.value=!0,D.value=0,C.value=[];try{await Promise.all([P(),I()])}finally{w.value=!1}},P=async()=>{try{const e=await fetch(`/api/robot/quantify-stats?wallet_address=${v.walletAddress}`),a=await e.json();a.success&&(S.value=a.data)}catch(e){console.error("[QuantifyHistory] Failed to fetch stats:",e)}},I=async()=>{try{let e=`/api/robot/quantify-history?wallet_address=${v.walletAddress}&limit=20&offset=${D.value}`;"all"!==A.value&&(e+=`&period=${A.value}`);const a=await fetch(e),t=await a.json();t.success&&(0===D.value?C.value=t.data.records:C.value=[...C.value,...t.data.records],T.value=t.data.total)}catch(e){console.error("[QuantifyHistory] Failed to fetch history:",e)}},W=async e=>{if(A.value!==e){A.value=e,w.value=!0,D.value=0,C.value=[];try{await I()}finally{w.value=!1}}},E=async()=>{if(!_.value&&M.value){_.value=!0,D.value+=20;try{await I()}finally{_.value=!1}}},R=()=>{b("update:visible",!1),b("close")},L=e=>e?parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:4}):"0.00",$=e=>{if(!e)return"-";return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(e,r)=>(o(),k(x,{to:"body"},[i.visible?(o(),a("div",{key:0,class:"quantify-history-overlay",onClick:l(R,["self"])},[s("div",wi,[s("div",ki,[s("h2",_i,n(g(p)("quantifyHistory.title")),1),s("button",{class:"close-btn",onClick:R},"×")]),s("div",Ci,[s("div",Si,[s("div",{class:m(["stat-card clickable",{active:"today"===A.value}]),onClick:r[0]||(r[0]=e=>W("today"))},[s("span",xi,n(g(p)("quantifyHistory.todayEarnings")),1),s("span",Ti,n(S.value.today_earnings)+" USDT",1)],2),s("div",{class:m(["stat-card clickable",{active:"week"===A.value}]),onClick:r[1]||(r[1]=e=>W("week"))},[s("span",Di,n(g(p)("quantifyHistory.weekEarnings")),1),s("span",Ai,n(S.value.week_earnings)+" USDT",1)],2),s("div",{class:m(["stat-card clickable",{active:"month"===A.value}]),onClick:r[2]||(r[2]=e=>W("month"))},[s("span",Mi,n(g(p)("quantifyHistory.monthEarnings")),1),s("span",Bi,n(S.value.month_earnings)+" USDT",1)],2),s("div",{class:m(["stat-card highlight clickable",{active:"all"===A.value}]),onClick:r[3]||(r[3]=e=>W("all"))},[s("span",Pi,n(g(p)("quantifyHistory.totalEarnings")),1),s("span",Ii,n(S.value.total_earnings)+" USDT",1)],2)])]),s("div",Wi,[s("h3",Ei,n(g(p)("quantifyHistory.historyTitle")),1),w.value?(o(),a("div",Ri,[r[4]||(r[4]=s("div",{class:"loading-spinner"},null,-1)),s("p",null,n(g(p)("common.loading")),1)])):0===C.value.length?(o(),a("div",Li,[s("p",null,n(g(p)("quantifyHistory.noRecords")),1)])):(o(),a("div",$i,[(o(!0),a(h,null,y(C.value,e=>{return o(),a("div",{key:e.id,class:m(["history-item",{"high-robot":"high"===e.robot_type}])},[s("div",zi,[s("div",Fi,n(e.robot_name),1),s("div",Ui,[s("span",{class:m(["robot-type",e.robot_type||"cex"])},n((t=e.robot_type,{cex:"CEX",dex:"DEX",grid:"Grid",high:"High"}[t]||"CEX")),3),s("span",Ni,n(g(p)("quantifyHistory.principal"))+": "+n(L(e.principal)),1)]),s("div",qi,n($(e.created_at)),1)]),s("div",Oi,[s("span",{class:m(["earnings",{zero:0===parseFloat(e.earnings)}])}," +"+n(L(e.earnings))+" USDT ",3)])],2);var t}),128)),M.value?(o(),a("div",Hi,[s("button",{class:"load-more-btn",disabled:_.value,onClick:E},n(_.value?g(p)("common.loading"):g(p)("quantifyHistory.loadMore")),9,ji)])):t("",!0)]))])])])):t("",!0)]))}},[["__scopeId","data-v-5c0e8e4d"]]);export{_a as A,ba as B,pa as C,Ka as D,$s as E,pt as F,Ie as G,sa as I,Ft as L,Cs as M,ye as N,Xi as Q,Re as R,$t as S,Pa as T,Qt as U,Y as W,wt as Y,G as _,We as a,st as b,Q as c,oa as d,ta as e,X as f,zs as g,Ot as h,Ao as i,le as j,bn as k,wn as l,_l as m,Ol as n,V as o,Us as p,ii as q,bi as r,te as s,O as t,Z as u,oe as v,q as w,H as x,N as y,j as z};
