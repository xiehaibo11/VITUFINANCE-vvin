import{r as e,_ as a,x as l,A as t,o as s,D as o,B as r,J as d,C as i,ay as u,Y as n,u as c,aI as p,m as _,O as f,M as v,F as b,K as m}from"./vue-vendor-CCmsYA1Y.js";import{b as w,P as g,g as y,t as h,V as x,S as D,I as C}from"./element-plus-BZcENYie.js";import{bC as U}from"./vendor-BQF3adi-.js";import{k as S,m as k,n as V,o as T,q as z,s as I}from"./index-CCj7ctyJ.js";import{u as q}from"./useIsMobile-3711GOdT.js";import{_ as $}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-BArJCJm5.js";const M={class:"page-container"},j={class:"stat-card"},R={class:"stat-icon primary"},F={class:"stat-info"},L={class:"stat-value"},E={class:"stat-card"},P={class:"stat-icon success"},Y={class:"stat-info"},W={class:"stat-value"},X={class:"stat-card"},H={class:"stat-icon warning"},A={class:"stat-info"},B={class:"stat-value"},J={class:"stat-card"},K={class:"stat-icon info"},O={class:"stat-info"},G={class:"stat-value"},N={class:"search-area"},Q=["onClick"],Z={class:"robot-name-cell"},ee={class:"robot-name"},ae={class:"robot-id-small"},le={class:"amount"},te={class:"rate positive"},se={class:"amount positive"},oe={class:"amount positive"},re={class:"datetime"},de={class:"duration"},ie={class:"datetime"},ue={class:"pagination-wrapper"},ne={class:"dialog-content-wrapper"},ce={key:0},pe={style:{"margin-top":"20px"}},_e={style:{"margin-bottom":"10px"}},fe={class:"amount positive"},ve={class:"amount positive"},be={key:1,style:{"margin-top":"20px"}},me={style:{"margin-bottom":"10px"}},we=["onClick"],ge={class:"amount positive"},ye={class:"dialog-content-wrapper"},he={key:0},xe={class:"stat-card-mini"},De={class:"stat-value positive"},Ce={class:"stat-card-mini"},Ue={class:"stat-value"},Se={class:"stat-card-mini"},ke={class:"stat-value positive"},Ve={class:"stat-card-mini"},Te={class:"stat-value"},ze={style:{"margin-top":"20px"}},Ie={style:{"margin-bottom":"10px"}},qe={class:"amount positive"},$e={class:"cancel-dialog-content"},Me={class:"wallet-address"},je={class:"amount positive"},Re={class:"cancel-dialog-content"},Fe=$({__name:"RobotsActive",setup($){const Fe=e(!1),{isMobile:Le}=q(),Ee=a({activeCount:0,totalInvestment:"0.00",totalProfit:"0.00",todayCount:0}),Pe=e([]),Ye=a({wallet_address:"",robot_type:"",quantify_status:""}),We=a({page:1,pageSize:20,total:0}),Xe=e(!1),He=e(!1),Ae=e(null),Be=e(!1),Je=e(!1),Ke=e(null),Oe=e(!1),Ge=e(!1),Ne=e(null),Qe=a({refund:!0,reason:""}),Ze=e(!1),ea=e(!1),aa=e([]),la=a({refund:!0,reason:""}),ta=async()=>{try{const e=await S();if(e.success&&e.data){Ee.activeCount=e.data.activeCount||0,Ee.totalInvestment=e.data.totalInvestment||"0.00",Ee.todayCount=e.data.todayCount||0;const a=await k({status:"active",page:1,pageSize:999999});if(a.success&&a.data.list){const e=a.data.list.reduce((e,a)=>e+parseFloat(a.total_profit||0),0);Ee.totalProfit=e.toFixed(2)}}}catch(e){}},sa=async()=>{Fe.value=!0;try{const e=await k({page:We.page,pageSize:We.pageSize,wallet_address:Ye.wallet_address||void 0,robot_type:Ye.robot_type||void 0,status:"active"});if(e.success){let a=e.data.list||[];""!==Ye.quantify_status&&(a=a.filter(e=>e.is_quantified===Ye.quantify_status)),Pe.value=a,We.total=e.data.total||0}}catch(e){w.error("获取数据失败，请重试")}finally{Fe.value=!1}},oa=()=>{We.page=1,sa()},ra=()=>{Ye.wallet_address="",Ye.robot_type="",Ye.quantify_status="",We.page=1,sa()},da=()=>{We.page=1,sa()},ia=()=>{sa()},ua=e=>{navigator.clipboard.writeText(e),w.success("已复制")},na=e=>e?`${e.slice(0,10)}...${e.slice(-8)}`:"",ca=e=>parseFloat(e||0).toFixed(4),pa=e=>e?U(e).format("YYYY-MM-DD HH:mm:ss"):"-",_a=e=>va(e)<24&&va(e)>0,fa=e=>{if(e.duration_hours){const a=parseInt(e.duration_hours);if(a>=24){const e=Math.floor(a/24),l=a%24;return l>0?`${e}天${l}h`:`${e}天`}return`${a}h`}const a=e.start_time||e.start_date,l=e.end_time||e.end_date;if(!a||!l)return"-";const t=U(l).diff(U(a),"hour");return t>=24?`${Math.floor(t/24)}天`:`${t}h`},va=e=>{if(void 0!==e.hours_remaining&&null!==e.hours_remaining)return parseFloat(e.hours_remaining);const a=e.end_time||e.end_date;if(!a)return 0;return U(a).diff(U())/36e5},ba=e=>{const a=va(e);if(a<=0)return"已到期";if(a>=24){const e=Math.floor(a/24),l=Math.floor(a%24);return l>0?`${e}天${l}h`:`${e}天`}return`${Math.floor(a)}h ${Math.floor(a%1*60)}m`},ma=e=>({cex:"primary",dex:"success",grid:"warning",high:"danger"}[e]||"info"),wa=e=>({cex:"CEX 机器人",dex:"DEX 机器人",grid:"网格交易",high:"高频交易"}[e]||e),ga=e=>({active:"运行中",expired:"已过期",cancelled:"已取消"}[e]||e),ya=async e=>{try{Xe.value=!0,He.value=!0,Ae.value=null;const a=await V(e);a.success?Ae.value=a.data:w.error(a.message||"获取详情失败")}catch(a){w.error("获取详情失败")}finally{He.value=!1}},ha=()=>{if(!Ne.value)return"0.00";const e=Ne.value.robot_type;return ca("high"===e||"dex"===e?Ne.value.expected_return:Ne.value.price)},xa=async()=>{if(Ne.value)try{Ge.value=!0;const e=await z(Ne.value.id,{refund:Qe.refund,reason:Qe.reason||"管理员手动关闭"});e.success?(w.success("机器人已关闭"),Oe.value=!1,sa(),ta()):w.error(e.message||"关闭失败")}catch(e){w.error("关闭失败，请重试")}finally{Ge.value=!1}},Da=async()=>{if(aa.value.length)try{ea.value=!0;const e=aa.value.map(e=>e.id),a=await I({ids:e,refund:la.refund,reason:la.reason||"管理员批量关闭"});a.success?(w.success(`成功关闭 ${a.data.success} 个机器人`),Ze.value=!1,aa.value=[],sa(),ta()):w.error(a.message||"批量关闭失败")}catch(e){w.error("批量关闭失败，请重试")}finally{ea.value=!1}};return l(()=>{ta(),sa()}),(e,a)=>{const l=u("el-icon"),U=u("el-col"),S=u("el-row"),k=u("el-input"),V=u("el-form-item"),z=u("el-option"),I=u("el-select"),q=u("el-button"),$=u("el-form"),ta=u("el-table-column"),Ca=u("el-tooltip"),Ua=u("el-tag"),Sa=u("el-table"),ka=u("el-pagination"),Va=u("el-descriptions-item"),Ta=u("el-descriptions"),za=u("el-dialog"),Ia=u("el-alert"),qa=u("el-switch"),$a=p("loading");return s(),t("div",M,[a[43]||(a[43]=o("div",{class:"page-header"},[o("h2",null,"运行中机器人"),o("p",{class:"description"},"查看所有正在运行的机器人详细信息")],-1)),r(S,{gutter:20,class:"stats-row"},{default:i(()=>[r(U,{xs:24,sm:12,md:6},{default:i(()=>[o("div",j,[o("div",R,[r(l,null,{default:i(()=>[r(c(g))]),_:1})]),o("div",F,[o("div",L,f(Ee.activeCount),1),a[19]||(a[19]=o("div",{class:"stat-label"},"运行中",-1))])])]),_:1}),r(U,{xs:24,sm:12,md:6},{default:i(()=>[o("div",E,[o("div",P,[r(l,null,{default:i(()=>[r(c(y))]),_:1})]),o("div",Y,[o("div",W,f(Ee.totalInvestment),1),a[20]||(a[20]=o("div",{class:"stat-label"},"总投资 (USDT)",-1))])])]),_:1}),r(U,{xs:24,sm:12,md:6},{default:i(()=>[o("div",X,[o("div",H,[r(l,null,{default:i(()=>[r(c(h))]),_:1})]),o("div",A,[o("div",B,f(Ee.totalProfit),1),a[21]||(a[21]=o("div",{class:"stat-label"},"累计收益 (USDT)",-1))])])]),_:1}),r(U,{xs:24,sm:12,md:6},{default:i(()=>[o("div",J,[o("div",K,[r(l,null,{default:i(()=>[r(c(x))]),_:1})]),o("div",O,[o("div",G,f(Ee.todayCount),1),a[22]||(a[22]=o("div",{class:"stat-label"},"今日新增",-1))])])]),_:1})]),_:1}),o("div",N,[r($,{inline:!c(Le),model:Ye,onSubmit:n(oa,["prevent"])},{default:i(()=>[r(V,{label:"钱包地址"},{default:i(()=>[r(k,{modelValue:Ye.wallet_address,"onUpdate:modelValue":a[0]||(a[0]=e=>Ye.wallet_address=e),placeholder:"请输入钱包地址",clearable:"",style:{width:"280px"}},null,8,["modelValue"])]),_:1}),r(V,{label:"机器人类型"},{default:i(()=>[r(I,{modelValue:Ye.robot_type,"onUpdate:modelValue":a[1]||(a[1]=e=>Ye.robot_type=e),placeholder:"全部",clearable:"",style:{width:"140px"}},{default:i(()=>[r(z,{label:"CEX 机器人",value:"cex"}),r(z,{label:"DEX 机器人",value:"dex"}),r(z,{label:"网格交易",value:"grid"}),r(z,{label:"高频交易",value:"high"})]),_:1},8,["modelValue"])]),_:1}),r(V,{label:"量化状态"},{default:i(()=>[r(I,{modelValue:Ye.quantify_status,"onUpdate:modelValue":a[2]||(a[2]=e=>Ye.quantify_status=e),placeholder:"全部",clearable:"",style:{width:"140px"}},{default:i(()=>[r(z,{label:"已量化",value:1}),r(z,{label:"未量化",value:0})]),_:1},8,["modelValue"])]),_:1}),r(V,null,{default:i(()=>[r(q,{type:"primary",onClick:oa},{default:i(()=>[r(l,null,{default:i(()=>[r(c(D))]),_:1}),a[23]||(a[23]=v(" 搜索 ",-1))]),_:1}),r(q,{onClick:ra},{default:i(()=>[r(l,null,{default:i(()=>[r(c(C))]),_:1}),a[24]||(a[24]=v(" 重置 ",-1))]),_:1}),r(q,{type:"success",onClick:sa},{default:i(()=>[r(l,null,{default:i(()=>[r(c(C))]),_:1}),a[25]||(a[25]=v(" 刷新数据 ",-1))]),_:1})]),_:1})]),_:1},8,["inline","model"])]),d((s(),_(Sa,{data:Pe.value,stripe:"",border:"",style:{width:"100%"},"default-sort":{prop:"created_at",order:"descending"}},{default:i(()=>[r(ta,{type:"index",label:"序号",width:"60",align:"center"}),r(ta,{prop:"id",label:"ID",width:"80",align:"center",sortable:""}),r(ta,{prop:"wallet_address",label:"钱包地址","min-width":"200"},{default:i(({row:e})=>[r(Ca,{content:e.wallet_address,placement:"top"},{default:i(()=>[o("span",{class:"wallet-address",onClick:a=>ua(e.wallet_address)},f(na(e.wallet_address)),9,Q)]),_:2},1032,["content"])]),_:1}),r(ta,{prop:"robot_name",label:"机器人名称","min-width":"170"},{default:i(({row:e})=>[o("div",Z,[o("span",ee,f(e.robot_name||"-"),1),o("div",ae,"ID: "+f(e.robot_id||"-"),1)])]),_:1}),r(ta,{prop:"robot_type",label:"类型",width:"120",align:"center"},{default:i(({row:e})=>[r(Ua,{type:ma(e.robot_type),size:"small"},{default:i(()=>[v(f(wa(e.robot_type)),1)]),_:2},1032,["type"])]),_:1}),r(ta,{prop:"price",label:"购买价格",width:"130",align:"right",sortable:""},{default:i(({row:e})=>[o("span",le,f(ca(e.price))+" USDT",1)]),_:1}),r(ta,{prop:"daily_profit",label:"日收益率",width:"100",align:"center",sortable:""},{default:i(({row:e})=>[o("span",te,f(e.daily_profit||0)+"%",1)]),_:1}),r(ta,{prop:"total_profit",label:"累计收益",width:"130",align:"right",sortable:""},{default:i(({row:e})=>[o("span",se,f(ca(e.total_profit))+" USDT",1)]),_:1}),r(ta,{prop:"expected_return",label:"预期收益",width:"130",align:"right",sortable:""},{default:i(({row:e})=>[o("span",oe,f(ca(e.expected_return))+" USDT",1)]),_:1}),r(ta,{prop:"quantify_count",label:"量化次数",width:"100",align:"center",sortable:""},{default:i(({row:e})=>[r(Ua,{type:"info",size:"small"},{default:i(()=>[v(f(e.quantify_count||0)+" 次",1)]),_:2},1024)]),_:1}),r(ta,{prop:"is_quantified",label:"今日量化",width:"120",align:"center"},{default:i(({row:e})=>[r(Ca,{content:"high"===e.robot_type?"High机器人只需量化一次":"今日量化状态",placement:"top"},{default:i(()=>[r(Ua,{type:e.is_quantified?"success":"warning",size:"small"},{default:i(()=>[v(f(e.is_quantified?"已量化":"未量化"),1)]),_:2},1032,["type"])]),_:2},1032,["content"])]),_:1}),r(ta,{prop:"start_time",label:"开始时间",width:"170",sortable:""},{default:i(({row:e})=>[o("span",re,f(pa(e.start_time||e.start_date)),1)]),_:1}),r(ta,{prop:"end_time",label:"到期时间",width:"170",sortable:""},{default:i(({row:e})=>[o("span",{class:b(["datetime",{"warning-date":_a(e)}])},f(pa(e.end_time||e.end_date)),3)]),_:1}),r(ta,{prop:"duration_hours",label:"运行周期",width:"100",align:"center"},{default:i(({row:e})=>[o("span",de,f(fa(e)),1)]),_:1}),r(ta,{prop:"hours_remaining",label:"剩余时间",width:"120",align:"center",sortable:""},{default:i(({row:e})=>[o("span",{class:b(["remaining",{warning:va(e)<24,danger:va(e)<=0}])},f(ba(e)),3)]),_:1}),r(ta,{prop:"created_at",label:"创建时间",width:"170",sortable:""},{default:i(({row:e})=>[o("span",ie,f(pa(e.created_at)),1)]),_:1}),r(ta,{label:"操作",width:"280",align:"center",fixed:"right"},{default:i(({row:e})=>[r(q,{type:"primary",size:"small",onClick:a=>ya(e.id)},{default:i(()=>[...a[26]||(a[26]=[v(" 详情 ",-1)])]),_:1},8,["onClick"]),r(q,{type:"info",size:"small",onClick:a=>(async e=>{try{Be.value=!0,Je.value=!0,Ke.value=null;const a=await T(e);a.success?Ke.value=a.data:w.error(a.message||"获取用户数据失败")}catch(a){w.error("获取用户数据失败")}finally{Je.value=!1}})(e.wallet_address)},{default:i(()=>[...a[27]||(a[27]=[v(" 用户 ",-1)])]),_:1},8,["onClick"]),r(q,{type:"danger",size:"small",onClick:a=>(e=>{Ne.value=e,Qe.refund=!0,Qe.reason="",Oe.value=!0})(e)},{default:i(()=>[...a[28]||(a[28]=[v(" 关闭 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[$a,Fe.value]]),o("div",ue,[r(ka,{"current-page":We.page,"onUpdate:currentPage":a[3]||(a[3]=e=>We.page=e),"page-size":We.pageSize,"onUpdate:pageSize":a[4]||(a[4]=e=>We.pageSize=e),"page-sizes":[10,20,50,100],total:We.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:da,onCurrentChange:ia},null,8,["current-page","page-size","total"])]),r(za,{modelValue:Xe.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Xe.value=e),title:"机器人详情","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",class:"robot-detail-dialog"},{footer:i(()=>[r(q,{onClick:a[6]||(a[6]=e=>Xe.value=!1)},{default:i(()=>[...a[30]||(a[30]=[v("关闭",-1)])]),_:1})]),default:i(()=>[d((s(),t("div",ne,[Ae.value?(s(),t("div",ce,[r(Ta,{title:"基本信息",column:2,border:""},{default:i(()=>[r(Va,{label:"记录ID"},{default:i(()=>[v(f(Ae.value.robot.id),1)]),_:1}),r(Va,{label:"机器人ID"},{default:i(()=>[v(f(Ae.value.robot.robot_id||"-"),1)]),_:1}),r(Va,{label:"钱包地址",span:2},{default:i(()=>[o("span",{class:"wallet-address",onClick:a[5]||(a[5]=e=>ua(Ae.value.robot.wallet_address))},f(Ae.value.robot.wallet_address),1)]),_:1}),r(Va,{label:"机器人名称"},{default:i(()=>[v(f(Ae.value.robot.robot_name),1)]),_:1}),r(Va,{label:"机器人类型"},{default:i(()=>[r(Ua,{type:ma(Ae.value.robot.robot_type),size:"small"},{default:i(()=>[v(f(wa(Ae.value.robot.robot_type)),1)]),_:1},8,["type"])]),_:1}),r(Va,{label:"购买价格"},{default:i(()=>[v(f(ca(Ae.value.robot.price))+" USDT",1)]),_:1}),r(Va,{label:"日收益率"},{default:i(()=>[v(f(Ae.value.robot.daily_profit)+"%",1)]),_:1}),r(Va,{label:"累计收益"},{default:i(()=>[v(f(ca(Ae.value.robot.total_profit))+" USDT",1)]),_:1}),r(Va,{label:"预期收益"},{default:i(()=>[v(f(ca(Ae.value.robot.expected_return))+" USDT",1)]),_:1}),r(Va,{label:"运行状态"},{default:i(()=>[r(Ua,{type:"success",size:"small"},{default:i(()=>[...a[29]||(a[29]=[v("运行中",-1)])]),_:1})]),_:1}),r(Va,{label:"量化状态"},{default:i(()=>[r(Ua,{type:Ae.value.robot.is_quantified?"success":"warning",size:"small"},{default:i(()=>[v(f(Ae.value.robot.is_quantified?"已量化":"未量化"),1)]),_:1},8,["type"])]),_:1}),r(Va,{label:"量化次数"},{default:i(()=>[v(f(Ae.value.robot.quantify_count||0)+" 次",1)]),_:1}),r(Va,{label:"代币类型"},{default:i(()=>[v(f(Ae.value.robot.token||"USDT"),1)]),_:1}),r(Va,{label:"运行周期"},{default:i(()=>[v(f(fa(Ae.value.robot)),1)]),_:1}),r(Va,{label:"剩余时间"},{default:i(()=>[o("span",{class:b(["remaining",{warning:va(Ae.value.robot)<24}])},f(ba(Ae.value.robot)),3)]),_:1}),r(Va,{label:"开始时间"},{default:i(()=>[v(f(pa(Ae.value.robot.start_time)),1)]),_:1}),r(Va,{label:"到期时间"},{default:i(()=>[v(f(pa(Ae.value.robot.end_time)),1)]),_:1}),r(Va,{label:"创建时间"},{default:i(()=>[v(f(pa(Ae.value.robot.created_at)),1)]),_:1}),r(Va,{label:"更新时间"},{default:i(()=>[v(f(pa(Ae.value.robot.updated_at)),1)]),_:1})]),_:1}),Ae.value.userInfo?(s(),_(Ta,{key:0,title:"用户信息",column:2,border:"",style:{"margin-top":"20px"}},{default:i(()=>[r(Va,{label:"USDT余额"},{default:i(()=>[v(f(ca(Ae.value.userInfo.usdt_balance))+" USDT",1)]),_:1}),r(Va,{label:"WLD余额"},{default:i(()=>[v(f(ca(Ae.value.userInfo.wld_balance))+" WLD",1)]),_:1}),r(Va,{label:"总充值"},{default:i(()=>[v(f(ca(Ae.value.userInfo.total_deposit))+" USDT",1)]),_:1}),r(Va,{label:"总提款"},{default:i(()=>[v(f(ca(Ae.value.userInfo.total_withdraw))+" USDT",1)]),_:1}),r(Va,{label:"注册时间",span:2},{default:i(()=>[v(f(pa(Ae.value.userInfo.created_at)),1)]),_:1})]),_:1})):m("",!0),o("div",pe,[o("h3",_e,"量化日志 ("+f(Ae.value.quantifyLogs.length)+")",1),r(Sa,{data:Ae.value.quantifyLogs,border:"",stripe:"","max-height":"300"},{default:i(()=>[r(ta,{type:"index",label:"#",width:"50"}),r(ta,{prop:"earnings",label:"本次收益",width:"120"},{default:i(({row:e})=>[o("span",fe,f(ca(e.earnings))+" USDT",1)]),_:1}),r(ta,{prop:"cumulative_earnings",label:"累计收益",width:"130"},{default:i(({row:e})=>[o("span",ve,f(ca(e.cumulative_earnings))+" USDT",1)]),_:1}),r(ta,{prop:"status",label:"状态",width:"100"},{default:i(({row:e})=>[r(Ua,{type:"success"===e.status?"success":"warning",size:"small"},{default:i(()=>[v(f("success"===e.status?"成功":e.status),1)]),_:2},1032,["type"])]),_:1}),r(ta,{prop:"remark",label:"备注","min-width":"150"}),r(ta,{prop:"created_at",label:"量化时间",width:"170"},{default:i(({row:e})=>[v(f(pa(e.created_at)),1)]),_:1})]),_:1},8,["data"])]),Ae.value.referralRewards&&Ae.value.referralRewards.length>0?(s(),t("div",be,[o("h3",me,"推荐奖励 ("+f(Ae.value.referralRewards.length)+")",1),r(Sa,{data:Ae.value.referralRewards,border:"",stripe:"","max-height":"300"},{default:i(()=>[r(ta,{type:"index",label:"#",width:"50"}),r(ta,{prop:"wallet_address",label:"获奖地址",width:"180"},{default:i(({row:e})=>[o("span",{class:"wallet-address",onClick:a=>ua(e.wallet_address)},f(na(e.wallet_address)),9,we)]),_:1}),r(ta,{prop:"level",label:"级别",width:"80",align:"center"}),r(ta,{prop:"reward_rate",label:"比例",width:"80"},{default:i(({row:e})=>[v(f(e.reward_rate)+"% ",1)]),_:1}),r(ta,{prop:"reward_amount",label:"奖励金额",width:"130"},{default:i(({row:e})=>[o("span",ge,f(ca(e.reward_amount))+" USDT",1)]),_:1}),r(ta,{prop:"created_at",label:"发放时间",width:"170"},{default:i(({row:e})=>[v(f(pa(e.created_at)),1)]),_:1})]),_:1},8,["data"])])):m("",!0)])):m("",!0)])),[[$a,He.value]])]),_:1},8,["modelValue"]),r(za,{modelValue:Be.value,"onUpdate:modelValue":a[10]||(a[10]=e=>Be.value=e),title:"用户机器人数据","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",class:"robot-detail-dialog"},{footer:i(()=>[r(q,{onClick:a[9]||(a[9]=e=>Be.value=!1)},{default:i(()=>[...a[36]||(a[36]=[v("关闭",-1)])]),_:1})]),default:i(()=>[d((s(),t("div",ye,[Ke.value?(s(),t("div",he,[r(S,{gutter:20,style:{"margin-bottom":"20px"}},{default:i(()=>[r(U,{xs:24,sm:12,md:6},{default:i(()=>[o("div",xe,[a[31]||(a[31]=o("div",{class:"stat-label"},"总收益",-1)),o("div",De,f(Ke.value.stats.totalEarnings)+" USDT",1)])]),_:1}),r(U,{xs:24,sm:12,md:6},{default:i(()=>[o("div",Ce,[a[32]||(a[32]=o("div",{class:"stat-label"},"量化次数",-1)),o("div",Ue,f(Ke.value.stats.quantifyCount),1)])]),_:1}),r(U,{xs:24,sm:12,md:6},{default:i(()=>[o("div",Se,[a[33]||(a[33]=o("div",{class:"stat-label"},"推荐奖励",-1)),o("div",ke,f(Ke.value.stats.totalReferralRewards)+" USDT",1)])]),_:1}),r(U,{xs:24,sm:12,md:6},{default:i(()=>[o("div",Ve,[a[34]||(a[34]=o("div",{class:"stat-label"},"机器人数量",-1)),o("div",Te,f(Ke.value.robots.length),1)])]),_:1})]),_:1}),r(Ta,{title:"用户信息",column:2,border:""},{default:i(()=>[r(Va,{label:"钱包地址",span:2},{default:i(()=>[o("span",{class:"wallet-address",onClick:a[8]||(a[8]=e=>ua(Ke.value.userInfo.wallet_address))},f(Ke.value.userInfo.wallet_address),1)]),_:1}),r(Va,{label:"USDT余额"},{default:i(()=>[v(f(ca(Ke.value.userInfo.usdt_balance))+" USDT",1)]),_:1}),r(Va,{label:"WLD余额"},{default:i(()=>[v(f(ca(Ke.value.userInfo.wld_balance))+" WLD",1)]),_:1}),r(Va,{label:"总充值"},{default:i(()=>[v(f(ca(Ke.value.userInfo.total_deposit))+" USDT",1)]),_:1}),r(Va,{label:"总提款"},{default:i(()=>[v(f(ca(Ke.value.userInfo.total_withdraw))+" USDT",1)]),_:1}),r(Va,{label:"注册时间",span:2},{default:i(()=>[v(f(pa(Ke.value.userInfo.created_at)),1)]),_:1})]),_:1}),o("div",ze,[o("h3",Ie,"机器人列表 ("+f(Ke.value.robots.length)+")",1),r(Sa,{data:Ke.value.robots,border:"",stripe:"","max-height":"400"},{default:i(()=>[r(ta,{type:"index",label:"#",width:"50"}),r(ta,{prop:"robot_name",label:"机器人名称",width:"150"}),r(ta,{prop:"robot_type",label:"类型",width:"120"},{default:i(({row:e})=>[r(Ua,{type:ma(e.robot_type),size:"small"},{default:i(()=>[v(f(wa(e.robot_type)),1)]),_:2},1032,["type"])]),_:1}),r(ta,{prop:"price",label:"价格",width:"120"},{default:i(({row:e})=>[v(f(ca(e.price))+" USDT ",1)]),_:1}),r(ta,{prop:"daily_profit",label:"日收益率",width:"100"},{default:i(({row:e})=>[v(f(e.daily_profit)+"% ",1)]),_:1}),r(ta,{prop:"total_profit",label:"累计收益",width:"130"},{default:i(({row:e})=>[o("span",qe,f(ca(e.total_profit))+" USDT",1)]),_:1}),r(ta,{prop:"status",label:"状态",width:"100"},{default:i(({row:e})=>{return[r(Ua,{type:(a=e.status,{active:"success",expired:"info",cancelled:"danger"}[a]||"info"),size:"small"},{default:i(()=>[v(f(ga(e.status)),1)]),_:2},1032,["type"])];var a}),_:1}),r(ta,{prop:"quantify_count",label:"量化次数",width:"100",align:"center"}),r(ta,{prop:"created_at",label:"购买时间",width:"170"},{default:i(({row:e})=>[v(f(pa(e.created_at)),1)]),_:1}),r(ta,{label:"操作",width:"120",fixed:"right"},{default:i(({row:e})=>[r(q,{type:"primary",size:"small",onClick:a=>(async e=>{Be.value=!1,await ya(e)})(e.id)},{default:i(()=>[...a[35]||(a[35]=[v(" 详情 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])])):m("",!0)])),[[$a,Je.value]])]),_:1},8,["modelValue"]),r(za,{modelValue:Oe.value,"onUpdate:modelValue":a[14]||(a[14]=e=>Oe.value=e),title:"关闭机器人",width:"500px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":""},{footer:i(()=>[r(q,{onClick:a[13]||(a[13]=e=>Oe.value=!1)},{default:i(()=>[...a[37]||(a[37]=[v("取消",-1)])]),_:1}),r(q,{type:"danger",onClick:xa,loading:Ge.value},{default:i(()=>[...a[38]||(a[38]=[v(" 确认关闭 ",-1)])]),_:1},8,["loading"])]),default:i(()=>[o("div",$e,[r(Ia,{title:"注意：关闭机器人后无法自动恢复",type:"warning",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}}),r(Ta,{column:1,border:""},{default:i(()=>[r(Va,{label:"机器人ID"},{default:i(()=>{var e;return[v(f(null==(e=Ne.value)?void 0:e.id),1)]}),_:1}),r(Va,{label:"机器人名称"},{default:i(()=>{var e;return[v(f(null==(e=Ne.value)?void 0:e.robot_name),1)]}),_:1}),r(Va,{label:"钱包地址"},{default:i(()=>{var e;return[o("span",Me,f(na(null==(e=Ne.value)?void 0:e.wallet_address)),1)]}),_:1}),r(Va,{label:"购买价格"},{default:i(()=>{var e;return[v(f(ca(null==(e=Ne.value)?void 0:e.price))+" USDT",1)]}),_:1}),r(Va,{label:"累计收益"},{default:i(()=>{var e;return[v(f(ca(null==(e=Ne.value)?void 0:e.total_profit))+" USDT",1)]}),_:1})]),_:1}),r($,{style:{"margin-top":"20px"},"label-width":"100px"},{default:i(()=>[r(V,{label:"是否退款"},{default:i(()=>[r(qa,{modelValue:Qe.refund,"onUpdate:modelValue":a[11]||(a[11]=e=>Qe.refund=e),"active-text":"退还本金","inactive-text":"不退款"},null,8,["modelValue"])]),_:1}),Qe.refund?(s(),_(V,{key:0,label:"退款金额"},{default:i(()=>[o("span",je,f(ha())+" USDT",1),r(Ua,{type:"info",size:"small",style:{"margin-left":"10px"}},{default:i(()=>{var e,a;return[v(f("high"===(null==(e=Ne.value)?void 0:e.robot_type)||"dex"===(null==(a=Ne.value)?void 0:a.robot_type)?"预期收益":"购买价格"),1)]}),_:1})]),_:1})):m("",!0),r(V,{label:"关闭原因"},{default:i(()=>[r(k,{modelValue:Qe.reason,"onUpdate:modelValue":a[12]||(a[12]=e=>Qe.reason=e),type:"textarea",rows:2,placeholder:"请输入关闭原因（可选）"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),r(za,{modelValue:Ze.value,"onUpdate:modelValue":a[18]||(a[18]=e=>Ze.value=e),title:"批量关闭机器人",width:"500px","close-on-click-modal":!1,"append-to-body":""},{footer:i(()=>[r(q,{onClick:a[17]||(a[17]=e=>Ze.value=!1)},{default:i(()=>[...a[41]||(a[41]=[v("取消",-1)])]),_:1}),r(q,{type:"danger",onClick:Da,loading:ea.value},{default:i(()=>[...a[42]||(a[42]=[v(" 确认批量关闭 ",-1)])]),_:1},8,["loading"])]),default:i(()=>[o("div",Re,[r(Ia,{title:"即将关闭选中的所有机器人",type:"warning",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}}),o("p",null,[a[39]||(a[39]=v("已选择 ",-1)),o("strong",null,f(aa.value.length),1),a[40]||(a[40]=v(" 个机器人",-1))]),r($,{style:{"margin-top":"20px"},"label-width":"100px"},{default:i(()=>[r(V,{label:"是否退款"},{default:i(()=>[r(qa,{modelValue:la.refund,"onUpdate:modelValue":a[15]||(a[15]=e=>la.refund=e),"active-text":"退还本金","inactive-text":"不退款"},null,8,["modelValue"])]),_:1}),r(V,{label:"关闭原因"},{default:i(()=>[r(k,{modelValue:la.reason,"onUpdate:modelValue":a[16]||(a[16]=e=>la.reason=e),type:"textarea",rows:2,placeholder:"请输入关闭原因（可选）"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-7472e54f"]]);export{Fe as default};
