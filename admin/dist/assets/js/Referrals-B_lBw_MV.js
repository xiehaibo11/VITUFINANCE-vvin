import{r as e,_ as a,x as l,A as s,o as t,D as r,B as d,K as i,J as c,C as o,ay as n,P as u,Y as p,M as _,O as v,Q as f,aI as w,m,u as b,F as g}from"./vue-vendor-CCmsYA1Y.js";import{b as h,u as y,M as k,s as V,j as x,_ as C,t as S,$ as z,S as U,a0 as T,I as D,c as j,T as F,a1 as R,a2 as Y}from"./element-plus-BZcENYie.js";import{bC as q}from"./vendor-BQF3adi-.js";import{r as I,t as M}from"./index-CQDoFXMh.js";import{_ as O}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-Gc17XYwO.js";const P={class:"page-container"},$={class:"stat-card"},H={class:"stat-icon primary"},L={class:"stat-info"},N={class:"stat-value"},A={class:"stat-card"},B={class:"stat-icon success"},J={class:"stat-info"},K={class:"stat-value"},Q={class:"stat-card"},E={class:"stat-icon warning"},G={class:"stat-info"},W={class:"stat-value"},X={class:"stat-card"},Z={class:"stat-icon info"},ee={class:"stat-info"},ae={class:"stat-value"},le={class:"search-area"},se={style:{display:"flex",gap:"10px",width:"100%"}},te={class:"preview-info"},re={class:"preview-item"},de={class:"value"},ie={class:"preview-item"},ce={class:"value"},oe={class:"preview-item"},ne={class:"value"},ue={class:"preview-item"},pe={class:"value highlight"},_e={class:"preview-item"},ve={class:"value highlight-success"},fe={key:0,class:"reward-tip"},we={class:"amount"},me={key:0,class:"hierarchy-section"},be={class:"hierarchy-header"},ge={class:"header-left"},he={class:"header-icon"},ye={class:"hierarchy-card target-card"},ke={class:"card-header"},Ve={class:"card-icon target"},xe={class:"card-body"},Ce={class:"wallet-display"},Se={class:"data-table"},ze={class:"data-row"},Ue={class:"data-cell"},Te={class:"cell-value"},De={class:"data-cell"},je={class:"cell-value highlight"},Fe={class:"data-cell"},Re={class:"cell-value success"},Ye={class:"data-cell"},qe={class:"cell-value"},Ie={class:"data-cell"},Me={class:"cell-value warning"},Oe={key:0,class:"hierarchy-card referrer-card"},Pe={class:"card-header"},$e={class:"card-icon referrer"},He={class:"card-body"},Le={class:"data-table"},Ne={class:"data-row"},Ae={class:"data-cell wide"},Be={class:"cell-value"},Je={class:"data-cell"},Ke={class:"cell-value"},Qe={class:"data-cell"},Ee={class:"cell-value highlight"},Ge={class:"data-cell"},We={class:"cell-value success"},Xe={class:"data-cell"},Ze={class:"cell-value"},ea={key:1,class:"hierarchy-card referrer-card empty"},aa={class:"card-header"},la={class:"card-icon referrer empty"},sa={class:"card-body"},ta={class:"empty-state"},ra={class:"hierarchy-card members-card"},da={class:"card-header"},ia={class:"card-icon members"},ca={class:"card-label"},oa={key:0,class:"card-body"},na=["onClick"],ua={class:"count"},pa={key:1,class:"card-body"},_a={class:"empty-state"},va=["onClick"],fa=["onClick"],wa={key:1,class:"no-data"},ma=["onClick"],ba={class:"amount positive"},ga=["onClick"],ha={key:1,class:"no-data"},ya={class:"count"},ka={class:"count"},Va={class:"count success"},xa={class:"amount"},Ca={class:"amount positive"},Sa={class:"amount highlight"},za={class:"search-area"},Ua={key:0,class:"wallet-address"},Ta={key:1,class:"no-data"},Da={key:1,class:"no-data"},ja={class:"page-url"},Fa={key:1,class:"no-data"},Ra={class:"ip-address"},Ya={class:"pagination-wrapper"},qa=O({__name:"Referrals",setup(O){const qa=e(!1),Ia=e("referrals"),Ma=a({totalVisits:0,todayVisits:0,referralVisits:0,uniqueVisitors:0}),Oa=a({totalReferrers:0,totalReferred:0,totalRewards:0,todayNew:0}),Pa=e([]),$a=e([]),Ha=e([]),La=a({wallet_address:"",referrer_address:""}),Na=a({wallet_address:"",referral_code:"",action_type:""}),Aa=a({page:1,pageSize:10,total:0}),Ba=e(!1),Ja=e(null),Ka=e(!1),Qa=e(!1),Ea=e(!1),Ga=e(null),Wa=a({wallet_address:"",referrer_address:"",retroactive_reward:!1}),Xa=async()=>{qa.value=!0;try{const e=await M({page:Aa.page,pageSize:Aa.pageSize,wallet_address:La.wallet_address||void 0,referrer_address:La.referrer_address||void 0});e.success&&(Pa.value=e.data.list||[],Aa.total=e.data.total||0)}catch(e){}finally{qa.value=!1}},Za=async()=>{qa.value=!0;try{const e=await I.get("/user-behaviors",{params:{page:Aa.page,pageSize:Aa.pageSize,wallet_address:Na.wallet_address||void 0,referral_code:Na.referral_code||void 0,action_type:Na.action_type||void 0}});e.success&&(Ha.value=e.data.list||[],Aa.total=e.data.total||0)}catch(e){}finally{qa.value=!1}},el=()=>{Aa.page=1,"referrals"===Ia.value?Xa():"conversions"===Ia.value?(async()=>{qa.value=!0;try{const e=await I.get("/referral-conversions",{params:{page:Aa.page,pageSize:Aa.pageSize}});e.success&&($a.value=e.data.list||[],Aa.total=e.data.total||0)}catch(e){}finally{qa.value=!1}})():"behaviors"===Ia.value&&Za()},al=()=>{Aa.page=1,Ba.value=!1,Xa()},ll=()=>{La.wallet_address="",La.referrer_address="",Aa.page=1,Ba.value=!1,Ja.value=null,Xa()},sl=async()=>{if(La.wallet_address){qa.value=!0;try{const e=await I.get("/referrals/hierarchy",{params:{wallet_address:La.wallet_address.trim()}});e.success?(Ja.value=e.data,Ba.value=!0):h.error(e.message||"查询失败")}catch(e){h.error("查询失败，请检查地址是否正确")}finally{qa.value=!1}}else h.warning("请先输入钱包地址")},tl=()=>{Ba.value=!1,Ja.value=null},rl=async e=>{La.wallet_address=e,await sl()},dl=async()=>{if(Wa.wallet_address){Ea.value=!0,Ga.value=null;try{const e=await I.get("/referrals/preview-retroactive",{params:{wallet_address:Wa.wallet_address.trim()}});e.success?(Ga.value=e.data,parseFloat(e.data.retroactive_reward)>0&&(Wa.retroactive_reward=!0)):h.error(e.message||"预览失败")}catch(e){h.error("预览失败")}finally{Ea.value=!1}}},il=()=>{Wa.wallet_address="",Wa.referrer_address="",Wa.retroactive_reward=!1,Ga.value=null},cl=async()=>{var e,a;if(Wa.wallet_address&&Wa.referrer_address){Qa.value=!0;try{const e=await I.post("/referrals/bind",{wallet_address:Wa.wallet_address.trim(),referrer_address:Wa.referrer_address.trim(),retroactive_reward:Wa.retroactive_reward});e.success?(h.success(e.message||"绑定成功！"),Ka.value=!1,il(),Xa()):h.error(e.message||"绑定失败")}catch(l){h.error((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"绑定失败")}finally{Qa.value=!1}}else h.warning("请填写完整的地址信息")},ol=()=>{Aa.page=1,el()},nl=()=>{el()},ul=e=>{navigator.clipboard.writeText(e),h.success("已复制")},pl=e=>e?`${e.slice(0,10)}...${e.slice(-8)}`:"",_l=e=>{if(!e)return"";try{const a=new URL(e);return a.pathname+(a.search?"...":"")}catch{return e.length>40?e.slice(0,40)+"...":e}},vl=e=>parseFloat(e||0).toFixed(4),fl=e=>q(e).format("YYYY-MM-DD HH:mm:ss"),wl=e=>({page_view:"页面访问",button_click:"按钮点击",wallet_connect:"连接钱包",deposit:"充值",withdraw:"提款",robot_buy:"购买机器人"}[e]||e);return l(()=>{(async()=>{try{const e=await I.get("/referrals/stats");e.success&&e.data&&Object.assign(Oa,e.data)}catch(e){}})(),(async()=>{try{const e=await I.get("/user-behaviors/stats");e.success&&e.data&&Object.assign(Ma,e.data)}catch(e){}})(),Xa()}),(e,a)=>{const l=n("el-icon"),h=n("el-col"),q=n("el-row"),I=n("el-tab-pane"),M=n("el-tabs"),O=n("el-input"),Ma=n("el-form-item"),Xa=n("el-button"),ml=n("el-form"),bl=n("el-switch"),gl=n("el-alert"),hl=n("el-dialog"),yl=n("el-tag"),kl=n("el-table-column"),Vl=n("el-table"),xl=n("el-tooltip"),Cl=n("el-option"),Sl=n("el-select"),zl=n("el-pagination"),Ul=w("loading");return t(),s("div",P,[a[61]||(a[61]=r("div",{class:"page-header"},[r("h2",null,"推广管理"),r("p",{class:"description"},"查看用户推荐关系和推广转化数据")],-1)),d(q,{gutter:20,class:"stats-row"},{default:o(()=>[d(h,{xs:24,sm:12,md:6},{default:o(()=>[r("div",$,[r("div",H,[d(l,null,{default:o(()=>[d(b(y))]),_:1})]),r("div",L,[r("div",N,v(Oa.totalReferrers),1),a[16]||(a[16]=r("div",{class:"stat-label"},"推荐人总数",-1))])])]),_:1}),d(h,{xs:24,sm:12,md:6},{default:o(()=>[r("div",A,[r("div",B,[d(l,null,{default:o(()=>[d(b(k))]),_:1})]),r("div",J,[r("div",K,v(Oa.totalReferred),1),a[17]||(a[17]=r("div",{class:"stat-label"},"被推荐人总数",-1))])])]),_:1}),d(h,{xs:24,sm:12,md:6},{default:o(()=>[r("div",Q,[r("div",E,[d(l,null,{default:o(()=>[d(b(V))]),_:1})]),r("div",G,[r("div",W,v(vl(Oa.totalRewards))+" USDT",1),a[18]||(a[18]=r("div",{class:"stat-label"},"累计推荐奖励",-1))])])]),_:1}),d(h,{xs:24,sm:12,md:6},{default:o(()=>[r("div",X,[r("div",Z,[d(l,null,{default:o(()=>[d(b(x))]),_:1})]),r("div",ee,[r("div",ae,v(Oa.todayNew),1),a[19]||(a[19]=r("div",{class:"stat-label"},"今日新增推荐",-1))])])]),_:1})]),_:1}),d(M,{modelValue:Ia.value,"onUpdate:modelValue":a[0]||(a[0]=e=>Ia.value=e),onTabChange:el,class:"referral-tabs"},{default:o(()=>[d(I,{label:"推荐关系",name:"referrals"},{label:o(()=>[r("span",null,[d(l,null,{default:o(()=>[d(b(C))]),_:1}),a[20]||(a[20]=_(" 推荐关系 ",-1))])]),_:1}),d(I,{label:"转化统计",name:"conversions"},{label:o(()=>[r("span",null,[d(l,null,{default:o(()=>[d(b(S))]),_:1}),a[21]||(a[21]=_(" 转化统计 ",-1))])]),_:1}),d(I,{label:"行为记录",name:"behaviors"},{label:o(()=>[r("span",null,[d(l,null,{default:o(()=>[d(b(z))]),_:1}),a[22]||(a[22]=_(" 行为记录 ",-1))])]),_:1})]),_:1},8,["modelValue"]),"referrals"===Ia.value?(t(),s(u,{key:0},[r("div",le,[d(ml,{inline:!0,model:La,onSubmit:p(al,["prevent"])},{default:o(()=>[d(Ma,{label:"钱包地址"},{default:o(()=>[d(O,{modelValue:La.wallet_address,"onUpdate:modelValue":a[1]||(a[1]=e=>La.wallet_address=e),placeholder:"请输入用户钱包地址",clearable:"",style:{width:"280px"}},null,8,["modelValue"])]),_:1}),d(Ma,{label:"推荐人地址"},{default:o(()=>[d(O,{modelValue:La.referrer_address,"onUpdate:modelValue":a[2]||(a[2]=e=>La.referrer_address=e),placeholder:"请输入推荐人地址",clearable:"",style:{width:"280px"}},null,8,["modelValue"])]),_:1}),d(Ma,null,{default:o(()=>[d(Xa,{type:"primary",onClick:al},{default:o(()=>[d(l,null,{default:o(()=>[d(b(U))]),_:1}),a[23]||(a[23]=_(" 搜索 ",-1))]),_:1}),d(Xa,{type:"success",onClick:sl},{default:o(()=>[d(l,null,{default:o(()=>[d(b(C))]),_:1}),a[24]||(a[24]=_(" 查询上下级 ",-1))]),_:1}),d(Xa,{type:"warning",onClick:a[3]||(a[3]=e=>Ka.value=!0)},{default:o(()=>[d(l,null,{default:o(()=>[d(b(T))]),_:1}),a[25]||(a[25]=_(" 手动绑定 ",-1))]),_:1}),d(Xa,{onClick:ll},{default:o(()=>[d(l,null,{default:o(()=>[d(b(D))]),_:1}),a[26]||(a[26]=_(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),d(hl,{modelValue:Ka.value,"onUpdate:modelValue":a[8]||(a[8]=e=>Ka.value=e),title:"手动绑定推荐关系",width:"600px",onClose:il},{footer:o(()=>[d(Xa,{onClick:a[7]||(a[7]=e=>Ka.value=!1)},{default:o(()=>[...a[36]||(a[36]=[_("取消",-1)])]),_:1}),d(Xa,{type:"primary",onClick:cl,loading:Qa.value},{default:o(()=>[...a[37]||(a[37]=[_(" 确认绑定 ",-1)])]),_:1},8,["loading"])]),default:o(()=>[d(ml,{model:Wa,"label-width":"100px"},{default:o(()=>[d(Ma,{label:"用户地址",required:""},{default:o(()=>[r("div",se,[d(O,{modelValue:Wa.wallet_address,"onUpdate:modelValue":a[4]||(a[4]=e=>Wa.wallet_address=e),placeholder:"请输入要绑定的用户钱包地址",style:{flex:"1"}},null,8,["modelValue"]),d(Xa,{type:"info",onClick:dl,loading:Ea.value},{default:o(()=>[...a[27]||(a[27]=[_(" 预览 ",-1)])]),_:1},8,["loading"])])]),_:1}),d(Ma,{label:"推荐人地址",required:""},{default:o(()=>[d(O,{modelValue:Wa.referrer_address,"onUpdate:modelValue":a[5]||(a[5]=e=>Wa.referrer_address=e),placeholder:"请输入推荐人钱包地址"},null,8,["modelValue"])]),_:1}),Ga.value?(t(),m(Ma,{key:0,label:"用户信息"},{default:o(()=>[r("div",te,[r("div",re,[a[28]||(a[28]=r("span",{class:"label"},"机器人数量：",-1)),r("span",de,v(Ga.value.robot_count)+" 个",1)]),r("div",ie,[a[29]||(a[29]=r("span",{class:"label"},"总投资：",-1)),r("span",ce,v(Ga.value.total_investment)+" USDT",1)]),r("div",oe,[a[30]||(a[30]=r("span",{class:"label"},"量化次数：",-1)),r("span",ne,v(Ga.value.quantify_count)+" 次",1)]),r("div",ue,[a[31]||(a[31]=r("span",{class:"label"},"累计收益：",-1)),r("span",pe,v(Ga.value.total_earnings)+" USDT",1)]),r("div",_e,[a[32]||(a[32]=r("span",{class:"label"},"可补发奖励：",-1)),r("span",ve,v(Ga.value.retroactive_reward)+" USDT ("+v(Ga.value.reward_rate)+")",1)])])]),_:1})):i("",!0),d(Ma,{label:"补发奖励"},{default:o(()=>[d(bl,{modelValue:Wa.retroactive_reward,"onUpdate:modelValue":a[6]||(a[6]=e=>Wa.retroactive_reward=e),"active-text":"补发历史奖励","inactive-text":"不补发",disabled:!Ga.value||parseFloat(Ga.value.retroactive_reward)<=0},null,8,["modelValue","disabled"]),Wa.retroactive_reward&&Ga.value?(t(),s("div",fe,[a[33]||(a[33]=_(" 将为推荐人补发 ",-1)),r("span",we,v(Ga.value.retroactive_reward)+" USDT",1),a[34]||(a[34]=_(" 奖励 ",-1))])):i("",!0)]),_:1}),d(gl,{type:"warning",closable:!1,style:{"margin-top":"10px"}},{title:o(()=>[...a[35]||(a[35]=[_(" 注意：绑定操作不可撤销，补发的奖励将直接添加到推荐人余额 ",-1)])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),Ba.value&&Ja.value?(t(),s("div",me,[r("div",be,[r("div",ge,[r("div",he,[d(l,null,{default:o(()=>[d(b(C))]),_:1})]),a[38]||(a[38]=r("div",{class:"header-text"},[r("h3",null,"用户上下级关系详情"),r("p",null,"查看用户的推荐关系网络")],-1))]),d(Xa,{type:"danger",plain:"",size:"small",onClick:tl},{default:o(()=>[d(l,null,{default:o(()=>[d(b(j))]),_:1}),a[39]||(a[39]=_(" 关闭 ",-1))]),_:1})]),r("div",ye,[r("div",ke,[r("div",Ve,[d(l,null,{default:o(()=>[d(b(y))]),_:1})]),a[40]||(a[40]=r("div",{class:"card-label"},"查询用户",-1))]),r("div",xe,[r("div",Ce,[a[41]||(a[41]=r("span",{class:"wallet-label"},"钱包地址：",-1)),r("code",{class:"wallet-value",onClick:a[9]||(a[9]=e=>ul(Ja.value.target.wallet_address))},[_(v(Ja.value.target.wallet_address)+" ",1),d(l,{class:"copy-icon"},{default:o(()=>[d(b(F))]),_:1})])]),r("div",Se,[r("div",ze,[r("div",Ue,[a[42]||(a[42]=r("div",{class:"cell-label"},"邀请码",-1)),r("div",Te,[d(yl,{type:"primary",effect:"dark"},{default:o(()=>[_(v(Ja.value.target.referral_code),1)]),_:1})])]),r("div",De,[a[43]||(a[43]=r("div",{class:"cell-label"},"直推人数",-1)),r("div",je,v(Ja.value.target.direct_count),1)]),r("div",Fe,[a[44]||(a[44]=r("div",{class:"cell-label"},"累计奖励",-1)),r("div",Re,v(Ja.value.target.total_reward)+" USDT",1)]),r("div",Ye,[a[45]||(a[45]=r("div",{class:"cell-label"},"机器人数",-1)),r("div",qe,v(Ja.value.target.robot_count),1)]),r("div",Ie,[a[46]||(a[46]=r("div",{class:"cell-label"},"总投资",-1)),r("div",Me,v(Ja.value.target.total_investment)+" USDT",1)])])])])]),Ja.value.referrer?(t(),s("div",Oe,[r("div",Pe,[r("div",$e,[d(l,null,{default:o(()=>[d(b(R))]),_:1})]),a[47]||(a[47]=r("div",{class:"card-label"},"推荐人（上级）",-1))]),r("div",He,[r("div",Le,[r("div",Ne,[r("div",Ae,[a[48]||(a[48]=r("div",{class:"cell-label"},"钱包地址",-1)),r("div",Be,[r("code",{class:"wallet-code",onClick:a[10]||(a[10]=e=>ul(Ja.value.referrer.wallet_address))},[_(v(pl(Ja.value.referrer.wallet_address))+" ",1),d(l,{class:"copy-icon"},{default:o(()=>[d(b(F))]),_:1})])])]),r("div",Je,[a[49]||(a[49]=r("div",{class:"cell-label"},"邀请码",-1)),r("div",Ke,[d(yl,{type:"success",effect:"plain"},{default:o(()=>[_(v(Ja.value.referrer.referral_code),1)]),_:1})])]),r("div",Qe,[a[50]||(a[50]=r("div",{class:"cell-label"},"直推人数",-1)),r("div",Ee,v(Ja.value.referrer.direct_count),1)]),r("div",Ge,[a[51]||(a[51]=r("div",{class:"cell-label"},"累计奖励",-1)),r("div",We,v(Ja.value.referrer.total_reward)+" USDT",1)]),r("div",Xe,[a[52]||(a[52]=r("div",{class:"cell-label"},"绑定时间",-1)),r("div",Ze,v(fl(Ja.value.referrer.bindTime)),1)])])])])])):(t(),s("div",ea,[r("div",aa,[r("div",la,[d(l,null,{default:o(()=>[d(b(R))]),_:1})]),a[53]||(a[53]=r("div",{class:"card-label"},"推荐人（上级）",-1))]),r("div",sa,[r("div",ta,[d(l,{class:"empty-icon"},{default:o(()=>[d(b(x))]),_:1}),a[54]||(a[54]=r("span",null,"该用户无推荐人（顶级用户）",-1))])])])),r("div",ra,[r("div",da,[r("div",ia,[d(l,null,{default:o(()=>[d(b(Y))]),_:1})]),r("div",ca,[a[55]||(a[55]=_("直推成员（下级） - 共 ",-1)),r("strong",null,v(Ja.value.direct_members.length),1),a[56]||(a[56]=_(" 人",-1))])]),Ja.value.direct_members.length>0?(t(),s("div",oa,[d(Vl,{data:Ja.value.direct_members,stripe:"",border:"",size:"small",style:{width:"100%"}},{default:o(()=>[d(kl,{type:"index",label:"序号",width:"60",align:"center"}),d(kl,{prop:"wallet_address",label:"钱包地址","min-width":"180"},{default:o(({row:e})=>[r("span",{class:"wallet-address",onClick:a=>ul(e.wallet_address)},[_(v(pl(e.wallet_address))+" ",1),d(l,null,{default:o(()=>[d(b(F))]),_:1})],8,na)]),_:1}),d(kl,{prop:"referral_code",label:"邀请码",width:"100",align:"center"},{default:o(({row:e})=>[d(yl,{size:"small"},{default:o(()=>[_(v(e.referral_code),1)]),_:2},1024)]),_:1}),d(kl,{prop:"sub_count",label:"下级数",width:"80",align:"center"},{default:o(({row:e})=>[r("span",ua,v(e.sub_count||0),1)]),_:1}),d(kl,{prop:"robot_count",label:"机器人",width:"80",align:"center"},{default:o(({row:e})=>[r("span",{class:g({count:e.robot_count>0})},v(e.robot_count||0),3)]),_:1}),d(kl,{prop:"total_investment",label:"总投资",width:"120",align:"right"},{default:o(({row:e})=>[r("span",{class:g({"amount positive":parseFloat(e.total_investment)>0})},v(vl(e.total_investment))+" USDT ",3)]),_:1}),d(kl,{prop:"bindTime",label:"绑定时间",width:"160"},{default:o(({row:e})=>[_(v(fl(e.bindTime)),1)]),_:1}),d(kl,{label:"操作",width:"100",align:"center"},{default:o(({row:e})=>[d(Xa,{type:"primary",size:"small",link:"",onClick:a=>(async e=>{La.wallet_address=e,await sl()})(e.wallet_address)},{default:o(()=>[...a[57]||(a[57]=[_(" 查看下级 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(t(),s("div",pa,[r("div",_a,[d(l,{class:"empty-icon"},{default:o(()=>[d(b(x))]),_:1}),a[58]||(a[58]=r("span",null,"暂无直推成员",-1))])]))])])):i("",!0),c((t(),m(Vl,{data:Pa.value,stripe:"",border:"",style:{width:"100%"}},{default:o(()=>[d(kl,{type:"index",label:"序号",width:"60",align:"center"}),d(kl,{prop:"wallet_address",label:"用户钱包地址","min-width":"200"},{default:o(({row:e})=>[d(xl,{content:e.wallet_address,placement:"top"},{default:o(()=>[r("span",{class:"wallet-address",onClick:a=>ul(e.wallet_address)},[_(v(pl(e.wallet_address))+" ",1),d(l,null,{default:o(()=>[d(b(F))]),_:1})],8,va)]),_:2},1032,["content"])]),_:1}),d(kl,{prop:"referrer_address",label:"推荐人地址","min-width":"200"},{default:o(({row:e})=>[e.referrer_address?(t(),m(xl,{key:0,content:e.referrer_address,placement:"top"},{default:o(()=>[r("span",{class:"wallet-address",onClick:a=>ul(e.referrer_address)},[_(v(pl(e.referrer_address))+" ",1),d(l,null,{default:o(()=>[d(b(F))]),_:1})],8,fa)]),_:2},1032,["content"])):(t(),s("span",wa,"无推荐人"))]),_:1}),d(kl,{prop:"referral_code",label:"邀请码",width:"120",align:"center"},{default:o(({row:e})=>[d(yl,{size:"small"},{default:o(()=>[_(v(e.referral_code||"-"),1)]),_:2},1024)]),_:1}),d(kl,{prop:"referral_count",label:"邀请人数",width:"100",align:"center"},{default:o(({row:e})=>[r("span",{class:g(["count",{clickable:e.referral_count>0}]),onClick:a=>e.referral_count>0&&rl(e.wallet_address)},v(e.referral_count||0),11,ma)]),_:1}),d(kl,{prop:"total_reward",label:"累计奖励",width:"130",align:"right"},{default:o(({row:e})=>[r("span",ba,v(vl(e.total_reward))+" USDT",1)]),_:1}),d(kl,{prop:"level",label:"等级",width:"80",align:"center"},{default:o(({row:e})=>{return[d(yl,{type:(a=e.level,{1:"info",2:"primary",3:"success",4:"warning",5:"danger"}[a]||"info"),size:"small"},{default:o(()=>[_(" Lv."+v(e.level||1),1)]),_:2},1032,["type"])];var a}),_:1}),d(kl,{prop:"created_at",label:"绑定时间",width:"170"},{default:o(({row:e})=>[_(v(fl(e.created_at)),1)]),_:1}),d(kl,{label:"操作",width:"100",align:"center",fixed:"right"},{default:o(({row:e})=>[d(Xa,{type:"primary",size:"small",link:"",onClick:a=>rl(e.wallet_address)},{default:o(()=>[...a[59]||(a[59]=[_(" 查看关系 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[f,!Ba.value],[Ul,qa.value]])],64)):i("",!0),"conversions"===Ia.value?c((t(),m(Vl,{key:1,data:$a.value,stripe:"",border:"",style:{width:"100%"}},{default:o(()=>[d(kl,{type:"index",label:"序号",width:"60",align:"center"}),d(kl,{prop:"referral_code",label:"推荐码",width:"100",align:"center"},{default:o(({row:e})=>[d(yl,{type:"primary",size:"small"},{default:o(()=>[_(v(e.referral_code),1)]),_:2},1024)]),_:1}),d(kl,{prop:"referrer_address",label:"推荐人地址","min-width":"180"},{default:o(({row:e})=>[e.referrer_address?(t(),s("span",{key:0,class:"wallet-address",onClick:a=>ul(e.referrer_address)},v(pl(e.referrer_address)),9,ga)):(t(),s("span",ha,"-"))]),_:1}),d(kl,{prop:"registered_users",label:"注册人数",width:"100",align:"center"},{default:o(({row:e})=>[r("span",ya,v(e.registered_users||0),1)]),_:1}),d(kl,{prop:"deposited_users",label:"充值人数",width:"100",align:"center"},{default:o(({row:e})=>[r("span",ka,v(e.deposited_users||0),1)]),_:1}),d(kl,{prop:"deposit_rate",label:"充值率",width:"90",align:"center"},{default:o(({row:e})=>[r("span",{class:g(["rate",{positive:parseFloat(e.deposit_rate)>0}])},v(e.deposit_rate),3)]),_:1}),d(kl,{prop:"purchased_users",label:"购买人数",width:"100",align:"center"},{default:o(({row:e})=>[r("span",Va,v(e.purchased_users||0),1)]),_:1}),d(kl,{prop:"purchase_rate",label:"购买率",width:"90",align:"center"},{default:o(({row:e})=>[r("span",{class:g(["rate",{positive:parseFloat(e.purchase_rate)>0}])},v(e.purchase_rate),3)]),_:1}),d(kl,{prop:"total_deposits",label:"充值总额",width:"130",align:"right"},{default:o(({row:e})=>[r("span",xa,v(e.total_deposits)+" USDT",1)]),_:1}),d(kl,{prop:"total_investment",label:"投资总额",width:"130",align:"right"},{default:o(({row:e})=>[r("span",Ca,v(e.total_investment)+" USDT",1)]),_:1}),d(kl,{prop:"total_rewards_earned",label:"获得奖励",width:"130",align:"right"},{default:o(({row:e})=>[r("span",Sa,v(e.total_rewards_earned)+" USDT",1)]),_:1})]),_:1},8,["data"])),[[Ul,qa.value]]):i("",!0),"behaviors"===Ia.value?(t(),s(u,{key:2},[r("div",za,[d(ml,{inline:!0,model:Na,onSubmit:p(Za,["prevent"])},{default:o(()=>[d(Ma,{label:"钱包地址"},{default:o(()=>[d(O,{modelValue:Na.wallet_address,"onUpdate:modelValue":a[11]||(a[11]=e=>Na.wallet_address=e),placeholder:"请输入钱包地址",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),d(Ma,{label:"推荐码"},{default:o(()=>[d(O,{modelValue:Na.referral_code,"onUpdate:modelValue":a[12]||(a[12]=e=>Na.referral_code=e),placeholder:"请输入推荐码",clearable:"",style:{width:"140px"}},null,8,["modelValue"])]),_:1}),d(Ma,{label:"行为类型"},{default:o(()=>[d(Sl,{modelValue:Na.action_type,"onUpdate:modelValue":a[13]||(a[13]=e=>Na.action_type=e),placeholder:"全部",clearable:"",style:{width:"140px"}},{default:o(()=>[d(Cl,{label:"页面访问",value:"page_view"}),d(Cl,{label:"按钮点击",value:"button_click"}),d(Cl,{label:"连接钱包",value:"wallet_connect"}),d(Cl,{label:"充值",value:"deposit"}),d(Cl,{label:"提款",value:"withdraw"}),d(Cl,{label:"购买机器人",value:"robot_buy"})]),_:1},8,["modelValue"])]),_:1}),d(Ma,null,{default:o(()=>[d(Xa,{type:"primary",onClick:Za},{default:o(()=>[d(l,null,{default:o(()=>[d(b(U))]),_:1}),a[60]||(a[60]=_(" 搜索 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),c((t(),m(Vl,{data:Ha.value,stripe:"",border:"",style:{width:"100%"}},{default:o(()=>[d(kl,{type:"index",label:"序号",width:"60",align:"center"}),d(kl,{prop:"wallet_address",label:"钱包地址",width:"180"},{default:o(({row:e})=>[e.wallet_address?(t(),s("span",Ua,v(pl(e.wallet_address)),1)):(t(),s("span",Ta,"未连接"))]),_:1}),d(kl,{prop:"referral_code",label:"来源推荐码",width:"120",align:"center"},{default:o(({row:e})=>[e.referral_code?(t(),m(yl,{key:0,type:"success",size:"small"},{default:o(()=>[_(v(e.referral_code),1)]),_:2},1024)):(t(),s("span",Da,"直接访问"))]),_:1}),d(kl,{prop:"action_type",label:"行为类型",width:"120"},{default:o(({row:e})=>{return[d(yl,{type:(a=e.action_type,{page_view:"info",button_click:"primary",wallet_connect:"success",deposit:"success",withdraw:"warning",robot_buy:"danger"}[a]||"info"),size:"small"},{default:o(()=>[_(v(wl(e.action_type)),1)]),_:2},1032,["type"])];var a}),_:1}),d(kl,{prop:"page_url",label:"页面","min-width":"200"},{default:o(({row:e})=>[e.page_url?(t(),m(xl,{key:0,content:e.page_url,placement:"top"},{default:o(()=>[r("span",ja,v(_l(e.page_url)),1)]),_:2},1032,["content"])):(t(),s("span",Fa,"-"))]),_:1}),d(kl,{prop:"ip_address",label:"IP地址",width:"140"},{default:o(({row:e})=>[r("span",Ra,v(e.ip_address||"-"),1)]),_:1}),d(kl,{prop:"created_at",label:"时间",width:"170"},{default:o(({row:e})=>[_(v(fl(e.created_at)),1)]),_:1})]),_:1},8,["data"])),[[Ul,qa.value]])],64)):i("",!0),c(r("div",Ya,[d(zl,{"current-page":Aa.page,"onUpdate:currentPage":a[14]||(a[14]=e=>Aa.page=e),"page-size":Aa.pageSize,"onUpdate:pageSize":a[15]||(a[15]=e=>Aa.pageSize=e),"page-sizes":[10,20,50,100],total:Aa.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ol,onCurrentChange:nl},null,8,["current-page","page-size","total"])],512),[[f,!Ba.value]])])}}},[["__scopeId","data-v-cb6492ce"]]);export{qa as default};
