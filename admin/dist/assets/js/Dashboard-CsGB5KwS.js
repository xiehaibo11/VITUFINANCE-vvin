import{u as t,d as a,O as e,e as s,w as l,P as o,t as r,s as i,Q as d,h as n,R as c}from"./element-plus-BZcENYie.js";import{i as u}from"./echarts-Cx_KeeaR.js";import{bC as p,V as f}from"./vendor-BQF3adi-.js";import{g as h}from"./index-CQDoFXMh.js";import{u as m}from"./index-Gc17XYwO.js";import{_ as b}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{c as g,_ as v,r as y,v as x,x as w,V as _,A as S,o as C,D as k,B as D,O as L,C as $,ay as z,M as B,u as T,F as W}from"./vue-vendor-CCmsYA1Y.js";const A={class:"dashboard-page"},F={class:"welcome-section"},M={class:"welcome-text"},O={class:"quick-actions"},R={class:"stat-icon primary"},U={class:"stat-info"},G={class:"stat-value"},j={key:0,class:"stat-trend up"},E={key:1,class:"stat-trend placeholder"},I={class:"stat-icon success"},H={class:"stat-info"},Y={class:"stat-value"},N={key:0,class:"stat-trend up"},P={key:1,class:"stat-trend placeholder"},V={class:"stat-icon warning"},q={class:"stat-info"},K={class:"stat-value"},Q={class:"stat-card"},J={class:"stat-icon danger"},X={class:"stat-info"},Z={class:"stat-value"},tt={class:"stat-icon info"},at={class:"stat-info"},et={class:"stat-value"},st={class:"stat-icon purple"},lt={class:"stat-info"},ot={class:"stat-value"},rt={class:"stat-icon cyan"},it={class:"stat-info"},dt={class:"stat-value"},nt={class:"stat-icon orange"},ct={class:"stat-info"},ut={class:"stat-value"},pt={class:"card-header"},ft={class:"card-title"},ht={class:"card-header"},mt={class:"card-title"},bt={class:"card-header"},gt={class:"card-title"},vt={class:"wallet-address"},yt={class:"amount positive"},xt={class:"time-text"},wt={class:"card-header"},_t={class:"card-title"},St={class:"wallet-address"},Ct={class:"amount negative"},kt={class:"time-text"},Dt=b({__name:"Dashboard",setup(b){const Dt=m(),Lt=g(()=>p().format("YYYY年MM月DD日 dddd")),$t=v({totalUsers:0,totalDeposit:0,totalWithdraw:0,platformBalance:0,userGrowth:5.2,depositGrowth:12.8,totalRobots:0,totalFollows:0,totalReferrals:0,totalAnnouncements:0,pendingWithdrawals:0,todayDeposit:0}),zt=v({totalUsers:0,totalDeposit:0,totalWithdraw:0,platformBalance:0}),Bt=y([]),Tt=y([]),Wt=y(null),At=y(null);let Ft=null,Mt=null,Ot=null;x(()=>Dt.theme,()=>{Et()});const Rt=async()=>{try{const t=await h();t.success&&(Object.assign($t,t.data.stats),Bt.value=t.data.recentDeposits||[],Tt.value=t.data.recentWithdrawals||[],Ut("totalUsers",$t.totalUsers),Ut("totalDeposit",parseFloat($t.totalDeposit)),Ut("totalWithdraw",parseFloat($t.totalWithdraw)),Ut("platformBalance",parseFloat($t.platformBalance)),jt(t.data.charts))}catch(t){}},Ut=(t,a)=>{const e=zt[t],s=Date.now(),l=()=>{const o=Date.now()-s,r=Math.min(o/1e3,1),i=1-Math.pow(1-r,4);zt[t]=Math.round(e+(a-e)*i),r<1?requestAnimationFrame(l):zt[t]=a};l()},Gt=()=>{const t="dark"===Dt.theme;return{backgroundColor:"transparent",textColor:t?"rgba(255, 255, 255, 0.65)":"rgba(0, 0, 0, 0.65)",textColorSecondary:t?"rgba(255, 255, 255, 0.45)":"rgba(0, 0, 0, 0.45)",axisLineColor:t?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.15)",splitLineColor:t?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.06)",tooltipBg:t?"rgba(0, 0, 0, 0.85)":"rgba(255, 255, 255, 0.95)",tooltipBorder:t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.08)",tooltipText:t?"rgba(255, 255, 255, 0.85)":"rgba(0, 0, 0, 0.85)",colors:{primary:"#5B8FF9",success:"#5AD8A6",warning:"#F6BD16",danger:"#E8684A",info:"#6DC8EC",purple:"#9270CA"}}},jt=t=>{if(null==t?void 0:t.deposits){const a=t.deposits.values.map(t=>Math.round(t*(.05+.1*Math.random())));null==Ft||Ft.setOption({xAxis:{data:t.deposits.dates},series:[{data:t.deposits.values},{data:a}]})}if(null==t?void 0:t.users){const a=new Date,e=[],s=[];for(let l=6;l>=0;l--){const o=new Date(a);o.setDate(a.getDate()-l);const r=`${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`;e.push(r);const i=t.users.dates.indexOf(r);-1!==i?s.push(t.users.values[i]):s.push(0)}null==Mt||Mt.setOption({xAxis:{data:e},series:[{data:s}]})}},Et=()=>{const t=Gt(),a={backgroundColor:t.backgroundColor,tooltip:{backgroundColor:t.tooltipBg,borderColor:t.tooltipBorder,textStyle:{color:t.tooltipText}},legend:{textStyle:{color:t.textColor}},xAxis:{axisLine:{lineStyle:{color:t.axisLineColor}},axisLabel:{color:t.textColorSecondary}},yAxis:{axisLabel:{color:t.textColorSecondary},splitLine:{lineStyle:{color:t.splitLineColor}}}};null==Ft||Ft.setOption({...a,series:[{lineStyle:{color:t.colors.primary},itemStyle:{color:t.colors.primary},areaStyle:{color:new f(0,0,0,1,[{offset:0,color:"rgba(91, 143, 249, 0.25)"},{offset:1,color:"rgba(91, 143, 249, 0.02)"}])}},{lineStyle:{color:t.colors.success},itemStyle:{color:t.colors.success},areaStyle:{color:new f(0,0,0,1,[{offset:0,color:"rgba(90, 216, 166, 0.2)"},{offset:1,color:"rgba(90, 216, 166, 0.02)"}])}}]}),null==Mt||Mt.setOption({...a,series:[{itemStyle:{color:t.colors.info,borderColor:"#fff"},lineStyle:{color:t.colors.info},areaStyle:{color:new f(0,0,0,1,[{offset:0,color:"rgba(109, 200, 236, 0.4)"},{offset:1,color:"rgba(109, 200, 236, 0.02)"}])}}]})},It=()=>{null==Ft||Ft.resize(),null==Mt||Mt.resize()},Ht=t=>{const a=parseFloat(t||0);return a>=1e6?(a/1e6).toFixed(2)+"M":a>=1e3?(a/1e3).toFixed(2)+"K":a.toFixed(2)},Yt=t=>t?`${t.slice(0,6)}...${t.slice(-4)}`:"",Nt=t=>p(t).format("MM-DD HH:mm"),Pt=t=>({pending:"待处理",processing:"处理中",completed:"已完成",failed:"失败"}[t]||t);return w(()=>{(()=>{const t=Gt();Ft=u(Wt.value),Ft.setOption({backgroundColor:t.backgroundColor,animation:!0,animationDuration:1e3,animationEasing:"cubicInOut",tooltip:{trigger:"axis",backgroundColor:t.tooltipBg,borderColor:t.tooltipBorder,borderWidth:1,borderRadius:6,padding:[10,14],textStyle:{color:t.tooltipText,fontSize:13,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial"},extraCssText:"box-shadow: 0 3px 14px rgba(0,0,0,0.15);",axisPointer:{type:"line",lineStyle:{color:t.colors.primary,width:1,type:"dashed"}},formatter:a=>{let e=`<div style="font-weight: 500; margin-bottom: 8px; color: ${t.tooltipText};">${a[0].axisValue}</div>`;return a.forEach(a=>{var s;const l=0===a.seriesIndex?t.colors.primary:t.colors.success;e+=`<div style="display: flex; align-items: center; margin-bottom: 4px;">\n            <span style="display: inline-block; width: 8px; height: 8px; background: ${l}; border-radius: 50%; margin-right: 8px;"></span>\n            <span style="flex: 1; color: ${t.textColorSecondary};">${a.seriesName}</span>\n            <span style="font-weight: 600; color: ${t.tooltipText}; margin-left: 16px;">$${(null==(s=a.value)?void 0:s.toLocaleString())||0}</span>\n          </div>`}),e}},legend:{show:!0,top:0,right:60,itemWidth:16,itemHeight:8,itemGap:20,textStyle:{color:t.textColor,fontSize:12},icon:"roundRect"},grid:{left:16,right:16,bottom:8,top:40,containLabel:!0},xAxis:{type:"category",data:[],boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:t.axisLineColor}},axisTick:{show:!1},axisLabel:{color:t.textColorSecondary,fontSize:11,margin:12}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:t.textColorSecondary,fontSize:11,formatter:t=>t>=1e3?t/1e3+"k":t},splitLine:{lineStyle:{color:t.splitLineColor,type:"dashed"}},splitNumber:4},series:[{name:"充值金额",type:"line",smooth:.6,symbol:"circle",symbolSize:6,showSymbol:!1,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff",shadowBlur:8,shadowColor:"rgba(91, 143, 249, 0.4)"}},lineStyle:{width:2,color:t.colors.primary},itemStyle:{color:t.colors.primary,borderWidth:2,borderColor:"#fff"},areaStyle:{color:new f(0,0,0,1,[{offset:0,color:"rgba(91, 143, 249, 0.25)"},{offset:1,color:"rgba(91, 143, 249, 0.02)"}])},data:[]},{name:"手续费",type:"line",smooth:.6,symbol:"circle",symbolSize:6,showSymbol:!1,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff",shadowBlur:8,shadowColor:"rgba(90, 216, 166, 0.4)"}},lineStyle:{width:2,color:t.colors.success},itemStyle:{color:t.colors.success,borderWidth:2,borderColor:"#fff"},areaStyle:{color:new f(0,0,0,1,[{offset:0,color:"rgba(90, 216, 166, 0.2)"},{offset:1,color:"rgba(90, 216, 166, 0.02)"}])},data:[]}]}),Mt=u(At.value),Mt.setOption({backgroundColor:t.backgroundColor,animation:!0,animationDuration:1e3,animationEasing:"cubicOut",tooltip:{trigger:"axis",backgroundColor:t.tooltipBg,borderColor:t.tooltipBorder,borderWidth:1,borderRadius:6,padding:[10,14],textStyle:{color:t.tooltipText,fontSize:13},extraCssText:"box-shadow: 0 3px 14px rgba(0,0,0,0.15);",axisPointer:{type:"cross",label:{backgroundColor:t.colors.info}},formatter:a=>{const e=a[0];return`<div style="font-weight: 500; margin-bottom: 8px;">${e.name}</div>\n          <div style="display: flex; align-items: center;">\n            <span style="display: inline-block; width: 8px; height: 8px; background: ${t.colors.info}; border-radius: 50%; margin-right: 8px;"></span>\n            <span style="color: ${t.textColorSecondary};">新增用户</span>\n            <span style="font-weight: 600; margin-left: 16px;">${e.value}</span>\n          </div>`}},grid:{left:16,right:16,bottom:8,top:24,containLabel:!0},xAxis:{type:"category",data:[],boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:t.axisLineColor}},axisTick:{show:!1},axisLabel:{color:t.textColorSecondary,fontSize:11,margin:12}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:t.textColorSecondary,fontSize:11},splitLine:{lineStyle:{color:t.splitLineColor,type:"dashed"}},minInterval:1},series:[{name:"新增用户",type:"line",smooth:.4,symbol:"circle",symbolSize:8,showSymbol:!1,itemStyle:{color:t.colors.info,borderWidth:2,borderColor:"#fff",shadowBlur:4,shadowColor:"rgba(0,0,0,0.2)"},lineStyle:{width:3,color:t.colors.info,shadowColor:"rgba(109, 200, 236, 0.5)",shadowBlur:10},areaStyle:{color:new f(0,0,0,1,[{offset:0,color:"rgba(109, 200, 236, 0.4)"},{offset:1,color:"rgba(109, 200, 236, 0.02)"}])},emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff",shadowBlur:10,shadowColor:t.colors.info}},data:[]}]})})(),Rt(),window.addEventListener("resize",It),Ot=setInterval(()=>{Rt()},3e4)}),_(()=>{window.removeEventListener("resize",It),null==Ft||Ft.dispose(),null==Mt||Mt.dispose(),Ot&&(clearInterval(Ot),Ot=null)}),(u,p)=>{const f=z("el-icon"),h=z("el-button"),m=z("el-col"),b=z("el-row"),g=z("el-tag"),v=z("el-card"),y=z("el-table-column"),x=z("el-table");return C(),S("div",A,[k("div",F,[k("div",M,[p[11]||(p[11]=k("h1",null,"欢迎回来，管理员",-1)),k("p",null,"今天是 "+L(Lt.value)+"，以下是您的平台概览",1)]),k("div",O,[D(h,{type:"primary",onClick:p[0]||(p[0]=t=>u.$router.push("/users"))},{default:$(()=>[D(f,null,{default:$(()=>[D(T(t))]),_:1}),p[12]||(p[12]=B(" 用户管理 ",-1))]),_:1}),D(h,{onClick:p[1]||(p[1]=t=>u.$router.push("/deposits"))},{default:$(()=>[D(f,null,{default:$(()=>[D(T(a))]),_:1}),p[13]||(p[13]=B(" 充值记录 ",-1))]),_:1})])]),D(b,{gutter:20,class:"stats-row"},{default:$(()=>[D(m,{xs:24,sm:12,md:6},{default:$(()=>[k("div",{class:"stat-card clickable",onClick:p[2]||(p[2]=t=>u.$router.push("/users"))},[k("div",R,[D(f,{size:28},{default:$(()=>[D(T(t))]),_:1})]),k("div",U,[k("div",G,L(zt.totalUsers),1),p[14]||(p[14]=k("div",{class:"stat-label"},"用户总数",-1)),$t.userGrowth>0?(C(),S("div",j,[D(f,null,{default:$(()=>[D(T(e))]),_:1}),k("span",null,L($t.userGrowth)+"% 较昨日",1)])):(C(),S("div",E))])])]),_:1}),D(m,{xs:24,sm:12,md:6},{default:$(()=>[k("div",{class:"stat-card clickable",onClick:p[3]||(p[3]=t=>u.$router.push("/deposits"))},[k("div",I,[D(f,{size:28},{default:$(()=>[D(T(a))]),_:1})]),k("div",H,[k("div",Y,L(Ht(zt.totalDeposit)),1),p[15]||(p[15]=k("div",{class:"stat-label"},"总充值 (USDT)",-1)),$t.depositGrowth>0?(C(),S("div",N,[D(f,null,{default:$(()=>[D(T(e))]),_:1}),k("span",null,L($t.depositGrowth)+"% 较昨日",1)])):(C(),S("div",P))])])]),_:1}),D(m,{xs:24,sm:12,md:6},{default:$(()=>[k("div",{class:"stat-card clickable",onClick:p[4]||(p[4]=t=>u.$router.push("/withdrawals"))},[k("div",V,[D(f,{size:28},{default:$(()=>[D(T(s))]),_:1})]),k("div",q,[k("div",K,L(Ht(zt.totalWithdraw)),1),p[16]||(p[16]=k("div",{class:"stat-label"},"总提款 (USDT)",-1)),p[17]||(p[17]=k("div",{class:"stat-trend placeholder"},null,-1))])])]),_:1}),D(m,{xs:24,sm:12,md:6},{default:$(()=>[k("div",Q,[k("div",J,[D(f,{size:28},{default:$(()=>[D(T(l))]),_:1})]),k("div",X,[k("div",Z,L(Ht(zt.platformBalance)),1),p[18]||(p[18]=k("div",{class:"stat-label"},"平台余额 (USDT)",-1)),p[19]||(p[19]=k("div",{class:"stat-trend placeholder"},null,-1))])])]),_:1})]),_:1}),D(b,{gutter:20,class:"stats-row"},{default:$(()=>[D(m,{xs:24,sm:12,md:6},{default:$(()=>[k("div",{class:"stat-card clickable",onClick:p[5]||(p[5]=t=>u.$router.push("/robots-active"))},[k("div",tt,[D(f,{size:28},{default:$(()=>[D(T(o))]),_:1})]),k("div",at,[k("div",et,L($t.totalRobots||0),1),p[20]||(p[20]=k("div",{class:"stat-label"},"机器人购买",-1)),p[21]||(p[21]=k("div",{class:"stat-trend placeholder"},null,-1))])])]),_:1}),D(m,{xs:24,sm:12,md:6},{default:$(()=>[k("div",{class:"stat-card clickable",onClick:p[6]||(p[6]=t=>u.$router.push("/follows"))},[k("div",st,[D(f,{size:28},{default:$(()=>[D(T(r))]),_:1})]),k("div",lt,[k("div",ot,L($t.totalFollows||0),1),p[22]||(p[22]=k("div",{class:"stat-label"},"跟单交易",-1)),p[23]||(p[23]=k("div",{class:"stat-trend placeholder"},null,-1))])])]),_:1}),D(m,{xs:24,sm:12,md:6},{default:$(()=>[k("div",{class:"stat-card clickable",onClick:p[7]||(p[7]=t=>u.$router.push("/referrals"))},[k("div",rt,[D(f,{size:28},{default:$(()=>[D(T(i))]),_:1})]),k("div",it,[k("div",dt,L($t.totalReferrals||0),1),p[24]||(p[24]=k("div",{class:"stat-label"},"推广人数",-1)),p[25]||(p[25]=k("div",{class:"stat-trend placeholder"},null,-1))])])]),_:1}),D(m,{xs:24,sm:12,md:6},{default:$(()=>[k("div",{class:"stat-card clickable",onClick:p[8]||(p[8]=t=>u.$router.push("/withdrawals"))},[k("div",nt,[D(f,{size:28},{default:$(()=>[D(T(d))]),_:1})]),k("div",ct,[k("div",ut,L($t.pendingWithdrawals||0),1),p[26]||(p[26]=k("div",{class:"stat-label"},"待处理提款",-1)),p[27]||(p[27]=k("div",{class:"stat-trend placeholder"},null,-1))])])]),_:1})]),_:1}),D(b,{gutter:20,class:"charts-row"},{default:$(()=>[D(m,{xs:24,lg:12},{default:$(()=>[D(v,{class:"chart-card",shadow:"never"},{header:$(()=>[k("div",pt,[k("span",ft,[D(f,null,{default:$(()=>[D(T(r))]),_:1}),p[28]||(p[28]=B(" 充值趋势（近7天） ",-1))]),D(g,{type:"success",size:"small"},{default:$(()=>[...p[29]||(p[29]=[B("实时",-1)])]),_:1})])]),default:$(()=>[k("div",{ref_key:"depositChartRef",ref:Wt,class:"chart-container"},null,512)]),_:1})]),_:1}),D(m,{xs:24,lg:12},{default:$(()=>[D(v,{class:"chart-card",shadow:"never"},{header:$(()=>[k("div",ht,[k("span",mt,[D(f,null,{default:$(()=>[D(T(n))]),_:1}),p[30]||(p[30]=B(" 用户增长（近7天） ",-1))])])]),default:$(()=>[k("div",{ref_key:"userChartRef",ref:At,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),D(b,{gutter:20,class:"recent-row"},{default:$(()=>[D(m,{xs:24,lg:12},{default:$(()=>[D(v,{class:"recent-card",shadow:"never"},{header:$(()=>[k("div",bt,[k("span",gt,[D(f,null,{default:$(()=>[D(T(a))]),_:1}),p[31]||(p[31]=B(" 最近充值 ",-1))]),D(h,{type:"primary",link:"",onClick:p[9]||(p[9]=t=>u.$router.push("/deposits"))},{default:$(()=>[p[32]||(p[32]=B(" 查看全部 ",-1)),D(f,null,{default:$(()=>[D(T(c))]),_:1})]),_:1})])]),default:$(()=>[D(x,{data:Bt.value,size:"small",stripe:"","max-height":"320"},{default:$(()=>[D(y,{prop:"wallet_address",label:"钱包地址","min-width":"140"},{default:$(({row:t})=>[k("span",vt,L(Yt(t.wallet_address)),1)]),_:1}),D(y,{prop:"amount",label:"金额",width:"120"},{default:$(({row:t})=>[k("span",yt,"+"+L(t.amount)+" USDT",1)]),_:1}),D(y,{prop:"status",label:"状态",width:"90"},{default:$(({row:t})=>[k("span",{class:W(["status-badge",t.status])},L(Pt(t.status)),3)]),_:1}),D(y,{prop:"created_at",label:"时间",width:"110"},{default:$(({row:t})=>[k("span",xt,L(Nt(t.created_at)),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),D(m,{xs:24,lg:12},{default:$(()=>[D(v,{class:"recent-card",shadow:"never"},{header:$(()=>[k("div",wt,[k("span",_t,[D(f,null,{default:$(()=>[D(T(s))]),_:1}),p[33]||(p[33]=B(" 最近提款 ",-1))]),D(h,{type:"primary",link:"",onClick:p[10]||(p[10]=t=>u.$router.push("/withdrawals"))},{default:$(()=>[p[34]||(p[34]=B(" 查看全部 ",-1)),D(f,null,{default:$(()=>[D(T(c))]),_:1})]),_:1})])]),default:$(()=>[D(x,{data:Tt.value,size:"small",stripe:"","max-height":"320"},{default:$(()=>[D(y,{prop:"wallet_address",label:"钱包地址","min-width":"140"},{default:$(({row:t})=>[k("span",St,L(Yt(t.wallet_address)),1)]),_:1}),D(y,{prop:"amount",label:"金额",width:"120"},{default:$(({row:t})=>[k("span",Ct,"-"+L(t.amount)+" USDT",1)]),_:1}),D(y,{prop:"status",label:"状态",width:"90"},{default:$(({row:t})=>[k("span",{class:W(["status-badge",t.status])},L(Pt(t.status)),3)]),_:1}),D(y,{prop:"created_at",label:"时间",width:"110"},{default:$(({row:t})=>[k("span",kt,L(Nt(t.created_at)),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}}},[["__scopeId","data-v-b4beec08"]]);export{Dt as default};
