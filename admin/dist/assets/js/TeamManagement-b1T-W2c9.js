import{r as e,_ as a,c as l,x as t,A as s,o as d,B as r,C as u,ay as o,aI as n,D as i,M as _,u as c,Y as p,ap as v,P as m,ac as f,J as w,m as y,O as g,K as b}from"./vue-vendor-CCmsYA1Y.js";import{b as h,j as V,S as k,a7 as x,T as U,M as C,u as S,g as z,_ as T,a3 as $,h as D,B as F,V as j,a5 as q,N as I}from"./element-plus-BZcENYie.js";import{r as N}from"./index-CCj7ctyJ.js";import{_ as M}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./vendor-BQF3adi-.js";import"./index-BArJCJm5.js";const B={class:"team-management-container"},K={class:"card-header"},P=["onClick"],A={class:"stat-value"},J={class:"amount"},L={class:"amount success"},O={class:"amount warning"},Y={class:"user-detail"},E={class:"stat-card primary"},G={class:"stat-icon"},H={class:"stat-info"},Q={class:"value"},R={class:"stat-card success"},W={class:"stat-icon"},X={class:"stat-info"},Z={class:"value"},ee={class:"stat-card warning"},ae={class:"stat-icon"},le={class:"stat-info"},te={class:"value"},se={class:"stat-card info"},de={class:"stat-icon"},re={class:"stat-info"},ue={class:"value"},oe={class:"wallet-full"},ne={class:"amount success"},ie={class:"amount warning"},_e={class:"community-stats-section"},ce={class:"community-stat-card deposit"},pe={class:"stat-value"},ve={class:"community-stat-card withdraw"},me={class:"stat-value"},fe={class:"community-stat-card personal-deposit"},we={class:"stat-value"},ye={class:"community-stat-card personal-withdraw"},ge={class:"stat-value"},be={class:"detail-actions"},he={key:0,class:"hierarchy-section"},Ve={class:"tree-node"},ke={class:"node-addr"},xe={class:"node-info"},Ue={key:0,class:"batch-preview"},Ce={key:0,class:"more-hint"},Se=M({__name:"TeamManagement",setup(M){const Se=e(!1),ze=e(""),Te=e(0),$e=e([]),De=a({page:1,pageSize:20,total:0}),Fe=e(!1),je=e(!1),qe=e({}),Ie=e(null),Ne=e(!1),Me=e(!1),Be=e({total_members:0,hierarchy:[]}),Ke={children:"children",label:"wallet_address"},Pe=e(!1),Ae=e("referral"),Je=e(!1),Le=a({wallet_address:"",amount:10,broker_level:1,reason:""}),Oe=e(!1),Ye=e(!1),Ee=a({wallet_address:"",old_level:0,new_level:0,reason:""}),Ge=e(!1),He=e(!1),Qe=a({wallet_address:"",stat_type:"",current_value:0,operation_type:"set",amount:0,reason:""}),Re=e(!1),We=e(!1),Xe=a({award_type:"referral",rawInput:"",reason:""}),Ze=l(()=>Be.value.hierarchy||[]),ea=l(()=>({team_deposits:"调整社区总充值",team_withdrawals:"调整社区总提现",user_deposits:"调整个人总充值",user_withdrawals:"调整个人总提现"}[Qe.stat_type]||"调整统计数据")),aa=l(()=>({team_deposits:"社区总充值",team_withdrawals:"社区总提现",user_deposits:"个人总充值",user_withdrawals:"个人总提现"}[Qe.stat_type]||"")),la=l(()=>{const e=parseFloat(Qe.current_value)||0,a=parseFloat(Qe.amount)||0;return"set"===Qe.operation_type?a.toFixed(4):"increase"===Qe.operation_type?(e+a).toFixed(4):Math.max(0,e-a).toFixed(4)}),ta=l(()=>parseFloat(la.value)<0?"danger":"increase"===Qe.operation_type?"success":"set"===Qe.operation_type?"primary":"warning"),sa=l(()=>{if(!Xe.rawInput)return[];const e=Xe.rawInput.trim().split("\n"),a=[];for(const l of e){const e=l.trim().split(",");if(e.length>=2){const l=e[0].trim(),t=parseFloat(e[1].trim());l&&!isNaN(t)&&t>0&&a.push({wallet_address:l.toLowerCase(),amount:t,broker_level:1})}}return a}),da=l(()=>sa.value.reduce((e,a)=>e+a.amount,0).toFixed(2)),ra=async()=>{var e;Se.value=!0;try{const a=await N.get("/team-management/search",{params:{q:ze.value,page:De.page,limit:De.pageSize,min_level:Te.value}});a.success&&($e.value=a.data||[],De.total=(null==(e=a.pagination)?void 0:e.total)||0)}catch(a){h.error("搜索用户失败")}finally{Se.value=!1}},ua=async e=>{Ie.value=e,Fe.value=!0,Ne.value=!1,je.value=!0;try{const a=await N.get(`/team-management/user/${e.wallet_address}`);a.success&&(qe.value=a.data)}catch(a){h.error("获取用户详情失败")}finally{je.value=!1}},oa=async()=>{if(Ie.value){Ne.value=!0,Me.value=!0;try{const e=await N.get(`/team-management/hierarchy/${Ie.value.wallet_address}`,{params:{max_level:5}});e.success&&(Be.value=e.data)}catch(e){h.error("获取推荐层级失败")}finally{Me.value=!1}}},na=(e,a)=>{Ae.value=a,Le.wallet_address=e.wallet_address,Le.amount=10,Le.broker_level=e.broker_level||1,Le.reason="",Pe.value=!0},ia=async()=>{var e,a;if(!Le.amount||Le.amount<=0)h.warning("请输入有效金额");else{await I.confirm(`确定要向 ${fa(Le.wallet_address)} 发放 ${Le.amount} USDT ${"referral"===Ae.value?"推荐奖励":"团队分红"} 吗？`,"确认发放",{type:"warning"}),Je.value=!0;try{const e="referral"===Ae.value?"/team-management/award-referral":"/team-management/award-dividend",a=await N.post(e,Le);a.success?(h.success(a.message||"发放成功"),Pe.value=!1,Fe.value&&Ie.value&&ua(Ie.value),ra()):h.error(a.message||"发放失败")}catch(l){h.error((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"发放失败")}finally{Je.value=!1}}},_a=e=>{Qe.wallet_address=qe.value.wallet_address,Qe.stat_type=e;const a={team_deposits:qe.value.team_total_deposits,team_withdrawals:qe.value.team_total_withdrawals,user_deposits:qe.value.user_total_deposits,user_withdrawals:qe.value.user_total_withdrawals};Qe.current_value=parseFloat(a[e])||0,Qe.operation_type="set",Qe.amount=Qe.current_value,Qe.reason="",Ge.value=!0},ca=async()=>{var e,a;if(!Qe.reason||!Qe.reason.trim())return void h.warning("请输入调整原因");const l=parseFloat(Qe.amount);if(isNaN(l)||l<0)h.warning("请输入有效的金额");else{await I.confirm(`确定要调整 ${aa.value} 吗？\n当前: ${Qe.current_value.toFixed(4)} USDT\n调整后: ${la.value} USDT`,"确认调整",{type:"warning"}),He.value=!0;try{const e=await N.post("/team-management/adjust-community-stats",{wallet_address:Qe.wallet_address,stat_type:Qe.stat_type,amount:Qe.amount,operation_type:Qe.operation_type,reason:Qe.reason});e.success?(h.success(e.message||"调整成功"),Ge.value=!1,Ie.value&&ua(Ie.value)):h.error(e.message||"调整失败")}catch(t){h.error((null==(a=null==(e=t.response)?void 0:e.data)?void 0:a.message)||"调整失败")}finally{He.value=!1}}},pa=()=>{qe.value.wallet_address&&(Ee.wallet_address=qe.value.wallet_address,Ee.old_level=qe.value.broker_level||0,Ee.new_level=qe.value.broker_level||0,Ee.reason="",Oe.value=!0)},va=async()=>{var e,a;if(Ee.new_level!==Ee.old_level){await I.confirm(`确定要将 ${fa(Ee.wallet_address)} 的等级从 ${Ee.old_level}级 调整为 ${Ee.new_level}级 吗？`,"确认调整",{type:"warning"}),Ye.value=!0;try{const e=await N.put("/team-management/broker-level",Ee);e.success?(h.success(e.message||"调整成功"),Oe.value=!1,Ie.value&&ua(Ie.value),ra()):h.error(e.message||"调整失败")}catch(l){h.error((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"调整失败")}finally{Ye.value=!1}}else h.warning("新等级与当前等级相同")},ma=async()=>{var e,a;if(0!==sa.value.length){await I.confirm(`确定要批量发放 ${sa.value.length} 条 ${"referral"===Xe.award_type?"推荐奖励":"团队分红"}，总金额 ${da.value} USDT 吗？`,"确认批量发放",{type:"warning"}),We.value=!0;try{const e=await N.post("/team-management/batch-award",{awards:sa.value,award_type:Xe.award_type,reason:Xe.reason||"批量发放"});e.success?(h.success(e.message||"批量发放完成"),Re.value=!1,Xe.rawInput="",ra()):h.error(e.message||"批量发放失败")}catch(l){h.error((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"批量发放失败")}finally{We.value=!1}}else h.warning("请输入有效的发放列表")},fa=e=>e?`${e.slice(0,6)}...${e.slice(-4)}`:"-",wa=e=>parseFloat(e||0).toFixed(4),ya=e=>["info","primary","success","warning","danger","danger"][e]||"info";return t(()=>{ra()}),(e,a)=>{const l=o("el-icon"),t=o("el-card"),I=o("el-input"),N=o("el-form-item"),M=o("el-option"),Ie=o("el-select"),ga=o("el-button"),ba=o("el-form"),ha=o("el-tag"),Va=o("el-tooltip"),ka=o("el-table-column"),xa=o("el-table"),Ua=o("el-pagination"),Ca=o("el-col"),Sa=o("el-row"),za=o("el-descriptions-item"),Ta=o("el-descriptions"),$a=o("el-tree"),Da=o("el-empty"),Fa=o("el-dialog"),ja=o("el-input-number"),qa=o("el-alert"),Ia=o("el-radio"),Na=o("el-radio-group"),Ma=n("loading");return d(),s("div",B,[r(t,{class:"header-card"},{default:u(()=>[i("h2",null,[r(l,null,{default:u(()=>[r(c(V))]),_:1}),a[34]||(a[34]=_(" 团队推荐管理",-1))]),a[35]||(a[35]=i("p",{class:"subtitle"},"搜索用户、发放奖励、调整等级、查看推荐层级",-1))]),_:1}),r(t,{class:"search-card"},{default:u(()=>[r(ba,{inline:!0,onSubmit:p(ra,["prevent"])},{default:u(()=>[r(N,{label:"钱包地址"},{default:u(()=>[r(I,{modelValue:ze.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ze.value=e),placeholder:"输入钱包地址搜索",clearable:"",style:{width:"300px"},onKeyup:v(ra,["enter"])},null,8,["modelValue"])]),_:1}),r(N,{label:"最低等级"},{default:u(()=>[r(Ie,{modelValue:Te.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Te.value=e),placeholder:"全部",clearable:"",style:{width:"120px"}},{default:u(()=>[r(M,{label:"全部",value:0}),(d(),s(m,null,f(5,e=>r(M,{key:e,label:`${e}级`,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),r(N,null,{default:u(()=>[r(ga,{type:"primary",onClick:ra,loading:Se.value},{default:u(()=>[r(l,null,{default:u(()=>[r(c(k))]),_:1}),a[36]||(a[36]=_(" 搜索 ",-1))]),_:1},8,["loading"]),r(ga,{type:"success",onClick:a[2]||(a[2]=e=>Re.value=!0)},{default:u(()=>[r(l,null,{default:u(()=>[r(c(x))]),_:1}),a[37]||(a[37]=_(" 批量发放 ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),r(t,{class:"main-card"},{header:u(()=>[i("div",K,[a[38]||(a[38]=i("span",null,"用户列表",-1)),r(ha,{type:"info"},{default:u(()=>[_("共 "+g(De.total)+" 条",1)]),_:1})])]),default:u(()=>[w((d(),y(xa,{data:$e.value,stripe:"",border:"",style:{width:"100%"}},{default:u(()=>[r(ka,{prop:"wallet_address",label:"钱包地址","min-width":"180"},{default:u(({row:e})=>[r(Va,{content:e.wallet_address},{default:u(()=>[i("span",{class:"wallet-addr",onClick:a=>{return l=e.wallet_address,navigator.clipboard.writeText(l),void h.success("已复制");var l}},[_(g(fa(e.wallet_address))+" ",1),r(l,null,{default:u(()=>[r(c(U))]),_:1})],8,P)]),_:2},1032,["content"])]),_:1}),r(ka,{prop:"broker_level",label:"经纪人等级",width:"110",align:"center"},{default:u(({row:e})=>[r(ha,{type:ya(e.broker_level),effect:"dark"},{default:u(()=>[_(g(e.broker_level?`${e.broker_level}级`:"普通用户"),1)]),_:2},1032,["type"])]),_:1}),r(ka,{prop:"direct_referrals",label:"直推人数",width:"100",align:"center"},{default:u(({row:e})=>[i("span",A,g(e.direct_referrals||0),1)]),_:1}),r(ka,{prop:"usdt_balance",label:"USDT余额",width:"120",align:"right"},{default:u(({row:e})=>[i("span",J,g(wa(e.usdt_balance)),1)]),_:1}),r(ka,{prop:"total_referral_reward",label:"累计推荐奖励",width:"130",align:"right"},{default:u(({row:e})=>[i("span",L,g(wa(e.total_referral_reward)),1)]),_:1}),r(ka,{prop:"total_team_dividend",label:"累计团队分红",width:"130",align:"right"},{default:u(({row:e})=>[i("span",O,g(wa(e.total_team_dividend)),1)]),_:1}),r(ka,{label:"操作",width:"280",fixed:"right"},{default:u(({row:e})=>[r(ga,{size:"small",type:"primary",onClick:a=>ua(e)},{default:u(()=>[r(l,null,{default:u(()=>[r(c(C))]),_:1}),a[39]||(a[39]=_(" 详情 ",-1))]),_:1},8,["onClick"]),r(ga,{size:"small",type:"success",onClick:a=>na(e,"referral")},{default:u(()=>[...a[40]||(a[40]=[_(" 发奖励 ",-1)])]),_:1},8,["onClick"]),r(ga,{size:"small",type:"warning",onClick:a=>na(e,"dividend")},{default:u(()=>[...a[41]||(a[41]=[_(" 发分红 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ma,Se.value]]),r(Ua,{"current-page":De.page,"onUpdate:currentPage":a[3]||(a[3]=e=>De.page=e),"page-size":De.pageSize,"onUpdate:pageSize":a[4]||(a[4]=e=>De.pageSize=e),total:De.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:ra,onSizeChange:ra,class:"pagination"},null,8,["current-page","page-size","total"])]),_:1}),r(Fa,{modelValue:Fe.value,"onUpdate:modelValue":a[11]||(a[11]=e=>Fe.value=e),title:"用户团队详情",width:"900px","destroy-on-close":""},{default:u(()=>[w((d(),s("div",Y,[r(Sa,{gutter:16,class:"stats-row"},{default:u(()=>[r(Ca,{span:6},{default:u(()=>[i("div",E,[i("div",G,[r(l,null,{default:u(()=>[r(c(S))]),_:1})]),i("div",H,[i("div",Q,g(qe.value.broker_level||0)+"级",1),a[42]||(a[42]=i("div",{class:"label"},"经纪人等级",-1))])])]),_:1}),r(Ca,{span:6},{default:u(()=>[i("div",R,[i("div",W,[r(l,null,{default:u(()=>[r(c(z))]),_:1})]),i("div",X,[i("div",Z,g(wa(qe.value.usdt_balance)),1),a[43]||(a[43]=i("div",{class:"label"},"USDT余额",-1))])])]),_:1}),r(Ca,{span:6},{default:u(()=>[i("div",ee,[i("div",ae,[r(l,null,{default:u(()=>[r(c(T))]),_:1})]),i("div",le,[i("div",te,g(qe.value.direct_referrals||0),1),a[44]||(a[44]=i("div",{class:"label"},"直推人数",-1))])])]),_:1}),r(Ca,{span:6},{default:u(()=>[i("div",se,[i("div",de,[r(l,null,{default:u(()=>[r(c(V))]),_:1})]),i("div",re,[i("div",ue,g(qe.value.total_team_members||0),1),a[45]||(a[45]=i("div",{class:"label"},"团队总人数",-1))])])]),_:1})]),_:1}),r(Ta,{column:3,border:"",class:"detail-desc"},{default:u(()=>[r(za,{label:"钱包地址"},{default:u(()=>[i("span",oe,g(qe.value.wallet_address),1)]),_:1}),r(za,{label:"团队业绩"},{default:u(()=>[_(g(wa(qe.value.team_performance))+" USDT ",1)]),_:1}),r(za,{label:"合格直推"},{default:u(()=>[_(g(qe.value.qualified_direct_members||0),1)]),_:1}),r(za,{label:"累计推荐奖励"},{default:u(()=>[i("span",ne,g(wa(qe.value.total_referral_reward))+" USDT",1)]),_:1}),r(za,{label:"累计团队分红"},{default:u(()=>[i("span",ie,g(wa(qe.value.total_team_dividend))+" USDT",1)]),_:1}),r(za,{label:"我的推荐人"},{default:u(()=>[_(g(qe.value.my_referrer?fa(qe.value.my_referrer):"无"),1)]),_:1})]),_:1}),i("div",_e,[i("h4",null,[r(l,null,{default:u(()=>[r(c(x))]),_:1}),a[46]||(a[46]=_(" 社区充值提现统计",-1))]),r(Sa,{gutter:16,class:"community-stats-row"},{default:u(()=>[r(Ca,{span:6},{default:u(()=>[i("div",ce,[i("div",pe,g(wa(qe.value.team_total_deposits)),1),a[48]||(a[48]=i("div",{class:"stat-label"},"社区总充值 (USDT)",-1)),r(ga,{size:"small",type:"primary",link:"",onClick:a[5]||(a[5]=e=>_a("team_deposits"))},{default:u(()=>[r(l,null,{default:u(()=>[r(c($))]),_:1}),a[47]||(a[47]=_(" 调整 ",-1))]),_:1})])]),_:1}),r(Ca,{span:6},{default:u(()=>[i("div",ve,[i("div",me,g(wa(qe.value.team_total_withdrawals)),1),a[50]||(a[50]=i("div",{class:"stat-label"},"社区总提现 (USDT)",-1)),r(ga,{size:"small",type:"primary",link:"",onClick:a[6]||(a[6]=e=>_a("team_withdrawals"))},{default:u(()=>[r(l,null,{default:u(()=>[r(c($))]),_:1}),a[49]||(a[49]=_(" 调整 ",-1))]),_:1})])]),_:1}),r(Ca,{span:6},{default:u(()=>[i("div",fe,[i("div",we,g(wa(qe.value.user_total_deposits)),1),a[52]||(a[52]=i("div",{class:"stat-label"},"个人总充值 (USDT)",-1)),r(ga,{size:"small",type:"primary",link:"",onClick:a[7]||(a[7]=e=>_a("user_deposits"))},{default:u(()=>[r(l,null,{default:u(()=>[r(c($))]),_:1}),a[51]||(a[51]=_(" 调整 ",-1))]),_:1})])]),_:1}),r(Ca,{span:6},{default:u(()=>[i("div",ye,[i("div",ge,g(wa(qe.value.user_total_withdrawals)),1),a[54]||(a[54]=i("div",{class:"stat-label"},"个人总提现 (USDT)",-1)),r(ga,{size:"small",type:"primary",link:"",onClick:a[8]||(a[8]=e=>_a("user_withdrawals"))},{default:u(()=>[r(l,null,{default:u(()=>[r(c($))]),_:1}),a[53]||(a[53]=_(" 调整 ",-1))]),_:1})])]),_:1})]),_:1})]),i("div",be,[r(ga,{type:"primary",onClick:oa},{default:u(()=>[r(l,null,{default:u(()=>[r(c(D))]),_:1}),a[55]||(a[55]=_(" 查看推荐层级树 ",-1))]),_:1}),r(ga,{type:"success",onClick:a[9]||(a[9]=e=>na(qe.value,"referral"))},{default:u(()=>[r(l,null,{default:u(()=>[r(c(x))]),_:1}),a[56]||(a[56]=_(" 发放推荐奖励 ",-1))]),_:1}),r(ga,{type:"warning",onClick:a[10]||(a[10]=e=>na(qe.value,"dividend"))},{default:u(()=>[r(l,null,{default:u(()=>[r(c(z))]),_:1}),a[57]||(a[57]=_(" 发放团队分红 ",-1))]),_:1}),r(ga,{type:"info",onClick:pa},{default:u(()=>[r(l,null,{default:u(()=>[r(c(F))]),_:1}),a[58]||(a[58]=_(" 调整等级 ",-1))]),_:1})]),Ne.value?(d(),s("div",he,[i("h4",null,[r(l,null,{default:u(()=>[r(c(D))]),_:1}),_(" 推荐层级树 ("+g(Be.value.total_members)+" 人) ",1)]),w((d(),s("div",null,[Ze.value.length>0?(d(),y($a,{key:0,data:Ze.value,props:Ke,"default-expand-all":"","node-key":"wallet_address"},{default:u(({node:e,data:a})=>[i("div",Ve,[i("span",ke,g(fa(a.wallet_address)),1),r(ha,{size:"small",type:ya(a.broker_level)},{default:u(()=>[_(g(a.broker_level?`${a.broker_level}级`:"普通"),1)]),_:2},1032,["type"]),i("span",xe," 余额: "+g(wa(a.balance))+" | 机器人: "+g(a.active_robots)+" | 下级: "+g(a.sub_count),1)])]),_:1},8,["data"])):(d(),y(Da,{key:1,description:"暂无下级成员"}))])),[[Ma,Me.value]])])):b("",!0)])),[[Ma,je.value]])]),_:1},8,["modelValue"]),r(Fa,{modelValue:Pe.value,"onUpdate:modelValue":a[17]||(a[17]=e=>Pe.value=e),title:"referral"===Ae.value?"发放推荐奖励":"发放团队分红",width:"500px"},{footer:u(()=>[r(ga,{onClick:a[16]||(a[16]=e=>Pe.value=!1)},{default:u(()=>[...a[60]||(a[60]=[_("取消",-1)])]),_:1}),r(ga,{type:"primary",onClick:ia,loading:Je.value},{default:u(()=>[...a[61]||(a[61]=[_("确认发放",-1)])]),_:1},8,["loading"])]),default:u(()=>[r(ba,{model:Le,"label-width":"100px"},{default:u(()=>[r(N,{label:"钱包地址"},{default:u(()=>[r(I,{modelValue:Le.wallet_address,"onUpdate:modelValue":a[12]||(a[12]=e=>Le.wallet_address=e),disabled:""},null,8,["modelValue"])]),_:1}),r(N,{label:"发放金额",required:""},{default:u(()=>[r(ja,{modelValue:Le.amount,"onUpdate:modelValue":a[13]||(a[13]=e=>Le.amount=e),min:.01,max:1e5,precision:4,step:10,style:{width:"200px"}},null,8,["modelValue"]),a[59]||(a[59]=i("span",{class:"unit"},"USDT",-1))]),_:1}),"dividend"===Ae.value?(d(),y(N,{key:0,label:"经纪人等级"},{default:u(()=>[r(Ie,{modelValue:Le.broker_level,"onUpdate:modelValue":a[14]||(a[14]=e=>Le.broker_level=e)},{default:u(()=>[(d(),s(m,null,f(5,e=>r(M,{key:e,label:`${e}级`,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})):b("",!0),r(N,{label:"发放原因"},{default:u(()=>[r(I,{modelValue:Le.reason,"onUpdate:modelValue":a[15]||(a[15]=e=>Le.reason=e),type:"textarea",rows:2,placeholder:"请输入发放原因..."},null,8,["modelValue"])]),_:1}),r(qa,{type:"info",closable:!1,style:{"margin-top":"10px"}},{default:u(()=>[_(" 该金额将直接添加到用户USDT余额，并记录到"+g("referral"===Ae.value?"推荐奖励":"团队分红")+"历史 ",1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),r(Fa,{modelValue:Ge.value,"onUpdate:modelValue":a[23]||(a[23]=e=>Ge.value=e),title:ea.value,width:"550px","close-on-click-modal":!1},{footer:u(()=>[r(ga,{onClick:a[22]||(a[22]=e=>Ge.value=!1)},{default:u(()=>[...a[66]||(a[66]=[_("取消",-1)])]),_:1}),r(ga,{type:"primary",onClick:ca,loading:He.value,disabled:!Qe.reason},{default:u(()=>[...a[67]||(a[67]=[_(" 确认调整 ",-1)])]),_:1},8,["loading","disabled"])]),default:u(()=>[r(ba,{model:Qe,"label-width":"100px"},{default:u(()=>[r(N,{label:"钱包地址"},{default:u(()=>[r(I,{modelValue:Qe.wallet_address,"onUpdate:modelValue":a[18]||(a[18]=e=>Qe.wallet_address=e),disabled:""},null,8,["modelValue"])]),_:1}),r(N,{label:"当前数值"},{default:u(()=>[r(ha,{type:"info",size:"large"},{default:u(()=>[_(g(wa(Qe.current_value))+" USDT",1)]),_:1})]),_:1}),r(N,{label:"操作类型",required:""},{default:u(()=>[r(Na,{modelValue:Qe.operation_type,"onUpdate:modelValue":a[19]||(a[19]=e=>Qe.operation_type=e)},{default:u(()=>[r(Ia,{value:"set"},{default:u(()=>[r(l,null,{default:u(()=>[r(c($))]),_:1}),a[62]||(a[62]=_(" 直接设置",-1))]),_:1}),r(Ia,{value:"increase"},{default:u(()=>[r(l,null,{default:u(()=>[r(c(j))]),_:1}),a[63]||(a[63]=_(" 增加",-1))]),_:1}),r(Ia,{value:"decrease"},{default:u(()=>[r(l,null,{default:u(()=>[r(c(q))]),_:1}),a[64]||(a[64]=_(" 减少",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(N,{label:"set"===Qe.operation_type?"新数值":"调整金额",required:""},{default:u(()=>[r(ja,{modelValue:Qe.amount,"onUpdate:modelValue":a[20]||(a[20]=e=>Qe.amount=e),min:0,max:1e8,precision:4,step:100,style:{width:"200px"}},null,8,["modelValue"]),a[65]||(a[65]=i("span",{class:"unit"},"USDT",-1))]),_:1},8,["label"]),r(N,{label:"调整后数值"},{default:u(()=>[r(ha,{type:ta.value,size:"large"},{default:u(()=>[_(g(la.value)+" USDT",1)]),_:1},8,["type"])]),_:1}),r(N,{label:"调整原因",required:""},{default:u(()=>[r(I,{modelValue:Qe.reason,"onUpdate:modelValue":a[21]||(a[21]=e=>Qe.reason=e),type:"textarea",rows:3,placeholder:"请输入调整原因（必填）...",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1}),r(qa,{type:"warning",closable:!1,style:{"margin-top":"10px"}},{default:u(()=>[_(" 注意：此操作将直接修改"+g(aa.value)+"的统计数值，请谨慎操作 ",1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),r(Fa,{modelValue:Oe.value,"onUpdate:modelValue":a[28]||(a[28]=e=>Oe.value=e),title:"调整经纪人等级",width:"450px"},{footer:u(()=>[r(ga,{onClick:a[27]||(a[27]=e=>Oe.value=!1)},{default:u(()=>[...a[68]||(a[68]=[_("取消",-1)])]),_:1}),r(ga,{type:"primary",onClick:va,loading:Ye.value},{default:u(()=>[...a[69]||(a[69]=[_("确认调整",-1)])]),_:1},8,["loading"])]),default:u(()=>[r(ba,{model:Ee,"label-width":"100px"},{default:u(()=>[r(N,{label:"钱包地址"},{default:u(()=>[r(I,{modelValue:Ee.wallet_address,"onUpdate:modelValue":a[24]||(a[24]=e=>Ee.wallet_address=e),disabled:""},null,8,["modelValue"])]),_:1}),r(N,{label:"当前等级"},{default:u(()=>[r(ha,{type:ya(Ee.old_level),effect:"dark"},{default:u(()=>[_(g(Ee.old_level?`${Ee.old_level}级`:"普通用户"),1)]),_:1},8,["type"])]),_:1}),r(N,{label:"新等级",required:""},{default:u(()=>[r(Ie,{modelValue:Ee.new_level,"onUpdate:modelValue":a[25]||(a[25]=e=>Ee.new_level=e),style:{width:"150px"}},{default:u(()=>[r(M,{label:"普通用户",value:0}),(d(),s(m,null,f(5,e=>r(M,{key:e,label:`${e}级经纪人`,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),r(N,{label:"调整原因"},{default:u(()=>[r(I,{modelValue:Ee.reason,"onUpdate:modelValue":a[26]||(a[26]=e=>Ee.reason=e),type:"textarea",rows:2,placeholder:"请输入调整原因..."},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),r(Fa,{modelValue:Re.value,"onUpdate:modelValue":a[33]||(a[33]=e=>Re.value=e),title:"批量发放奖励",width:"700px"},{footer:u(()=>[r(ga,{onClick:a[32]||(a[32]=e=>Re.value=!1)},{default:u(()=>[...a[72]||(a[72]=[_("取消",-1)])]),_:1}),r(ga,{type:"primary",onClick:ma,loading:We.value,disabled:0===sa.value.length},{default:u(()=>[_(" 确认发放 ("+g(sa.value.length)+" 条) ",1)]),_:1},8,["loading","disabled"])]),default:u(()=>[r(ba,{model:Xe,"label-width":"100px"},{default:u(()=>[r(N,{label:"奖励类型",required:""},{default:u(()=>[r(Na,{modelValue:Xe.award_type,"onUpdate:modelValue":a[29]||(a[29]=e=>Xe.award_type=e)},{default:u(()=>[r(Ia,{value:"referral"},{default:u(()=>[...a[70]||(a[70]=[_("推荐奖励",-1)])]),_:1}),r(Ia,{value:"dividend"},{default:u(()=>[...a[71]||(a[71]=[_("团队分红",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(N,{label:"发放列表",required:""},{default:u(()=>[r(I,{modelValue:Xe.rawInput,"onUpdate:modelValue":a[30]||(a[30]=e=>Xe.rawInput=e),type:"textarea",rows:8,placeholder:"每行一条记录，格式：钱包地址,金额\n例如：\n0x1234...abcd,100\n0x5678...efgh,50"},null,8,["modelValue"])]),_:1}),r(N,{label:"发放原因"},{default:u(()=>[r(I,{modelValue:Xe.reason,"onUpdate:modelValue":a[31]||(a[31]=e=>Xe.reason=e),placeholder:"批量发放原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),sa.value.length>0?(d(),s("div",Ue,[i("h4",null,"预览 ("+g(sa.value.length)+" 条记录，总金额: "+g(da.value)+" USDT)",1),r(xa,{data:sa.value.slice(0,10),size:"small",border:""},{default:u(()=>[r(ka,{prop:"wallet_address",label:"钱包地址"},{default:u(({row:e})=>[_(g(fa(e.wallet_address)),1)]),_:1}),r(ka,{prop:"amount",label:"金额",width:"100"})]),_:1},8,["data"]),sa.value.length>10?(d(),s("p",Ce,"... 还有 "+g(sa.value.length-10)+" 条",1)):b("",!0)])):b("",!0)]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-3e4f10c1"]]);export{Se as default};
