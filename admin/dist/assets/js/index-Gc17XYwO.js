const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Login-BIrZ3j49.js","assets/js/vue-vendor-CCmsYA1Y.js","assets/js/index-CQDoFXMh.js","assets/js/vendor-BQF3adi-.js","assets/js/element-plus-BZcENYie.js","assets/css/element-plus-BUj0F5mt.css","assets/js/Background3D-DtR_bR0p.js","assets/js/three-zurYmXlw.js","assets/js/_plugin-vue_export-helper-BCo6x5W8.js","assets/css/Background3D-DAPlmz6q.css","assets/css/Login-oHS2Rnk2.css","assets/js/Layout-CVaB3sii.js","assets/js/eventBus-DOIgU4mI.js","assets/js/speechService-8EkrYECO.js","assets/css/Layout-BUBB_L9G.css","assets/js/Dashboard-CsGB5KwS.js","assets/js/echarts-Cx_KeeaR.js","assets/css/Dashboard-CK0pIcSD.css","assets/js/Users-LuAwdXIG.js","assets/css/Users-jbR0wuGV.css","assets/js/Deposits-COsAacNH.js","assets/css/Deposits-wAStOrYL.css","assets/js/Withdrawals-Br96Kkyb.js","assets/css/Withdrawals-CLKd7JHA.css","assets/js/Transactions-BjbSYkgg.js","assets/css/Transactions-DiGQZNDO.css","assets/js/RobotsActive-DwK6fQlA.js","assets/js/useIsMobile-3711GOdT.js","assets/css/RobotsActive-DDF5YYjH.css","assets/js/RobotsExpired-Edrc4LIZ.js","assets/css/RobotsExpired--In3ffJ3.css","assets/js/QuantifyLogs-pwt_zGxt.js","assets/css/QuantifyLogs-CSiG8nZm.css","assets/js/Pledges-BloUulRE.js","assets/css/Pledges-DuFLRWoK.css","assets/js/Follows-CTFlHmi9.js","assets/css/Follows-MCzSZh5r.css","assets/js/Referrals-B_lBw_MV.js","assets/css/Referrals-IhAvt6I8.css","assets/js/InviteStats-DCveFypk.js","assets/css/InviteStats-uQ70AqLK.css","assets/js/TeamDividend-CYN5KomI.js","assets/css/TeamDividend-0y4ENGDK.css","assets/js/TeamManagement-CyPkbfXQ.js","assets/css/TeamManagement-CauDCg7C.css","assets/js/LuckyWheel-BL4VCJf5.js","assets/css/LuckyWheel-BUkm9gJK.css","assets/js/Announcements-C-AS0rwn.js","assets/css/Announcements-KS5Vej7Q.css","assets/js/Documents-C2qpk0h1.js","assets/css/Documents-CJDs90St.css","assets/js/DataCleanup-DXBvYy4m.js","assets/css/DataCleanup-BRy2-x1q.css","assets/js/Settings-VHM1DUzO.js","assets/css/Settings-BQatLTtN.css","assets/js/Logs-DIz5SmTm.js","assets/css/Logs-CuaiogxW.css","assets/js/ErrorLogs-6PovT4hC.js","assets/css/ErrorLogs-Cb6oTFvB.css","assets/js/IPBlacklist-CRKTsTn9.js","assets/css/IPBlacklist-D7_LyQq0.css","assets/js/Maintenance-vw6TDLz7.js","assets/css/Maintenance-DpBgKdCp.css","assets/js/FakeAccounts-C8ygbO40.js","assets/css/FakeAccounts-CeXLc_NW.css"])))=>i.map(i=>d[i]);
import{m as e,ay as t,o as n,aT as o,aU as a,aV as r,r as s,c as i,aQ as c,aW as l}from"./vue-vendor-CCmsYA1Y.js";import{E as m,a as d,i as u,z as p}from"./element-plus-BZcENYie.js";import{c8 as _}from"./vendor-BQF3adi-.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const g={__name:"App",setup:o=>(o,a)=>{const r=t("router-view");return n(),e(r)}},h={},f=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));o=Promise.allSettled(t.map(e=>{if((e=function(e){return"/admin/"+e}(e))in h)return;h[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},v=[{path:"/login",name:"Login",component:()=>f(()=>import("./Login-BIrZ3j49.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])),meta:{title:"登录"}},{path:"/",name:"Layout",component:()=>f(()=>import("./Layout-CVaB3sii.js"),__vite__mapDeps([11,1,6,7,8,9,4,3,5,2,12,13,14])),redirect:"/dashboard",children:[{path:"dashboard",name:"Dashboard",component:()=>f(()=>import("./Dashboard-CsGB5KwS.js"),__vite__mapDeps([15,4,1,3,5,16,2,8,17])),meta:{title:"仪表盘",icon:"Odometer"}},{path:"users",name:"Users",component:()=>f(()=>import("./Users-LuAwdXIG.js"),__vite__mapDeps([18,1,4,3,5,2,8,19])),meta:{title:"用户管理",icon:"User"}},{path:"deposits",name:"Deposits",component:()=>f(()=>import("./Deposits-COsAacNH.js"),__vite__mapDeps([20,1,4,3,5,2,12,8,21])),meta:{title:"充值记录",icon:"Download"}},{path:"withdrawals",name:"Withdrawals",component:()=>f(()=>import("./Withdrawals-Br96Kkyb.js"),__vite__mapDeps([22,1,4,3,5,12,2,8,23])),meta:{title:"提款记录",icon:"Upload"}},{path:"transactions",name:"Transactions",component:()=>f(()=>import("./Transactions-BjbSYkgg.js"),__vite__mapDeps([24,1,4,3,5,2,8,25])),meta:{title:"交易记录",icon:"List"}},{path:"robots-active",name:"RobotsActive",component:()=>f(()=>import("./RobotsActive-DwK6fQlA.js"),__vite__mapDeps([26,1,4,3,5,2,27,8,28])),meta:{title:"运行中机器人",icon:"VideoPlay"}},{path:"robots-expired",name:"RobotsExpired",component:()=>f(()=>import("./RobotsExpired-Edrc4LIZ.js"),__vite__mapDeps([29,1,4,3,5,2,27,8,30])),meta:{title:"过期机器人",icon:"Timer"}},{path:"quantify-logs",name:"QuantifyLogs",component:()=>f(()=>import("./QuantifyLogs-pwt_zGxt.js"),__vite__mapDeps([31,8,1,32])),meta:{title:"量化日志",icon:"DocumentCopy"}},{path:"pledges",name:"Pledges",component:()=>f(()=>import("./Pledges-BloUulRE.js"),__vite__mapDeps([33,1,4,3,5,2,8,34])),meta:{title:"质押管理",icon:"Coin"}},{path:"follows",name:"Follows",component:()=>f(()=>import("./Follows-CTFlHmi9.js"),__vite__mapDeps([35,1,4,3,5,2,8,36])),meta:{title:"跟单管理",icon:"TrendCharts"}},{path:"referrals",name:"Referrals",component:()=>f(()=>import("./Referrals-B_lBw_MV.js"),__vite__mapDeps([37,1,4,3,5,2,8,38])),meta:{title:"推广管理",icon:"Share"}},{path:"invite-stats",name:"InviteStats",component:()=>f(()=>import("./InviteStats-DCveFypk.js"),__vite__mapDeps([39,1,4,3,5,2,8,40])),meta:{title:"推荐数据",icon:"DataLine"}},{path:"team-dividend",name:"TeamDividend",component:()=>f(()=>import("./TeamDividend-CYN5KomI.js"),__vite__mapDeps([41,4,1,3,5,2,8,42])),meta:{title:"团队分红",icon:"Coin"}},{path:"team-management",name:"TeamManagement",component:()=>f(()=>import("./TeamManagement-CyPkbfXQ.js"),__vite__mapDeps([43,1,4,3,5,2,8,44])),meta:{title:"团队推荐管理",icon:"UserFilled"}},{path:"lucky-wheel",name:"LuckyWheel",component:()=>f(()=>import("./LuckyWheel-BL4VCJf5.js"),__vite__mapDeps([45,4,1,3,5,2,8,46])),meta:{title:"抽奖管理",icon:"Present"}},{path:"announcements",name:"Announcements",component:()=>f(()=>import("./Announcements-C-AS0rwn.js"),__vite__mapDeps([47,4,1,3,5,2,8,48])),meta:{title:"公告管理",icon:"Bell"}},{path:"documents",name:"Documents",component:()=>f(()=>import("./Documents-C2qpk0h1.js"),__vite__mapDeps([49,4,1,3,5,2,8,50])),meta:{title:"资质文件",icon:"Document"}},{path:"data-cleanup",name:"DataCleanup",component:()=>f(()=>import("./DataCleanup-DXBvYy4m.js"),__vite__mapDeps([51,1,4,3,5,2,8,52])),meta:{title:"数据清理",icon:"Delete"}},{path:"settings",name:"Settings",component:()=>f(()=>import("./Settings-VHM1DUzO.js"),__vite__mapDeps([53,1,4,3,5,2,13,8,54])),meta:{title:"系统设置",icon:"Setting"}},{path:"logs",name:"Logs",component:()=>f(()=>import("./Logs-DIz5SmTm.js"),__vite__mapDeps([55,1,4,3,5,2,8,56])),meta:{title:"系统日志",icon:"Document"}},{path:"error-logs",name:"ErrorLogs",component:()=>f(()=>import("./ErrorLogs-6PovT4hC.js"),__vite__mapDeps([57,1,4,3,5,2,8,58])),meta:{title:"错误日志",icon:"Warning"}},{path:"ip-blacklist",name:"IPBlacklist",component:()=>f(()=>import("./IPBlacklist-CRKTsTn9.js"),__vite__mapDeps([59,1,4,3,5,2,8,60])),meta:{title:"IP封禁管理",icon:"Lock"}},{path:"maintenance",name:"Maintenance",component:()=>f(()=>import("./Maintenance-vw6TDLz7.js"),__vite__mapDeps([61,4,1,3,5,2,8,62])),meta:{title:"维护公告",icon:"Warning"}},{path:"fake-accounts",name:"FakeAccounts",component:()=>f(()=>import("./FakeAccounts-C8ygbO40.js"),__vite__mapDeps([63,4,1,3,5,2,8,64])),meta:{title:"虚假账户",icon:"UserFilled"}}]}],E=o({history:a("/admin/"),routes:v});E.beforeEach((e,t,n)=>{document.title=e.meta.title?`${e.meta.title} - VituFinance 管理系统`:"VituFinance 管理系统";const o=localStorage.getItem("admin_token");"/login"===e.path||o?"/login"===e.path&&o?n("/dashboard"):n():n("/login")});const w=()=>{const e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")&&!e.includes("chromium")},y=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,L=()=>y()||navigator.platform.toLowerCase().includes("mac"),T=()=>{var e;return!(!w()&&!y())||(!!(navigator.deviceMemory&&navigator.deviceMemory<4)||(!!(navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4)||!!(null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-reduced-motion: reduce)").matches)))},I=()=>{return!w()&&!y()&&(!T()&&!(null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-reduced-motion: reduce)").matches));var e},D=e=>T()?Math.floor(.3*e):e,k=()=>{const e=window.devicePixelRatio||1;return w()||y()?Math.min(e,1.5):Math.min(e,2)},P="debug",A="info",S="warn",O="error",b="critical",j="vue",R="api",V="auth",$="system",C=200,M="vitu_admin_error_logs",N="/api/admin/log/error",U=A,x={[P]:0,[A]:1,[S]:2,[O]:3,[b]:4},F={[P]:"info",[A]:"info",[S]:"warning",[O]:"error",[b]:"error"};function W(){try{const t=localStorage.getItem("admin_token"),n=localStorage.getItem("admin_info");let o=null;try{o=n?JSON.parse(n):null}catch(e){}return{adminId:(null==o?void 0:o.id)||null,adminUsername:(null==o?void 0:o.username)||null,isLoggedIn:!!t,url:window.location.href,userAgent:navigator.userAgent.substring(0,200),timestamp:(new Date).toISOString(),screenSize:`${window.screen.width}x${window.screen.height}`}}catch(e){return{error:"Failed to get admin context"}}}function q(){try{const e=localStorage.getItem(M);return e?JSON.parse(e):[]}catch(e){return[]}}function J(e){try{const t=e.slice(-C);localStorage.setItem(M,JSON.stringify(t))}catch(t){}}async function B(e){try{const t=localStorage.getItem("admin_token");if(!(await fetch(N,{method:"POST",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},body:JSON.stringify({...e,clientType:"admin"})})).ok){const t=q();t.push({...e,pendingSync:!0}),J(t)}}catch(t){const n=q();n.push({...e,pendingSync:!0}),J(n)}}function z({level:e=O,source:t=$,message:n,stack:o=null,metadata:a=null,componentName:r=null,showNotify:s=!0}){if(x[e]<x[U])return;const i={id:`admin_err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,level:e,source:t,message:n,stack:o,metadata:a,componentName:r,context:W(),createdAt:(new Date).toISOString()};(e===b||e===O?console.error:e===S?console.warn:console.log)(`[ADMIN] [${t.toUpperCase()}] [${e.toUpperCase()}] ${n}`,{stack:o,metadata:a,context:i.context});const c=q();return c.push(i),J(c),B(i),s&&function(e){x[e.level]<x[S]||m({title:`${e.source.toUpperCase()} ${e.level.toUpperCase()}`,message:e.message.substring(0,200),type:F[e.level]||"error",duration:e.level===b?0:5e3,position:"top-right"})}(i),i}function Q({url:e,method:t,status:n,statusText:o,responseData:a,requestData:r}){var s;const i=401===n||403===n;return z({level:i?S:n>=500?O:S,source:i?V:R,message:`API Error: ${t} ${e} - ${n} ${o}`,metadata:{url:e,method:t,status:n,statusText:o,responseData:"object"==typeof a?JSON.stringify(a).substring(0,1e3):null==(s=null==a?void 0:a.substring)?void 0:s.call(a,0,1e3),requestData:r?JSON.stringify({...r,password:void 0,token:void 0}).substring(0,500):null},showNotify:n>=500})}function H({action:e,errorMessage:t,statusCode:n}){return z({level:S,source:V,message:`Auth Error: ${e} - ${t}`,metadata:{action:e,statusCode:n}})}const K=r("theme",()=>{const e=s(localStorage.getItem("admin_theme")||"dark"),t=s("true"===localStorage.getItem("sidebar_collapsed")),n=()=>{const t=document.documentElement;"dark"===e.value?t.classList.add("dark"):t.classList.remove("dark"),localStorage.setItem("admin_theme",e.value)};return{theme:e,sidebarCollapsed:t,toggleTheme:()=>{e.value="light"===e.value?"dark":"light",n()},setTheme:t=>{e.value=t,n()},applyTheme:n,toggleSidebar:()=>{t.value=!t.value,localStorage.setItem("sidebar_collapsed",t.value)},initTheme:()=>{if(!localStorage.getItem("admin_theme")){window.matchMedia("(prefers-color-scheme: dark)").matches;e.value="dark"}n()}}}),X=r("csrf",()=>{const e=s(""),t=s(!1),n=s(null),o=i(()=>!!e.value);return{csrfToken:e,loading:t,error:n,hasToken:o,fetchCsrfToken:async function(){if(!t.value){t.value=!0,n.value=null;try{const t=await _.get("/api/csrf-token");t.data.success&&(e.value=t.data.csrfToken)}catch(o){n.value=o.message}finally{t.value=!1}}},setToken:function(t){e.value=t},clearToken:function(){e.value=""},getHeaders:function(){return e.value?{"X-CSRF-Token":e.value}:{}}}});(()=>{var e;const t=document.documentElement;t.classList.remove("is-safari","is-ios","is-apple","is-low-perf","reduce-motion"),w()&&t.classList.add("is-safari"),y()&&t.classList.add("is-ios"),L()&&t.classList.add("is-apple"),T()&&t.classList.add("is-low-perf"),(null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-reduced-motion: reduce)").matches)&&t.classList.add("reduce-motion")})();const G=c(g),Y=l();window.addEventListener("error",e=>{var t;z({level:O,source:$,message:`Uncaught Error: ${e.message}`,stack:null==(t=e.error)?void 0:t.stack,metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener("unhandledrejection",e=>{const t=e.reason;z({level:O,source:$,message:`Unhandled Promise Rejection: ${(null==t?void 0:t.message)||t}`,stack:null==t?void 0:t.stack,metadata:{reason:String(t)}})});for(const[Z,ee]of Object.entries(d))G.component(Z,ee);G.use(Y),G.use(E),G.use(u,{locale:p,size:"default"}),G.use({install(e){e.config.errorHandler=(e,t,n)=>{!function(e,t,n){var o,a,r;const s=(null==(o=null==t?void 0:t.$options)?void 0:o.name)||(null==(a=null==t?void 0:t.$options)?void 0:a.__name)||"Unknown";z({level:O,source:j,message:`Vue Error in ${s}: ${e.message}`,stack:e.stack,componentName:s,metadata:{vueInfo:n,props:(null==t?void 0:t.$props)?Object.keys(t.$props):[],route:null==(r=null==t?void 0:t.$route)?void 0:r.path}})}(e,t,n)}}});K().initTheme();X().fetchCsrfToken().then(()=>{}).catch(e=>{}),G.mount("#app"),window.addEventListener("online",()=>{!async function(){const e=q(),t=e.filter(e=>e.pendingSync);if(0!==t.length){for(const e of t)try{await B({...e,pendingSync:void 0}),e.pendingSync=!1}catch(n){}J(e)}}()});export{k as a,H as b,D as g,T as i,Q as l,I as s,K as u};
