import{b as e,B as a,k as l,X as t,a3 as s,af as n,y as d,Q as o,M as i,N as c}from"./element-plus-BZcENYie.js";import{r}from"./index-DcuAk0vn.js";import{bC as u}from"./vendor-BQF3adi-.js";import{_ as m}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{r as g,_ as p,c as h,v,x as f,A as _,o as y,D as P,B as w,M as b,C as V,ay as k,u as x,K as M,O as S,P as U,ac as z,m as B}from"./vue-vendor-CCmsYA1Y.js";import"./index-BxKU4Ero.js";const C={class:"maintenance-page"},T={class:"page-header"},j={class:"page-title"},D={class:"card-header"},E={class:"header-title"},Y={class:"status-content"},H={class:"toggle-section"},I={key:0,class:"time-info"},A={class:"card-header"},F={class:"header-title"},K={class:"card-header"},N={class:"header-title"},O={class:"lang-title"},Q={class:"lang-flag"},W={class:"lang-name"},X={class:"translation-form"},Z={class:"card-header"},q={class:"header-title"},G={class:"preview-container"},J={class:"preview-modal"},L={class:"preview-icon"},R={class:"preview-title"},$={class:"preview-message"},ee={class:"preview-timer"},ae=m({__name:"Maintenance",setup(m){const ae=g(!1),le=g(!1),te=g(!1),se=g(""),ne=g(!1),de=g([]),oe=g(!1),ie=g("en"),ce=g({is_enabled:!1,title:"",message:"",estimated_duration:120,start_time:null,end_time:null,updated_by:"",translations:[]}),re=p({title:"System Maintenance",message:"The system is currently under maintenance. Please try again in 2 hours.",estimated_duration:120}),ue=[{code:"en",name:"English",flag:"ðŸ‡ºðŸ‡¸",titlePlaceholder:"System Maintenance",messagePlaceholder:"The system is under maintenance..."},{code:"zh-tw",name:"ç¹é«”ä¸­æ–‡",flag:"ðŸ‡¹ðŸ‡¼",titlePlaceholder:"ç³»çµ±ç¶­è­·ä¸­",messagePlaceholder:"ç³»çµ±æ­£åœ¨ç¶­è­·ä¸­..."},{code:"ar",name:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",flag:"ðŸ‡¸ðŸ‡¦",titlePlaceholder:"ØµÙŠØ§Ù†Ø© Ø§Ù„Ù†Ø¸Ø§Ù…",messagePlaceholder:"Ø§Ù„Ù†Ø¸Ø§Ù… Ù‚ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©..."},{code:"de",name:"Deutsch",flag:"ðŸ‡©ðŸ‡ª",titlePlaceholder:"Systemwartung",messagePlaceholder:"Das System ist in Wartung..."},{code:"es",name:"EspaÃ±ol",flag:"ðŸ‡ªðŸ‡¸",titlePlaceholder:"Mantenimiento",messagePlaceholder:"Sistema en mantenimiento..."},{code:"fr",name:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·",titlePlaceholder:"Maintenance",messagePlaceholder:"SystÃ¨me en maintenance..."},{code:"id",name:"Bahasa Indonesia",flag:"ðŸ‡®ðŸ‡©",titlePlaceholder:"Pemeliharaan",messagePlaceholder:"Sistem sedang dipelihara..."},{code:"ms",name:"Bahasa Melayu",flag:"ðŸ‡²ðŸ‡¾",titlePlaceholder:"Penyelenggaraan",messagePlaceholder:"Sistem dalam penyelenggaraan..."},{code:"pt",name:"PortuguÃªs",flag:"ðŸ‡§ðŸ‡·",titlePlaceholder:"ManutenÃ§Ã£o",messagePlaceholder:"Sistema em manutenÃ§Ã£o..."},{code:"tr",name:"TÃ¼rkÃ§e",flag:"ðŸ‡¹ðŸ‡·",titlePlaceholder:"BakÄ±m",messagePlaceholder:"Sistem bakÄ±mda..."},{code:"uk",name:"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°",flag:"ðŸ‡ºðŸ‡¦",titlePlaceholder:"ÐžÐ±ÑÐ»ÑƒÐ³Ð¾Ð²ÑƒÐ²Ð°Ð½Ð½Ñ",messagePlaceholder:"Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð½Ð° Ð¾Ð±ÑÐ»ÑƒÐ³Ð¾Ð²ÑƒÐ²Ð°Ð½Ð½Ñ–..."},{code:"vi",name:"Tiáº¿ng Viá»‡t",flag:"ðŸ‡»ðŸ‡³",titlePlaceholder:"Báº£o trÃ¬",messagePlaceholder:"Há»‡ thá»‘ng Ä‘ang báº£o trÃ¬..."},{code:"zu",name:"isiZulu",flag:"ðŸ‡¿ðŸ‡¦",titlePlaceholder:"Ukulungiswa",messagePlaceholder:"Isistimu ikhona kulungiswa..."}],me=p({});ue.forEach(e=>{me[e.code]={title:"",message:""}});const ge=h(()=>{const e=me[ie.value];return(null==e?void 0:e.title)||re.title||"System Maintenance"}),pe=h(()=>{const e=me[ie.value];return(null==e?void 0:e.message)||re.message||"The system is under maintenance."}),he=e=>e?u(e).format("YYYY-MM-DD HH:mm:ss"):"-",ve=e=>{const a=me[e];return a&&a.title&&a.message},fe=async()=>{ae.value=!0;try{const e=await r.get("/maintenance");e.success&&e.data&&(ce.value=e.data,ne.value=e.data.is_enabled,re.title=e.data.title||"System Maintenance",re.message=e.data.message||"",re.estimated_duration=e.data.estimated_duration||120,e.data.translations&&e.data.translations.forEach(e=>{me[e.language_code]&&(me[e.language_code].title=e.title,me[e.language_code].message=e.message)}))}catch(a){e.error("ç²å–ç¶­è­·è¨­ç½®å¤±æ•—")}finally{ae.value=!1}},_e=async a=>{try{await c.confirm(a?"ç¢ºå®šè¦å•Ÿç”¨ç¶­è­·æ¨¡å¼å—Žï¼Ÿå•Ÿç”¨å¾Œå‰ç«¯ç”¨æˆ¶å°‡ç„¡æ³•è¨ªå•ç³»çµ±ã€‚":"ç¢ºå®šè¦é—œé–‰ç¶­è­·æ¨¡å¼å—Žï¼Ÿé—œé–‰å¾Œç”¨æˆ¶å¯ä»¥æ­£å¸¸è¨ªå•ç³»çµ±ã€‚",a?"å•Ÿç”¨ç¶­è­·æ¨¡å¼":"é—œé–‰ç¶­è­·æ¨¡å¼",{confirmButtonText:"ç¢ºå®š",cancelButtonText:"å–æ¶ˆ",type:a?"warning":"info"}),le.value=!0;const l=await r.post("/maintenance/toggle");l.success?(e.success(a?"ç¶­è­·æ¨¡å¼å·²å•Ÿç”¨":"ç¶­è­·æ¨¡å¼å·²é—œé–‰"),await fe()):(ne.value=!a,e.error(l.message||"æ“ä½œå¤±æ•—"))}catch(l){"cancel"!==l&&e.error("æ“ä½œå¤±æ•—"),ne.value=!a}finally{le.value=!1}},ye=async()=>{te.value=!0;try{const a=ue.map(e=>({language_code:e.code,title:me[e.code].title,message:me[e.code].message})).filter(e=>e.title&&e.message),l=await r.put("/maintenance",{is_enabled:ne.value,title:re.title,message:re.message,estimated_duration:re.estimated_duration,translations:a});l.success?(e.success("è¨­ç½®å·²ä¿å­˜"),await fe()):e.error(l.message||"ä¿å­˜å¤±æ•—")}catch(a){e.error("ä¿å­˜å¤±æ•—")}finally{te.value=!1}};return v(oe,e=>{de.value=e?ue.map(e=>e.code):[]}),f(()=>{fe()}),(c,u)=>{const m=k("el-icon"),g=k("el-tag"),p=k("el-switch"),h=k("el-divider"),v=k("el-descriptions-item"),f=k("el-descriptions"),ae=k("el-card"),fe=k("el-input-number"),Pe=k("el-form-item"),we=k("el-input"),be=k("el-button"),Ve=k("el-form"),ke=k("el-collapse-item"),xe=k("el-collapse"),Me=k("el-option"),Se=k("el-select");return y(),_("div",C,[P("div",T,[P("h2",j,[w(m,null,{default:V(()=>[w(x(a))]),_:1}),u[7]||(u[7]=b(" ç¶­è­·å…¬å‘Šç®¡ç† ",-1))]),u[8]||(u[8]=P("p",{class:"page-desc"},"ç®¡ç†ç³»çµ±ç¶­è­·æ¨¡å¼ï¼Œå•Ÿç”¨å¾Œå‰ç«¯ç”¨æˆ¶å°‡ç„¡æ³•è¨ªå•ç³»çµ±",-1))]),w(ae,{class:"status-card",shadow:"hover"},{header:V(()=>[P("div",D,[P("span",E,[w(m,null,{default:V(()=>[w(x(l))]),_:1}),u[9]||(u[9]=b(" ç¶­è­·ç‹€æ…‹ ",-1))]),w(g,{type:ne.value?"danger":"success",size:"large"},{default:V(()=>[b(S(ne.value?"ç¶­è­·ä¸­":"æ­£å¸¸é‹è¡Œ"),1)]),_:1},8,["type"])])]),default:V(()=>[P("div",Y,[P("div",H,[u[10]||(u[10]=P("div",{class:"toggle-info"},[P("h4",null,"ç³»çµ±ç¶­è­·æ¨¡å¼"),P("p",null,"å•Ÿç”¨å¾Œï¼Œå‰ç«¯ç”¨æˆ¶å°‡çœ‹åˆ°ç¶­è­·å…¬å‘Šï¼Œç„¡æ³•è¨ªå•ä»»ä½•é é¢")],-1)),w(p,{modelValue:ne.value,"onUpdate:modelValue":u[0]||(u[0]=e=>ne.value=e),loading:le.value,size:"large","active-text":"å•Ÿç”¨","inactive-text":"é—œé–‰",onChange:_e},null,8,["modelValue","loading"])]),w(h),ce.value.start_time?(y(),_("div",I,[w(f,{column:2,border:""},{default:V(()=>[w(v,{label:"é–‹å§‹æ™‚é–“"},{default:V(()=>[b(S(he(ce.value.start_time)),1)]),_:1}),w(v,{label:"é è¨ˆçµæŸæ™‚é–“"},{default:V(()=>[b(S(he(ce.value.end_time)),1)]),_:1}),w(v,{label:"æœ€å¾Œæ›´æ–°äºº"},{default:V(()=>[b(S(ce.value.updated_by||"-"),1)]),_:1}),w(v,{label:"é è¨ˆæ™‚é•·"},{default:V(()=>[b(S(ce.value.estimated_duration)+" åˆ†é˜ ",1)]),_:1})]),_:1})])):M("",!0)])]),_:1}),w(ae,{class:"settings-card",shadow:"hover"},{header:V(()=>[P("div",A,[P("span",F,[w(m,null,{default:V(()=>[w(x(s))]),_:1}),u[11]||(u[11]=b(" ç¶­è­·å…¬å‘Šè¨­ç½® ",-1))])])]),default:V(()=>[w(Ve,{model:re,"label-position":"top",class:"settings-form"},{default:V(()=>[w(Pe,{label:"é è¨ˆç¶­è­·æ™‚é•·ï¼ˆåˆ†é˜ï¼‰"},{default:V(()=>[w(fe,{modelValue:re.estimated_duration,"onUpdate:modelValue":u[1]||(u[1]=e=>re.estimated_duration=e),min:10,max:1440,step:30},null,8,["modelValue"])]),_:1}),w(Pe,{label:"é»˜èªæ¨™é¡Œï¼ˆè‹±æ–‡ï¼‰"},{default:V(()=>[w(we,{modelValue:re.title,"onUpdate:modelValue":u[2]||(u[2]=e=>re.title=e),placeholder:"System Maintenance"},null,8,["modelValue"])]),_:1}),w(Pe,{label:"é»˜èªå…¬å‘Šå…§å®¹ï¼ˆè‹±æ–‡ï¼‰"},{default:V(()=>[w(we,{modelValue:re.message,"onUpdate:modelValue":u[3]||(u[3]=e=>re.message=e),type:"textarea",rows:3,placeholder:"Enter maintenance message..."},null,8,["modelValue"])]),_:1}),w(be,{type:"primary",onClick:ye,loading:te.value},{default:V(()=>[w(m,null,{default:V(()=>[w(x(t))]),_:1}),u[12]||(u[12]=b(" ä¿å­˜è¨­ç½® ",-1))]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1}),w(ae,{class:"translations-card",shadow:"hover"},{header:V(()=>[P("div",K,[P("span",N,[w(m,null,{default:V(()=>[w(x(n))]),_:1}),u[13]||(u[13]=b(" å¤šèªžè¨€å…¬å‘Šå…§å®¹ ",-1))]),w(be,{type:"primary",text:"",onClick:u[4]||(u[4]=e=>oe.value=!oe.value)},{default:V(()=>[b(S(oe.value?"æ”¶èµ·å…¨éƒ¨":"å±•é–‹å…¨éƒ¨"),1)]),_:1})])]),default:V(()=>[w(xe,{modelValue:de.value,"onUpdate:modelValue":u[5]||(u[5]=e=>de.value=e)},{default:V(()=>[(y(),_(U,null,z(ue,a=>w(ke,{key:a.code,name:a.code},{title:V(()=>[P("div",O,[P("span",Q,S(a.flag),1),P("span",W,S(a.name),1),ve(a.code)?(y(),B(g,{key:0,type:"success",size:"small"},{default:V(()=>[...u[14]||(u[14]=[b(" å·²è¨­ç½® ",-1)])]),_:1})):M("",!0)])]),default:V(()=>[P("div",X,[w(Ve,{"label-position":"top"},{default:V(()=>[w(Pe,{label:"æ¨™é¡Œ"},{default:V(()=>[w(we,{modelValue:me[a.code].title,"onUpdate:modelValue":e=>me[a.code].title=e,placeholder:a.titlePlaceholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),w(Pe,{label:"å…¬å‘Šå…§å®¹"},{default:V(()=>[w(we,{modelValue:me[a.code].message,"onUpdate:modelValue":e=>me[a.code].message=e,type:"textarea",rows:3,placeholder:a.messagePlaceholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024),w(be,{type:"primary",size:"small",onClick:l=>(async a=>{const l=me[a];if(l.title&&l.message){se.value=a;try{const t=await r.put("/maintenance/translations",{language_code:a,title:l.title,message:l.message});t.success?e.success("ç¿»è­¯å·²ä¿å­˜"):e.error(t.message||"ä¿å­˜å¤±æ•—")}catch(t){e.error("ä¿å­˜å¤±æ•—")}finally{se.value=""}}else e.warning("è«‹å¡«å¯«æ¨™é¡Œå’Œå…¬å‘Šå…§å®¹")})(a.code),loading:se.value===a.code},{default:V(()=>[...u[15]||(u[15]=[b(" ä¿å­˜æ­¤èªžè¨€ ",-1)])]),_:1},8,["onClick","loading"])]),_:2},1024)])]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"])]),_:1}),w(ae,{class:"preview-card",shadow:"hover"},{header:V(()=>[P("div",Z,[P("span",q,[w(m,null,{default:V(()=>[w(x(i))]),_:1}),u[16]||(u[16]=b(" é è¦½æ•ˆæžœ ",-1))]),w(Se,{modelValue:ie.value,"onUpdate:modelValue":u[6]||(u[6]=e=>ie.value=e),placeholder:"é¸æ“‡èªžè¨€",style:{width:"150px"}},{default:V(()=>[(y(),_(U,null,z(ue,e=>w(Me,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),default:V(()=>[P("div",G,[P("div",J,[P("div",L,[w(m,{size:60},{default:V(()=>[w(x(d))]),_:1})]),P("h3",R,S(ge.value),1),P("p",$,S(pe.value),1),P("div",ee,[w(m,null,{default:V(()=>[w(x(o))]),_:1}),P("span",null,S(re.estimated_duration)+" min",1)])])])]),_:1})])}}},[["__scopeId","data-v-5ea6b92b"]]);export{ae as default};
