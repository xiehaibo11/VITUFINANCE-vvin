import{r as a,_ as e,x as l,A as t,o as s,D as i,B as d,J as o,M as r,C as u,ay as n,Y as p,aI as c,m as f,u as _,O as v,F as m,K as w,P as g}from"./vue-vendor-CCmsYA1Y.js";import{t as b,u as y,h,Z as z,S as x,I as k,T as C,b as S,N as U}from"./element-plus-BZcENYie.js";import{bC as V}from"./vendor-BQF3adi-.js";import{r as D}from"./index-DcuAk0vn.js";import{_ as T}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-BxKU4Ero.js";const j={class:"page-container"},F={class:"page-header"},I={class:"stat-card"},Y={class:"stat-icon primary"},P={class:"stat-info"},q={class:"stat-value"},M={class:"stat-card"},H={class:"stat-icon success"},O={class:"stat-info"},R={class:"stat-value"},$={class:"stat-card"},A={class:"stat-icon warning"},B={class:"stat-info"},J={class:"stat-value"},K={class:"stat-card"},N={class:"stat-icon info"},Z={class:"stat-info"},E={class:"stat-value"},G={class:"search-area"},L=["onClick"],Q={class:"trader-info"},W={class:"trader-name"},X={class:"amount"},aa={class:"pagination-wrapper"},ea={class:"amount"},la={class:"trade-history",style:{"margin-top":"24px"}},ta=T({__name:"Follows",setup(T){const ta=a(!1),sa=e({totalInvestment:0,activeFollowers:0,totalProfit:0,profitRate:0}),ia=a([]),da=e({wallet_address:"",follow_type:"",status:""}),oa=e({page:1,pageSize:10,total:0}),ra=a(!1),ua=a(null),na=async()=>{ta.value=!0;try{const a=await D.get("/follows",{params:{page:oa.page,pageSize:oa.pageSize,wallet_address:da.wallet_address||void 0,follow_type:da.follow_type||void 0,status:da.status||void 0}});a.success&&(ia.value=a.data.list||[],oa.total=a.data.total||0)}catch(a){ia.value=[],oa.total=0}finally{ta.value=!1}},pa=()=>{oa.page=1,na()},ca=()=>{da.wallet_address="",da.follow_type="",da.status="",oa.page=1,na()},fa=()=>{oa.page=1,na()},_a=()=>{na()},va=a=>{navigator.clipboard.writeText(a),S.success("已复制")},ma=a=>parseFloat(a||0).toFixed(2),wa=a=>V(a).format("YYYY-MM-DD HH:mm"),ga=a=>({grid:"primary",high:"warning",trend:"success"}[a]||"info"),ba=a=>({grid:"网格交易",high:"高频交易",trend:"趋势跟踪"}[a]||a),ya=a=>({active:"进行中",paused:"已暂停",ended:"已结束"}[a]||a);return l(()=>{(async()=>{try{const a=await D.get("/follows/stats");a.success&&a.data&&Object.assign(sa,a.data)}catch(a){}})(),na()}),(a,e)=>{const l=n("el-icon"),V=n("el-col"),D=n("el-row"),T=n("el-input"),na=n("el-form-item"),ha=n("el-option"),za=n("el-select"),xa=n("el-button"),ka=n("el-form"),Ca=n("el-table-column"),Sa=n("el-tag"),Ua=n("el-table"),Va=n("el-pagination"),Da=n("el-descriptions-item"),Ta=n("el-descriptions"),ja=n("el-drawer"),Fa=c("loading");return s(),t("div",j,[i("div",F,[i("h2",null,[d(l,null,{default:u(()=>[d(_(b))]),_:1}),e[7]||(e[7]=r(" 跟单管理 ",-1))]),e[8]||(e[8]=i("p",{class:"description"},"查看和管理用户的跟单交易记录",-1))]),d(D,{gutter:20,class:"stats-row"},{default:u(()=>[d(V,{xs:24,sm:12,md:6},{default:u(()=>[i("div",I,[i("div",Y,[d(l,null,{default:u(()=>[d(_(b))]),_:1})]),i("div",P,[i("div",q,v(ma(sa.totalInvestment)),1),e[9]||(e[9]=i("div",{class:"stat-label"},"跟单总额 (USDT)",-1))])])]),_:1}),d(V,{xs:24,sm:12,md:6},{default:u(()=>[i("div",M,[i("div",H,[d(l,null,{default:u(()=>[d(_(y))]),_:1})]),i("div",O,[i("div",R,v(sa.activeFollowers),1),e[10]||(e[10]=i("div",{class:"stat-label"},"活跃跟单者",-1))])])]),_:1}),d(V,{xs:24,sm:12,md:6},{default:u(()=>[i("div",$,[i("div",A,[d(l,null,{default:u(()=>[d(_(h))]),_:1})]),i("div",B,[i("div",J,v(sa.totalProfit),1),e[11]||(e[11]=i("div",{class:"stat-label"},"累计收益 (USDT)",-1))])])]),_:1}),d(V,{xs:24,sm:12,md:6},{default:u(()=>[i("div",K,[i("div",N,[d(l,null,{default:u(()=>[d(_(z))]),_:1})]),i("div",Z,[i("div",E,v(sa.profitRate)+"%",1),e[12]||(e[12]=i("div",{class:"stat-label"},"平均收益率",-1))])])]),_:1})]),_:1}),i("div",G,[d(ka,{inline:!0,model:da,onSubmit:p(pa,["prevent"])},{default:u(()=>[d(na,{label:"钱包地址"},{default:u(()=>[d(T,{modelValue:da.wallet_address,"onUpdate:modelValue":e[0]||(e[0]=a=>da.wallet_address=a),placeholder:"请输入钱包地址",clearable:"",style:{width:"280px"}},null,8,["modelValue"])]),_:1}),d(na,{label:"跟单类型"},{default:u(()=>[d(za,{modelValue:da.follow_type,"onUpdate:modelValue":e[1]||(e[1]=a=>da.follow_type=a),placeholder:"全部",clearable:"",style:{width:"140px"}},{default:u(()=>[d(ha,{label:"网格交易",value:"grid"}),d(ha,{label:"高频交易",value:"high"}),d(ha,{label:"趋势跟踪",value:"trend"})]),_:1},8,["modelValue"])]),_:1}),d(na,{label:"状态"},{default:u(()=>[d(za,{modelValue:da.status,"onUpdate:modelValue":e[2]||(e[2]=a=>da.status=a),placeholder:"全部",clearable:"",style:{width:"120px"}},{default:u(()=>[d(ha,{label:"进行中",value:"active"}),d(ha,{label:"已暂停",value:"paused"}),d(ha,{label:"已结束",value:"ended"})]),_:1},8,["modelValue"])]),_:1}),d(na,null,{default:u(()=>[d(xa,{type:"primary",onClick:pa},{default:u(()=>[d(l,null,{default:u(()=>[d(_(x))]),_:1}),e[13]||(e[13]=r(" 搜索 ",-1))]),_:1}),d(xa,{onClick:ca},{default:u(()=>[d(l,null,{default:u(()=>[d(_(k))]),_:1}),e[14]||(e[14]=r(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),o((s(),f(Ua,{data:ia.value,stripe:"",border:"",style:{width:"100%"}},{default:u(()=>[d(Ca,{type:"index",label:"序号",width:"60",align:"center"}),d(Ca,{prop:"wallet_address",label:"钱包地址","min-width":"180"},{default:u(({row:a})=>{return[i("div",{class:"wallet-address",onClick:e=>va(a.wallet_address)},[r(v((e=a.wallet_address,e?e.length<=20?e:`${e.slice(0,10)}...${e.slice(-8)}`:""))+" ",1),d(l,null,{default:u(()=>[d(_(C))]),_:1})],8,L)];var e}),_:1}),d(Ca,{prop:"follow_type",label:"跟单类型",width:"120"},{default:u(({row:a})=>[d(Sa,{type:ga(a.follow_type),size:"small"},{default:u(()=>[r(v(ba(a.follow_type)),1)]),_:2},1032,["type"])]),_:1}),d(Ca,{prop:"trader_name",label:"跟随交易员",width:"120"},{default:u(({row:a})=>[i("div",Q,[i("span",W,v(a.trader_name),1)])]),_:1}),d(Ca,{prop:"investment",label:"投入金额",width:"140",align:"right"},{default:u(({row:a})=>[i("span",X,v(ma(a.investment))+" USDT",1)]),_:1}),d(Ca,{prop:"current_value",label:"当前价值",width:"140",align:"right"},{default:u(({row:a})=>[i("span",{class:m(["amount",a.profit>=0?"positive":"negative"])},v(ma(a.current_value))+" USDT ",3)]),_:1}),d(Ca,{prop:"profit",label:"收益",width:"120",align:"right"},{default:u(({row:a})=>[i("span",{class:m(["amount",a.profit>=0?"positive":"negative"])},v(a.profit>=0?"+":"")+v(ma(a.profit)),3)]),_:1}),d(Ca,{prop:"profit_rate",label:"收益率",width:"100",align:"center"},{default:u(({row:a})=>[i("span",{class:m(["rate",a.profit_rate>=0?"positive":"negative"])},v(a.profit_rate>=0?"+":"")+v(a.profit_rate)+"% ",3)]),_:1}),d(Ca,{prop:"status",label:"状态",width:"100",align:"center"},{default:u(({row:a})=>[d(Sa,{type:"active"===a.status?"success":"info",size:"small"},{default:u(()=>[r(v(ya(a.status)),1)]),_:2},1032,["type"])]),_:1}),d(Ca,{prop:"is_quantified",label:"量化",width:"80",align:"center"},{default:u(({row:a})=>[d(Sa,{type:a.is_quantified?"success":"warning",size:"small"},{default:u(()=>[r(v(a.is_quantified?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),d(Ca,{prop:"created_at",label:"开始时间",width:"160"},{default:u(({row:a})=>[r(v(wa(a.created_at)),1)]),_:1}),d(Ca,{label:"操作",width:"180",fixed:"right",align:"center"},{default:u(({row:a})=>[d(xa,{type:"primary",link:"",size:"small",onClick:e=>(a=>{ua.value=a,ra.value=!0})(a)},{default:u(()=>[...e[15]||(e[15]=[r(" 详情 ",-1)])]),_:1},8,["onClick"]),"active"===a.status?(s(),f(xa,{key:0,type:"warning",link:"",size:"small",onClick:e=>(async a=>{try{await U.confirm("确定暂停此跟单吗？","确认暂停",{type:"warning"}),S.success("已暂停"),a.status="paused"}catch{}})(a)},{default:u(()=>[...e[16]||(e[16]=[r(" 暂停 ",-1)])]),_:1},8,["onClick"])):w("",!0),"paused"===a.status?(s(),f(xa,{key:1,type:"success",link:"",size:"small",onClick:e=>(async a=>{try{await U.confirm("确定恢复此跟单吗？","确认恢复",{type:"info"}),S.success("已恢复"),a.status="active"}catch{}})(a)},{default:u(()=>[...e[17]||(e[17]=[r(" 恢复 ",-1)])]),_:1},8,["onClick"])):w("",!0),"ended"!==a.status?(s(),f(xa,{key:2,type:"danger",link:"",size:"small",onClick:e=>(async a=>{try{await U.confirm("确定结束此跟单吗？结束后资金将返还用户账户。","确认结束",{type:"warning"}),S.success("已结束"),a.status="ended"}catch{}})(a)},{default:u(()=>[...e[18]||(e[18]=[r(" 结束 ",-1)])]),_:1},8,["onClick"])):w("",!0)]),_:1})]),_:1},8,["data"])),[[Fa,ta.value]]),i("div",aa,[d(Va,{"current-page":oa.page,"onUpdate:currentPage":e[3]||(e[3]=a=>oa.page=a),"page-size":oa.pageSize,"onUpdate:pageSize":e[4]||(e[4]=a=>oa.pageSize=a),"page-sizes":[10,20,50,100],total:oa.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:fa,onCurrentChange:_a},null,8,["current-page","page-size","total"])]),d(ja,{modelValue:ra.value,"onUpdate:modelValue":e[6]||(e[6]=a=>ra.value=a),title:"跟单详情",size:"600px"},{default:u(()=>[ua.value?(s(),t(g,{key:0},[d(Ta,{column:2,border:""},{default:u(()=>[d(Da,{label:"钱包地址",span:2},{default:u(()=>[i("span",{class:"wallet-address",onClick:e[5]||(e[5]=a=>va(ua.value.wallet_address))},[r(v(ua.value.wallet_address)+" ",1),d(l,null,{default:u(()=>[d(_(C))]),_:1})])]),_:1}),d(Da,{label:"跟单类型"},{default:u(()=>[d(Sa,{type:ga(ua.value.follow_type),size:"small"},{default:u(()=>[r(v(ba(ua.value.follow_type)),1)]),_:1},8,["type"])]),_:1}),d(Da,{label:"跟随交易员"},{default:u(()=>[r(v(ua.value.trader_name),1)]),_:1}),d(Da,{label:"投入金额"},{default:u(()=>[i("span",ea,v(ma(ua.value.investment))+" USDT",1)]),_:1}),d(Da,{label:"当前价值"},{default:u(()=>[i("span",{class:m(["amount",ua.value.profit>=0?"positive":"negative"])},v(ma(ua.value.current_value))+" USDT ",3)]),_:1}),d(Da,{label:"累计收益"},{default:u(()=>[i("span",{class:m(["amount",ua.value.profit>=0?"positive":"negative"])},v(ua.value.profit>=0?"+":"")+v(ma(ua.value.profit))+" USDT ",3)]),_:1}),d(Da,{label:"收益率"},{default:u(()=>[i("span",{class:m(["rate",ua.value.profit_rate>=0?"positive":"negative"])},v(ua.value.profit_rate>=0?"+":"")+v(ua.value.profit_rate)+"% ",3)]),_:1}),d(Da,{label:"状态"},{default:u(()=>[i("span",{class:m(["status-badge",ua.value.status])},v(ya(ua.value.status)),3)]),_:1}),d(Da,{label:"交易次数"},{default:u(()=>[r(v(ua.value.trade_count||0),1)]),_:1}),d(Da,{label:"开始时间"},{default:u(()=>[r(v(wa(ua.value.created_at)),1)]),_:1}),d(Da,{label:"最后更新"},{default:u(()=>[r(v(wa(ua.value.updated_at)),1)]),_:1})]),_:1}),i("div",la,[e[19]||(e[19]=i("h4",{style:{"margin-bottom":"16px",color:"var(--admin-text-primary)"}},"近期交易记录",-1)),d(Ua,{data:ua.value.trades||[],size:"small",stripe:""},{default:u(()=>[d(Ca,{prop:"time",label:"时间",width:"140"},{default:u(({row:a})=>[r(v(wa(a.time)),1)]),_:1}),d(Ca,{prop:"pair",label:"交易对",width:"100"}),d(Ca,{prop:"side",label:"方向",width:"80"},{default:u(({row:a})=>[d(Sa,{type:"buy"===a.side?"success":"danger",size:"small"},{default:u(()=>[r(v("buy"===a.side?"买入":"卖出"),1)]),_:2},1032,["type"])]),_:1}),d(Ca,{prop:"amount",label:"数量",width:"100"}),d(Ca,{prop:"price",label:"价格",width:"100"}),d(Ca,{prop:"profit",label:"收益"},{default:u(({row:a})=>[i("span",{class:m(["amount",a.profit>=0?"positive":"negative"])},v(a.profit>=0?"+":"")+v(a.profit),3)]),_:1})]),_:1},8,["data"])])],64)):w("",!0)]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-b267cb64"]]);export{ta as default};
